{"type": "root", "attrs": {}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Swirling particles around vortex filaments"], "extent": [0, 47]}, {"type": "summary", "indent": 0, "text": ["Swirls particles based on the simulated drift of ", {"type": "q", "text": ["filaments"]}, " represented by polylines."], "extent": [47, 142]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [142, 157], "body": [{"type": "para", "indent": 0, "text": ["Vortex filaments are a way to simulate a fluid using particles. It models internal velocity using polygonal curves represent vortex centers, instead of storing velocity on a grid. Since the vortex filaments control the fluid motion, you can increase the number of particles without affecting the fluid\u2019s behavior."], "extent": [157, 473]}, {"type": "para", "indent": 0, "text": ["You can use the filament workflow to create the look of intricate fluid motion, such as cigarette smoke. The filament particle simulation is not necessarily realistic, but can create certain specific effects much faster than a full high-resolution fluid simulation, and with more artistic control."], "extent": [473, 772]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/dopparticles/filaments1.jpg", "type": "img", "text": ""}, "\n", {"scheme": "Image", "value": "/images/dopparticles/filaments2.jpg", "type": "img", "text": ""}, "\n", {"scheme": "Image", "value": "/images/dopparticles/filaments3.jpg", "type": "img", "text": ""}], "extent": [772, 905]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["Filaments"]}, " are closed polylines (polygonal curves) that represent vortex forces. The general filament setup works like this:"], "extent": [905, 1032]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Create a geometry network to create the filament geometry."], "extent": [1032, 1094]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Import the filament geometry into the simulation network using the ", {"scheme": "Node", "value": "/nodes/dop/sourcefilaments", "type": "link", "text": ["Source Filaments"], "fullpath": "/nodes/dop/sourcefilaments.html"}, " node."], "extent": [1094, 1214]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The ", {"scheme": "Node", "value": "/nodes/dop/filamentsolver", "type": "link", "text": ["Filament Solver"], "fullpath": "/nodes/dop/filamentsolver.html"}, " node advects the points of the filaments to make them drift through space."], "extent": [1214, 1338]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["While the Filament solver moves the filaments, the ", {"scheme": "Node", "value": "/nodes/dop/popadvectbyfilaments", "type": "link", "text": ["POP Advect by Filaments"], "fullpath": "/nodes/dop/popadvectbyfilaments.html"}, " node applies vortex forces to surrounding particles, making them swirl around nearby filaments."], "extent": [1338, 1544]}], "container": true}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [1544, 1549], "body": [{"type": "para", "indent": 4, "text": ["Since it\u2019s just polylines and particles, you could also experiment with different starting filament geometry, filament size, filament velocity attributes, and different particle treatments, to see what kind of interesting effects they create. This might be useful, for example, to create the look of a magic spell or alien device."], "extent": [1549, 1885]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": "includeme", "container": true, "type": "h", "indent": 0, "text": ["Using Vortex Filaments"], "extent": [1885, 1926], "body": [{"type": "para", "indent": 0, "text": ["The ", {"scheme": "Icon", "value": "DOP/popadvectbyfilaments", "type": "link", "text": "", "fullpath": "/dopparticles/DOP/popadvectbyfilaments.html"}, " Vortex Filaments shelf tool creates a filament rig using the ", {"scheme": "Node", "value": "/nodes/dop/sourcefilaments", "type": "link", "text": ["Source Filaments"], "fullpath": "/nodes/dop/sourcefilaments.html"}, ", ", {"scheme": "Node", "value": "/nodes/dop/popadvectbyfilaments", "type": "link", "text": ["POP Advect by Filaments DOP"], "fullpath": "/nodes/dop/popadvectbyfilaments.html"}, ", and ", {"scheme": "Node", "value": "/nodes/dop/filamentsolver", "type": "link", "text": ["Filament Solver DOP"], "fullpath": "/nodes/dop/filamentsolver.html"}, " nodes."], "extent": [1926, 2188]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["On ", {"type": "em", "text": ["obj"]}, " level, press ", {"keys": ["Tab"], "type": "keys", "text": null}, " to invoke the TAB menu and create a ", {"scheme": "Node", "value": "/nodes/sop/circle", "type": "link", "text": ["Circle SOP"], "fullpath": "/nodes/sop/circle.html"}, ". You can also draw a curve, but make to create a closed polyline. These ", {"type": "q", "text": ["filament"]}, " curves will be the centers of the vortices in the simulation. Double click the Circle node to dive into it."], "extent": [2188, 2476]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Select the ", {"type": "code", "text": ["circle1"]}, " node and increase ", {"type": "ui", "text": ["Divisions"]}, " to ", {"type": "code", "text": ["25"]}, " to get more structures."], "extent": [2476, 2563]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["From the ", {"type": "ui", "text": ["Orientation"]}, " drop-down, choose ", {"type": "ui", "text": ["ZX Plane"]}, "."], "extent": [2563, 2622]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Make sure you change the ", {"type": "ui", "text": ["Primitive type"]}, " of the curve to ", {"type": "q", "text": ["Polygon"]}, "."], "extent": [2622, 2695]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Add a ", {"scheme": "Node", "value": "/nodes/sop/attribnoise", "type": "link", "text": ["Mountain SOP"], "fullpath": "/nodes/sop/attribnoise.html"}, " and connect it with the upstream ", {"type": "code", "text": ["circle1"]}, " node."], "extent": [2695, 2788]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Under ", {"type": "ui", "text": ["Noise Value"]}, ", go to ", {"type": "ui", "text": ["Amplitude"]}, " and enter ", {"type": "code", "text": ["0.5"]}, " to roughen the line."], "extent": [2788, 2870]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Go to the ", {"type": "ui", "text": ["Animation"]}, " subpane and turn on ", {"type": "ui", "text": ["Animate Noise"]}, " to animate the circle\u2019s points."], "extent": [2870, 2966]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Add a ", {"scheme": "Node", "value": "/nodes/sop/reverse", "type": "link", "text": ["Reverse SOP"], "fullpath": "/nodes/sop/reverse.html"}, " to make the smoke rise. Connect its input with the Mountain\u2019s output."], "extent": [2966, 3076]}], "container": true}, {"type": "para", "indent": 0, "text": ["The circle will be used as a particle source and to shape the particles to create the vortex rings."], "extent": [3076, 3177]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Return to ", {"type": "em", "text": ["obj"]}, " level and select the ", {"type": "code", "text": ["circle1"]}, " Geometry node."], "extent": [3177, 3241]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Open the Particles shelf tab and create a particle system using the ", {"scheme": "Icon", "value": "POP/source", "type": "link", "text": "", "fullpath": "/dopparticles/POP/source.html"}, " ", {"scheme": null, "value": "/shelf/dynamics_popsource", "type": "link", "text": ["Source Particle Emitter"], "fullpath": "/shelf/dynamics_popsource.html"}, " shelf tool."], "extent": [3241, 3393]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The tool creates a ", {"scheme": "Node", "value": "/nodes/obj/dopnet", "type": "link", "text": ["Dop Network Object"], "fullpath": "/nodes/obj/dopnet.html"}, " and dives into it. You can also see particles on the circle\u2019s surface."], "extent": [3393, 3522]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Again, return to ", {"type": "em", "text": ["obj"]}, " level. With ", {"type": "code", "text": ["circle1"]}, " selected, click the ", {"scheme": "Icon", "value": "DOP/popadvectbyfilaments", "type": "link", "text": "", "fullpath": "/dopparticles/DOP/popadvectbyfilaments.html"}, " Vortex Filaments tool on the ", {"type": "ui", "text": ["Particles"]}, " shelf tab."], "extent": [3522, 3675]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The tool dives into another network. Use the ", {"scheme": "Link", "value": "../network/nodes", "type": "link", "text": ["Network Editors"], "fullpath": "/network/nodes.html"}, " pane\u2019s history dropdown menu at the end of the path gadget to quickly dive into the ", {"type": "code", "text": ["AutoDopNetwork"]}, "."], "extent": [3675, 3865]}], "container": true}, {"type": "para", "indent": 0, "text": ["The current setup creates a single smoke plume, but following particles gather near the circle. Goal is to create reoccurring smoke puffs."], "extent": [3865, 4005]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Select the ", {"type": "code", "text": ["sourcefilaments_circle1"]}, " node."], "extent": [4005, 4050]}, {"blevel": 2, "type": "ord", "indent": 0, "text": [{"keys": ["RMB"], "type": "keys", "text": null}, " click the ", {"type": "ui", "text": ["Activation"]}, " parameter. From the menu, choose ", {"type": "ui", "text": ["Delete Channels"]}, "."], "extent": [4050, 4139]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Then, enter ", {"type": "code", "text": ["$F % 20 == 1"]}, ". This expression is a so-called modulo function. When the current frame, divided by ", {"type": "code", "text": ["20"]}, ", returns ", {"type": "code", "text": ["1"]}, ", new particles are sourced."], "extent": [4139, 4298]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Select the ", {"type": "code", "text": ["gravity1"]}, " node and turn off the yellow ", {"type": "ui", "text": ["Bypass"]}, " flag to deactivate it."], "extent": [4298, 4386]}], "container": true}, {"type": "para", "indent": 0, "text": ["Finally, on the ", {"scheme": "Link", "value": "../anim/playbar", "type": "link", "text": ["Playbar"], "fullpath": "/anim/playbar.html"}, ", click the ", {"scheme": "Smallicon", "value": "PLAYBAR/play_forward.svg", "type": "link", "text": "", "fullpath": "/dopparticles/PLAYBAR/play_forward.svg.html"}, " icon to start the simulation. You can see the rising particles, but also how the deformed filaments are shaping the vortices."], "extent": [4386, 4608]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [4608, 4613], "body": [{"type": "para", "indent": 4, "text": ["The ", {"scheme": null, "value": "/examples/nodes/dop/popadvectbyfilaments/AdvectByFilaments", "type": "link", "text": ["Advect by Filaments example"], "fullpath": "/examples/nodes/dop/popadvectbyfilaments/AdvectByFilaments.html"}, " demonstrates how to set up a filament geometry network, and how to use the dynamics nodes to create a turbulent smoke effect. Note that the file\u2019s setup is slightly different from this workflow guide."], "extent": [4613, 4912]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Important parameters"], "extent": [4912, 4939], "body": [{"type": "para", "indent": 0, "text": ["Use ", {"type": "ui", "text": ["Scale Strength"]}, " and ", {"type": "ui", "text": ["Scale Thickness"]}, " on the ", {"scheme": "Node", "value": "/nodes/dop/sourcefilaments", "type": "link", "text": ["Source Filaments DOP"], "fullpath": "/nodes/dop/sourcefilaments.html"}, " node to adjust the effect of each filament."], "extent": [4939, 5087]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [5087, 5102], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Velocity (", {"type": "code", "text": ["v"]}, ") attributes on the points of the filament curves will affect their motion."], "extent": [5102, 5195]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can cache the filament simulation to disk as a separate pass and then read it off disk."], "extent": [5195, 5290]}], "container": true}]}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [5290, 5299], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/sourcefilaments", "type": "link", "text": "", "fullpath": "/nodes/dop/sourcefilaments.html"}], "extent": [5299, 5329]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/filamentsolver", "type": "link", "text": "", "fullpath": "/nodes/dop/filamentsolver.html"}], "extent": [5329, 5357]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/popadvectbyfilaments", "type": "link", "text": "", "fullpath": "/nodes/dop/popadvectbyfilaments.html"}], "extent": [5357, 5391]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "/examples/nodes/dop/popadvectbyfilaments/AdvectByFilaments", "type": "link", "text": "", "fullpath": "/examples/nodes/dop/popadvectbyfilaments/AdvectByFilaments.html"}], "extent": [5391, 5453]}], "container": true}], "text": "Related"}], "title": ["Swirling particles around vortex filaments"], "summary": ["Swirls particles based on the simulated drift of ", {"type": "q", "text": ["filaments"]}, " represented by polylines."]}