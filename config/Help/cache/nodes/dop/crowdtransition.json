{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "crowdtransition", "icon": "CROWDS/transition", "tags": "crowds", "version": "3.0", "since": "15.5", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Crowd Transition"], "extent": [120, 141]}, {"type": "summary", "indent": 0, "text": ["Defines a transition between crowd states."], "extent": [141, 192]}, {"type": "para", "indent": 0, "text": ["This node defines a ", {"scheme": null, "value": "/crowds/triggers", "type": "link", "text": ["transition"], "fullpath": "/crowds/triggers.html"}, " from one ", {"scheme": "Node", "value": "/nodes/dop/crowdstate", "type": "link", "text": ["crowd state"], "fullpath": "/nodes/dop/crowdstate.html"}, " to another.\nThe input is a ", {"scheme": "Node", "value": "/nodes/dop/crowdtrigger", "type": "link", "text": ["trigger"], "fullpath": "/nodes/dop/crowdtrigger.html"}, " that initiates the transition when its condition evaluates to true."], "extent": [192, 413]}, {"level": 2, "id": "cliptransitiongraph", "container": true, "type": "h", "indent": 0, "text": ["Clip Transition Graph"], "extent": [413, 463], "body": [{"type": "para", "indent": 0, "text": ["A ", {"scheme": "Node", "value": "/nodes/sop/agentcliptransitiongraph", "type": "link", "text": ["clip transition graph"], "fullpath": "/nodes/sop/agentcliptransitiongraph.html"}, " can be used to control how transitions between animation clips are performed.\nIt provides information about which clips are allowed to transition to each other, and where in the clips those transitions should occur.\nThis can be used to delay clip transitions until an appropriate point in the current animation clip, and smoothly blend into the next clip at a time when the poses are similar.\nIf the source and destination clips cannot directly transition to each other, a sequence of transitions can be performed using the intermediate clips along the shortest path to the destination clip."], "extent": [463, 1117]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [1117, 1122], "body": [{"type": "para", "indent": 4, "text": ["The ", {"scheme": "Node", "value": "/nodes/sop/testsim_crowdtransition", "type": "link", "text": ["Test Simulation: Crowd Transition SOP"], "fullpath": "/nodes/sop/testsim_crowdtransition.html"}, " can be used to quickly preview transitions between particular clips before setting up a crowd simulation."], "extent": [1122, 1310]}], "container": true}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Usage"], "extent": [1310, 1324], "body": [{"type": "para", "indent": 0, "text": ["The clip transition graph geometry can be explicitly provided to the ", {"scheme": "Node", "value": "/nodes/dop/crowdobject", "type": "link", "text": ["Crowd Object DOP"], "fullpath": "/nodes/dop/crowdobject.html"}, " via the ", {"type": "ui", "text": ["Clip Transition Graph"]}, " parameter, allowing it to be used for any transitions in a crowd simulation."], "extent": [1324, 1546]}, {"type": "para", "indent": 0, "text": ["Alternatively, the clip transition graph geometry can be stored in the ", {"scheme": null, "value": "/crowds/agents#agentdefinition", "type": "link", "text": ["agent definition"], "fullpath": "/crowds/agents.html#agentdefinition", "fragment": "#agentdefinition"}, " as a shape named ", {"type": "code", "text": ["__transitiongraph__"]}, ".\nThis can be configured by using the second output of the ", {"scheme": "Node", "value": "/nodes/sop/agentcliptransitiongraph", "type": "link", "text": ["Agent Clip Transition Graph SOP"], "fullpath": "/nodes/sop/agentcliptransitiongraph.html"}, ", which adds the clip transition graph to the input agent\u2019s shape library."], "extent": [1546, 1907]}, {"type": "para", "indent": 0, "text": ["Storing the clip transition graph in the agent definition avoids the need to carry a separate stream of geometry through the network. It also allows the transition graph to be easily ", {"scheme": "Node", "value": "/nodes/sop/agentdefinitioncache", "type": "link", "text": ["cached to disk"], "fullpath": "/nodes/sop/agentdefinitioncache.html"}, " along with the agent definition\u2019s shape library.\nThis workflow is required by the ", {"scheme": "Node", "value": "/nodes/sop/crowdmotionpathtransition", "type": "link", "text": ["Crowd MotionPath Transition SOP"], "fullpath": "/nodes/sop/crowdmotionpathtransition.html"}, ", and is also supported by the ", {"scheme": "Node", "value": "/nodes/dop/crowdobject", "type": "link", "text": ["Crowd Object DOP"], "fullpath": "/nodes/dop/crowdobject.html"}, " when the clip transition graph geometry isn\u2019t explicitly provided."], "extent": [1907, 2426]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [2426, 2431], "body": [{"type": "para", "indent": 4, "text": ["The transition graph geometry can be retrieved from the agent definition with the ", {"scheme": "Node", "value": "/nodes/sop/agentunpack", "type": "link", "text": ["Agent Unpack SOP"], "fullpath": "/nodes/sop/agentunpack.html"}, ":"], "extent": [2431, 2559]}, {"type": "ord_group", "body": [{"blevel": 6, "type": "ord", "indent": 4, "text": ["Set ", {"type": "ui", "text": ["Output"]}, " to ", {"type": "ui", "text": ["Rest Geometry"]}, "."], "extent": [2559, 2603]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Set ", {"type": "ui", "text": ["Unpack Shapes From"]}, " to ", {"type": "ui", "text": ["Shape Library"]}, "."], "extent": [2603, 2659]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["To unpack the shape, set ", {"type": "ui", "text": ["Shapes"]}, " to ", {"type": "code", "text": ["__transitiongraph__"]}, ", and ", {"type": "ui", "text": ["Iterations"]}, " to ", {"type": "code", "text": ["2"]}, "."], "extent": [2659, 2755]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Optionally turn off ", {"type": "ui", "text": ["Apply Agent Transform"]}, " to avoid applying the input agent\u2019s transform to the geometry. To avoid producing duplicate geometry if the input contains multiple agent primitives, turn on ", {"type": "ui", "text": ["Limit to Unique Agent Definitions"]}, "."], "extent": [2755, 3005]}], "container": true}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Attributes"], "extent": [3005, 3024], "body": [{"type": "para", "indent": 0, "text": ["Each point in the clip transition graph geometry represents an animation clip, and each two-point polygon represents a (one-way) transition between the clips."], "extent": [3024, 3185]}, {"tag": "table", "attrs": {}, "type": "pxml", "indent": 0, "extent": [3185, 3193], "body": [{"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [3193, 3202], "body": [{"tag": "th", "attrs": {}, "type": "pxml", "indent": 8, "text": [" Name"], "extent": [3202, 3220]}, {"tag": "th", "attrs": {}, "type": "pxml", "indent": 8, "text": [" Class"], "extent": [3220, 3239]}, {"tag": "th", "attrs": {}, "type": "pxml", "indent": 8, "text": [" Type"], "extent": [3239, 3257]}, {"tag": "th", "attrs": {}, "type": "pxml", "indent": 8, "text": [" Description"], "extent": [3257, 3282]}], "container": true}, {"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [3282, 3291], "body": [{"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" ", {"type": "code", "text": ["clipname"]}], "extent": [3291, 3315]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" point"], "extent": [3315, 3334]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" string"], "extent": [3334, 3354]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "extent": [3354, 3367], "body": [{"type": "para", "indent": 12, "text": ["Specifies the name of an animation clip."], "extent": [3367, 3420]}], "container": true}], "container": true}, {"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [3420, 3429], "body": [{"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" ", {"type": "code", "text": ["agentname"]}], "extent": [3429, 3454]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" point"], "extent": [3454, 3473]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" string"], "extent": [3473, 3493]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "extent": [3493, 3506], "body": [{"type": "para", "indent": 12, "text": ["This string is matched with the agent\u2019s ", {"type": "code", "text": ["agentname"]}, " point attribute to avoid potential name conflicts if a crowd contains multiple agent definitions.\n            For example, two different types of agents may both have a clip named ", {"type": "q", "text": ["walk"]}, "."], "extent": [3506, 3758]}], "container": true}], "container": true}, {"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [3758, 3767], "body": [{"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" ", {"type": "code", "text": ["blend_durations"]}], "extent": [3767, 3798]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" primitive"], "extent": [3798, 3821]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" float array"], "extent": [3821, 3846]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "extent": [3846, 3859], "body": [{"type": "para", "indent": 12, "text": ["For each transition region, specifies the duration (in seconds) of any transitions that start in that region."], "extent": [3859, 3981]}], "container": true}], "container": true}, {"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [3981, 3990], "body": [{"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" ", {"type": "code", "text": ["sync_points"]}], "extent": [3990, 4017]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" primitive"], "extent": [4017, 4040]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" vector2 array"], "extent": [4040, 4067]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "extent": [4067, 4080], "body": [{"type": "para", "indent": 12, "text": ["For each transition region, specifies a pair of clip times (in seconds) where the two animation clips have a similar pose."], "extent": [4080, 4215]}], "container": true}], "container": true}, {"tag": "tr", "attrs": {}, "type": "pxml", "indent": 4, "extent": [4215, 4224], "body": [{"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" ", {"type": "code", "text": ["transition_regions"]}], "extent": [4224, 4258]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" primitive"], "extent": [4258, 4281]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "text": [" vector2 array"], "extent": [4281, 4308]}, {"tag": "td", "attrs": {}, "type": "pxml", "indent": 8, "extent": [4308, 4321], "body": [{"type": "para", "indent": 12, "text": ["Specifies ranges of clip times (in seconds) for the first animation clip where a transition is allowed to occur."], "extent": [4321, 4447]}], "container": true}], "container": true}], "container": true}]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [4447, 4459], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [4459, 4467], "body": [{"type": "para", "indent": 4, "text": ["Only affect a group of agents."], "extent": [4467, 4503]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Input State"], "extent": [4503, 4516], "body": [{"type": "para", "indent": 4, "text": ["A string pattern that specifies the states to transition out of.\n    The state names correspond to the ", {"type": "ui", "text": ["State Name"]}, " parameter on a ", {"scheme": "Node", "value": "/nodes/dop/crowdstate", "type": "link", "text": ["Crowd State"], "fullpath": "/nodes/dop/crowdstate.html"}, " node.\n    The pattern follows the same syntax as the ", {"scheme": "Vex", "value": "/vex/functions/match", "type": "link", "text": ["match"], "fallback_text": "match()", "fullpath": "/vex/functions/match.html"}, " VEX function."], "extent": [4516, 4773]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["*"]}, " matches all states."], "extent": [4773, 4803]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["* ^walk"]}, " matches all states except for the ", {"type": "code", "text": ["walk"]}, " state."], "extent": [4803, 4867]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["walk run_*"]}, " matches the ", {"type": "code", "text": ["walk"]}, " state and all states whose names begin with ", {"type": "code", "text": ["run_"]}, "."], "extent": [4867, 4958]}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output State"], "extent": [4958, 4972], "body": [{"type": "para", "indent": 4, "text": ["Name of the state to transition into. This corresponds to the ", {"type": "ui", "text": ["State Name"]}, " parameter on a ", {"scheme": "Node", "value": "/nodes/dop/crowdstate", "type": "link", "text": ["Crowd State"], "fullpath": "/nodes/dop/crowdstate.html"}, " node."], "extent": [4972, 5109]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Clip"], "extent": [5109, 5122], "body": [{"type": "para", "indent": 4, "text": ["When turned on, overrides the default clip selection with the specified clip when transitioning to the ", {"type": "ui", "text": ["Output State"]}, ". Normally, the output clip is chosen based on the ", {"scheme": "Node", "value": "/nodes/dop/crowdstate", "type": "link", "text": ["output state\u2019s"], "fullpath": "/nodes/dop/crowdstate.html"}, " ", {"type": "ui", "text": ["Clip Assignment"]}, " parameters."], "extent": [5122, 5366]}, {"type": "para", "indent": 4, "text": ["The clip can be adjusted per-agent using VEXpressions."], "extent": [5366, 5426]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use VEXpressions"], "extent": [5426, 5444], "body": [{"type": "para", "indent": 4, "text": ["When turned on, uses a local expression to override the ", {"type": "ui", "text": ["Input State"]}, ", ", {"type": "ui", "text": ["Output State"]}, ", or ", {"type": "ui", "text": ["Output Clip"]}, " for each agent."], "extent": [5444, 5575]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Random Delay"], "extent": [5575, 5593], "body": [{"type": "para", "indent": 4, "text": ["When turned on, specifies the maximum delay (in seconds) between when the trigger evaluates to true and when the transition begins. This is useful to avoid having many agents start the transition at the same time. "], "extent": [5617, 5837]}], "container": true, "attrs": {"id": "maxrandomdelay"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Random Seed"], "extent": [5837, 5850], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Max Random Delay"]}, " is turned on, this specifies the seed used when selecting a random delay time."], "extent": [5875, 5985]}], "container": true, "attrs": {"id": "randomdelayseed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Clip Transition Graph"], "extent": [5985, 6012], "body": [{"type": "para", "indent": 4, "text": ["When turned on, the ", {"scheme": "Node", "value": "/nodes/dop/crowdobject", "type": "link", "text": ["crowd object\u2019s"], "fullpath": "/nodes/dop/crowdobject.html"}, " clip transition graph may optionally be used to control transitions between states and animation clips.\n    This can be used to delay transitions until an appropriate point in the current animation clip, make use of intermediate transition clips, and provide information about how to smoothly blend into the new clip."], "extent": [6012, 6393]}, {"type": "para", "indent": 4, "text": ["Additionally, the clip transition graph allows per-clip control over this behavior (which is useful if the ", {"type": "ui", "text": ["Input State"]}, " parameter specifies multiple states, or if ", {"type": "ui", "text": ["Clip Assignment"]}, " is set to ", {"type": "ui", "text": ["Random Distribution"]}, " for any of the input states)."], "extent": [6393, 6648]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Interrupt Active Transitions"], "extent": [6648, 6678], "body": [{"type": "para", "indent": 4, "text": ["When turned on, allows an active or pending transition to be interrupted in order for this transition to begin.\n    For example, this can be useful for immediately switching into a ragdoll state after an impact occurs, regardless of whether an agent is in the middle of a transition."], "extent": [6678, 6967]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Duration"], "extent": [6967, 6977], "body": [{"type": "para", "indent": 4, "text": ["Length of the transition between states (in seconds)."], "extent": [6977, 7036]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["State Blend"], "extent": [7036, 7049], "body": [{"type": "para", "indent": 4, "text": ["Specifies how the crowd solver should blend between the ", {"type": "ui", "text": ["Input State"]}, " and ", {"type": "ui", "text": ["Output State"]}, " as the transition progresses."], "extent": [7049, 7177]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [7177, 7186], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/crowdsolver", "type": "link", "text": "", "fullpath": "/nodes/dop/crowdsolver.html"}], "extent": [7186, 7211]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/crowdstate", "type": "link", "text": "", "fullpath": "/nodes/dop/crowdstate.html"}], "extent": [7211, 7235]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/crowdtrigger", "type": "link", "text": "", "fullpath": "/nodes/dop/crowdtrigger.html"}], "extent": [7235, 7261]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/crowdtriggerlogic", "type": "link", "text": "", "fullpath": "/nodes/dop/crowdtriggerlogic.html"}], "extent": [7261, 7292]}], "container": true}], "text": "Related"}], "title": ["Crowd Transition"], "summary": ["Defines a transition between crowd states."]}