{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "sublayer", "icon": "LOP/sublayer", "group": "layers", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Sublayer"], "extent": [0, 13]}, {"type": "summary", "indent": 0, "text": ["Imports from USD files or other LOP node chains into as sublayers, or removes/replaces/reorders existing sublayers."], "extent": [108, 232]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [232, 247], "body": [{"type": "para", "indent": 0, "text": ["This node represents the most basic way to add USD files to your scene. Sublayers tell USD to add the content primitives your scene as-is, without any sort of parenting of the primitives. This node is able to sublayer from multiple files and multiple nodes."], "extent": [247, 507]}, {"type": "para", "indent": 0, "text": ["See the section ", {"type": "em", "text": [{"scheme": null, "value": "#sublyrdetails", "type": "link", "text": ["Sublayers Explained"], "fullpath": "/nodes/lop/sublayer.html#sublyrdetails", "fragment": "#sublyrdetails"}]}, " for details about this USD concept."], "extent": [507, 599]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips"], "extent": [599, 610], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can use the ", {"scheme": null, "value": "/ref/panes/scenegraphlayers", "type": "link", "text": ["Scene graph layers pane"], "fullpath": "/ref/panes/scenegraphlayers.html"}, " to view the results of adding the sublayers."], "extent": [610, 729]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["This node supports sublayering multiple files at once. The "], "extent": [729, 792]}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["How to"], "extent": [792, 805], "body": [{"type": "para", "indent": 0, "text": ["The ", {"type": "q", "text": ["target"]}, " layer you want to add to the layer stack is often in an external file, however this node can also import the layer(s) in the output of another LOP node."], "extent": [805, 973]}, {"type": "task_group", "body": [{"ext": null, "type": "task", "indent": 0, "text": [" Sublayer in an external file"], "role": "item", "extent": [973, 1011], "body": [{"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Sublayer type"]}, " to ", {"type": "q", "text": ["Sublayer files"]}, "."], "extent": [1011, 1065]}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["File"]}, " to the file path of the layer file you want to load in."], "extent": [1065, 1145]}], "container": true}], "container": true}, {"ext": null, "type": "task", "indent": 0, "text": [" Sublayer in a layer the output of a LOP node"], "role": "item", "extent": [1145, 1207], "body": [{"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Sublayer type"]}, " to ", {"type": "q", "text": ["Sublayer inputs"]}, "."], "extent": [1207, 1262]}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["Connect the LOP with the layers you want to this node\u2019s multi-input."], "extent": [1262, 1342], "body": [{"type": "para", "indent": 16, "text": ["When you wire more than one node into the multi-input, the ordering is ", {"type": "strong", "text": ["weaker to stronger"]}, ", from left to right. (That is, opinions in layers closer to the left side of the multi-input are weaker than opinions in layers closer to the right side.)"], "extent": [1342, 1606]}], "container": true}], "container": true}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [1606, 1619], "body": [{"type": "para", "indent": 16, "text": ["You can use the table below the parameters in the parameter editor to re-order the connections to the multi-input."], "extent": [1619, 1751]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"ext": null, "type": "task", "indent": 0, "text": [" Remove an existing sublayer file from the stack"], "role": "item", "extent": [1751, 1816], "body": [{"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [1816, 1830], "body": [{"type": "para", "indent": 16, "text": ["This only works for layers with Save Path metadata (that is, layers loaded from disk, or layers you've explicitly set Save Path metadata on with the ", {"scheme": "Node", "value": "/nodes/lop/configurelayer", "type": "link", "text": ["Configure Layer LOP"], "fullpath": "/nodes/lop/configurelayer.html"}, ")."], "extent": [1830, 2044]}], "container": true}], "container": true, "role": "item_group"}, {"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Find sublayers"]}, " to the file path in the layer\u2019s source file path metadata (or a pattern matching the source file path)."], "extent": [2044, 2182], "body": [{"type": "note_group", "body": [{"type": "note", "indent": 16, "role": "item", "extent": [2182, 2204], "body": [{"type": "para", "indent": 24, "text": ["In Houdini 18.0, the node only matches against each layer\u2019s ", {"type": "q", "text": ["source file"]}, " metadata (the path of the file the layer was loaded from). So this ", {"type": "strong", "text": ["only matches layers that exist on disk"]}, ". Even if a layer has Save Path metadata, until the layer is ", {"type": "em", "text": ["actually saved to disk"]}, ", it will not have a source path you can match against."], "extent": [2204, 2551]}, {"type": "para", "indent": 24, "text": ["(A future version of Houdini will likely fix this to match against Save Path metadata as well.)"], "extent": [2551, 2672]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["Turn on ", {"type": "ui", "text": ["Remove found sublayers"]}, "."], "extent": [3386, 3434]}], "container": true}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": "sublyrdetails", "container": true, "type": "h", "indent": 0, "text": ["USD Sublayers Explained"], "extent": [3434, 3480], "body": [{"type": "para", "indent": 4, "text": ["Sublayering overlays the contents of the imported file over the existing contents. Each tree\u2019s ", {"type": "q", "text": ["opinions"]}, " about prims with the same path, and (on those prims) properties/metadata with the same name, are merged based on ", {"scheme": null, "value": "#strength", "type": "link", "text": ["opinion strength"], "fullpath": "/solaris/usd.html#strength", "fragment": "#strength"}, " (see below)."], "extent": [15357, 15624]}, {"type": "para", "indent": 4, "text": ["This is useful when combining files that are each meant to contribute a portion of a complete scene. For example, composing separate layers representing set layout, props, characters, effects,and lights."], "extent": [15624, 15833]}, {"type": "para", "indent": 4, "text": ["An inherent feature of sublayering is that ", {"type": "q", "text": ["everything stays in the same place"]}, ". Prims have the same path in the new file as they had in their source file."], "extent": [15833, 15994]}, {"type": "para", "indent": 4, "text": ["Because each of these departments is working in a separate sublayer, they don\u2019t need to worry about sharing a single file and having conflicting edits. But because they are all working in the same scene graph hierarchy, each department can apply changes to any of the content created by other departments."], "extent": [15994, 16305]}, {"type": "para", "indent": 4, "text": [{"scheme": "Smallicon", "value": "MISC/logo", "type": "link", "text": "", "fullpath": "/solaris/MISC/logo.html"}, " The ", {"scheme": "Node", "value": "/nodes/lop/sublayer", "type": "link", "text": ["Sublayer LOP"], "fullpath": "/nodes/lop/sublayer.html"}, " loads new sublayers into the scene. LOP networks in general are always editing the strongest sublayer of an empty root layer. Some LOP nodes may start a new, stronger sublayer which is then modified by all following LOP nodes. These network output is the composition of this sublayer stack."], "extent": [16305, 16660]}, {"type": "box_group", "body": [{"ext": null, "type": "box", "indent": 4, "text": [" Top-level file that specifies sublayers"], "role": "item", "extent": [16660, 16710], "body": [{"lang": "usd", "type": "pre", "indent": 8, "text": ["\n        #usda 1.0\n        (\n            subLayers = [\n                    @shotLighting.usd@,\n                    @shotFX.usd@,\n                    @shotAnimation.usd@,\n                    @shotSetDressing.usd@,\n                    @sequence.usd@\n            ]\n        )\n        "], "extent": [16710, 17019]}], "container": true}], "container": true, "role": "item_group"}], "attrs": {"display": "collapsible collapsed"}}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [3550, 3558], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["First Input"], "extent": [3558, 3572], "body": [{"type": "para", "indent": 8, "text": ["The stage to which this node will add new sublayers."], "extent": [3572, 3634]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Second Input (multi-input)"], "extent": [3634, 3662], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Sublayer Type"]}, " is ", {"type": "q", "text": ["Sublayer Inputs"]}, ", the node adds layers from stages connected to this multi-input into the layer stack in the first input."], "extent": [3662, 3821]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [3821, 3833], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Load Payloads"], "extent": [3833, 3849], "body": [{"type": "para", "indent": 8, "text": ["When this option is on (the default), the payload loading configuration of the input stage is not changed. When this option is off, the stage\u2019s load mask will be modified to turn off all payload loading. Note that this will affect the loading of payloads anywhere in the stage, not just payloads loaded by the sublayers added by this node. Use the ", {"scheme": "Node", "value": "/nodes/lop/configurestage", "type": "link", "text": ["Configure Stage LOP"], "fullpath": "/nodes/lop/configurestage.html"}, " to have more control over which payloads are loaded on the stage."], "extent": [3849, 4318]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Copy Layer Metadata to Stage Root Layer"], "extent": [4318, 4359], "body": [{"type": "para", "indent": 8, "text": ["Layer metadata is not composed by USD following the normal rules. In order for values like the frames per second or up axis settings to apply to a USD stage, they must be set directly on the root layer of the stage. This means any layer metadata authored on a file being loaded by this node will not affect the stage level metadata. This options allow for the explicit copying of layer metadata from the first layer loaded by this node on to the stage\u2019s root layer. If multiple files are specified, it it always the first file that has its values copied to the root layer."], "extent": [4359, 4941]}, {"type": "para", "indent": 8, "text": ["The ", {"type": "code", "text": ["Auto"]}, " option for this parameter acts like a ", {"type": "code", "text": ["Yes"]}, " (copy the sublayer\u2019s metadata to the root layer) if there is no input connected to the first input of this node. Otherwise it behaves as a ", {"type": "code", "text": ["No"]}, " (does not affect the stage\u2019s root layer metadata)."], "extent": [4941, 5200]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Edit Root Layer"], "extent": [5200, 5217], "body": [{"type": "para", "indent": 8, "text": ["When this is on (the default), the new sublayers are added to the layer stack. This is usually what you want. When this is off, the content of the imported layers become sublayers of the active layer."], "extent": [5217, 5427]}, {"type": "para", "indent": 8, "text": ["Turning this on or off usually does not make a visible difference, but affects the priority given to opinions on the layers, and what content is in what layers when you ", {"scheme": null, "value": "/solaris/output", "type": "link", "text": ["write USD to disk"], "fullpath": "/solaris/output.html"}, "."], "extent": [5427, 5642]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Find Sublayers"], "extent": [5642, 5658], "body": [{"type": "para", "indent": 8, "text": ["A space-separated list of patterns that match layers by their ", {"type": "q", "text": ["source file"]}, " metadata. This selects the layers for removal or reordering when you use the ", {"type": "ui", "text": ["Remove found sublayers"]}, " or ", {"type": "ui", "text": ["Sublayer position"]}, " parameters below."], "extent": [5658, 5890]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remove Found Sublayers"], "extent": [5890, 5914], "body": [{"type": "para", "indent": 8, "text": ["Turn this on to remove any layers that match the patterns the ", {"type": "ui", "text": ["Find sublayers"]}, "."], "extent": [5914, 6005]}, {"type": "para", "indent": 8, "text": ["This is useful if you want to ", {"type": "em", "text": ["replace"]}, " layers rather than just add them. For example, you may be editing a layer that has sublayers for animation, effects, and lighting. If your LOP network generates a new version of the effects layer, you would want to remove the existing effects layer and replace it with the new one."], "extent": [6005, 6336]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sublayer Type"], "extent": [6336, 6351], "body": [{"type": "para", "indent": 8, "text": ["Where to add sublayers from."], "extent": [6351, 6389]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Sublayer Files and Inputs"], "extent": [6389, 6424], "body": [{"type": "para", "indent": 16, "text": ["Import layers from file(s) on disk, and then import layers from LOP node branches connected to this node\u2019s multi-input."], "extent": [6424, 6561]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Sublayer Files"], "extent": [6561, 6585], "body": [{"type": "para", "indent": 16, "text": ["Import layers from file(s) on disk."], "extent": [6585, 6638]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Sublayer Inputs"], "extent": [6638, 6663], "body": [{"type": "para", "indent": 16, "text": ["Import layers from LOP node branches connected to this node\u2019s multi-input."], "extent": [6663, 6755]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Handle Missing Files"], "extent": [6755, 6777], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Sublayer type"]}, " is ", {"type": "q", "text": ["Sublayer files"]}, ", what to do when a file (either a file you specify or a file referenced inside another file) cannot be found."], "extent": [6777, 6939]}, {"type": "para", "indent": 8, "text": ["Error for Missing Files:\n        The node errors, preventing cooking the rest of the network."], "extent": [6939, 7046]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Warn for Missing Files"], "extent": [7046, 7074], "body": [{"type": "para", "indent": 8, "text": ["The node shows a warning, then passes through the first input unchanged."], "extent": [7074, 7160]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Ignore Missing Files"], "extent": [7160, 7186], "body": [{"type": "para", "indent": 8, "text": ["The node silently ignores the missing file, and passes through the first input unchanged."], "extent": [7186, 7285]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Allow Missing Files on the Stage"], "extent": [7285, 7323], "body": [{"type": "para", "indent": 8, "text": ["Author the reference to the sublayer even if it currently doesn\u2019t exist. This node and the following nodes will probably print warnings from the USD libraries about missing files."], "extent": [7323, 7512]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sublayer Position"], "extent": [7512, 7531], "body": [{"type": "para", "indent": 8, "text": ["Where in the sublayer stack to insert the new layers. The position affects the priority of its opinions compared to other layers."], "extent": [7531, 7670]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Strongest Position"], "extent": [7670, 7698], "body": [{"type": "para", "indent": 16, "text": ["Add the new layers as the strongest sublayers. The opinions in these layers override all other layers."], "extent": [7698, 7826]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Weakest Position"], "extent": [7826, 7852], "body": [{"type": "para", "indent": 16, "text": ["Add the new layers as the weakest sublayers. The opinions in these layers will be overridden by any sublayer with an opinion on the same data."], "extent": [7852, 8020]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Strongest File Layer\u2019s Position"], "extent": [8020, 8061], "body": [{"type": "para", "indent": 16, "text": ["Add the new layers where their opinions are stronger than the strongest layer that is loaded from a file on disk. This option can be used to keep all LOP-authored layers together, allowing them to be flattened into a single layer when saving to disk."], "extent": [8061, 8337]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Strongest Found Layer\u2019s Position"], "extent": [8337, 8379], "body": [{"type": "para", "indent": 16, "text": ["Add the new layers where their opinions are stronger than the strongest layer found by the ", {"type": "ui", "text": ["Find Layers"]}, " parameter."], "extent": [8379, 8522]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Weakest Found Layer\u2019s Position"], "extent": [8522, 8562], "body": [{"type": "para", "indent": 16, "text": ["Add the new layers where their opinions are weaker than the weakest layer found by the ", {"type": "ui", "text": ["Find Layers"]}, " parameter."], "extent": [8562, 8701]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Specific Index"], "extent": [8701, 8725], "body": [{"type": "para", "indent": 16, "text": ["Insert the new layers into the sublayer stack at a specific position (set by the ", {"type": "ui", "text": ["Position index"]}, " parameter below). Lower numbers represent stronger opinions. Setting this to ", {"type": "code", "text": ["0"]}, " is the same as choosing ", {"type": "q", "text": ["Strongest Position"]}, "."], "extent": [8725, 8969]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Position Index"], "extent": [8969, 8985], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Sublayer position"]}, " is ", {"type": "q", "text": ["Specific index"]}, ". Insert the new layers at this specific position. Lower numbers represent stronger opinions. Setting this to ", {"type": "code", "text": ["0"]}, " is the same as setting ", {"type": "ui", "text": ["Sublayer position"]}, " to ", {"type": "q", "text": ["Strongest Position"]}, "."], "extent": [8985, 9224]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Number of Files"], "extent": [9224, 9241], "body": [{"type": "para", "indent": 8, "text": ["This node can sublayer in more than one file at a time. Enter the number of files to import, or click the plus and minus buttons to add or remove layer files."], "extent": [9241, 9409]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable"], "extent": [9409, 9417], "body": [{"type": "para", "indent": 8, "text": ["Whether to load this file."], "extent": [9417, 9453]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["File"], "extent": [9453, 9459], "body": [{"type": "para", "indent": 8, "text": ["The file path to the file."], "extent": [9459, 9495]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"type": "include_group", "body": [{"ext": "reference#timeoffset", "type": "include", "indent": 0, "role": "item", "extent": [9495, 9527]}, {"ext": "reference#timescale", "type": "include", "indent": 0, "role": "item", "extent": [9527, 9558]}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Mute Layer"], "extent": [9558, 9570], "body": [{"type": "para", "indent": 8, "text": ["Load the layer but immediately ", {"type": "em", "text": ["mute"]}, " it. This may be useful if the layer must be loaded for other layers to work, but you don\u2019t need to edit or display it."], "extent": [9570, 9736]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reload Files"], "extent": [9736, 9750], "body": [{"type": "para", "indent": 8, "text": ["Click to reload the contents of all files imported by this node."], "extent": [9750, 9824]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Inputs"], "extent": [9824, 9839], "body": [{"type": "para", "indent": 8, "text": ["Whether to add the LOP node layers connected to the multi-input to the stage."], "extent": [9839, 9925]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}], "title": ["Sublayer"], "summary": ["Imports from USD files or other LOP node chains into as sublayers, or removes/replaces/reorders existing sublayers."], "included": ["/nodes/lop/reference", "/solaris/usd"]}