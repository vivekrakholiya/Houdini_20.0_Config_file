{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "prune", "icon": "SOP/clean", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Prune"], "extent": [0, 10]}, {"type": "summary", "indent": 0, "text": ["Hides or deactivates primitives and point instances."], "extent": [93, 154]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [154, 169], "body": [{"type": "para", "indent": 0, "text": ["Because USD only allows non-destructive edits, the two methods to ", {"type": "q", "text": ["remove"]}, " something from the scene are to ", {"type": "em", "text": ["hide"]}, " it or ", {"type": "em", "text": ["deactivate"]}, " it."], "extent": [169, 308]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Deactivated prims and their children will not be traversed or processed by USD functions or LOP nodes. Children of deactivated primitives don\u2019t appear in the Scene Graph Tree."], "extent": [308, 487]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Hidden prims their descendants and are still processed by USD functions and LOP nodes, but are not shown in the viewport or rendered."], "extent": [487, 624]}], "container": true}, {"type": "para", "indent": 0, "text": ["You can write an override of the activation/visibility data of a prim into the active layer, so when it is composed with the lower layers, in the output stage the prim is deactivated or invisible."], "extent": [624, 822]}, {"type": "para", "indent": 0, "text": ["For example, the lighting department might deactivate scratch lighting from a layer they receive from the layout department."], "extent": [822, 948]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [948, 953], "body": [{"type": "para", "indent": 4, "text": ["You can see the visibility and activation state of prims in the ", {"scheme": null, "value": "/ref/panes/scenegraphtree", "type": "link", "text": ["scene graph tree pane"], "fullpath": "/ref/panes/scenegraphtree.html"}, "."], "extent": [953, 1074]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["How to"], "extent": [1074, 1087], "body": [{"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Use the ", {"type": "q", "text": ["Target Rules"]}, " multi-parm to select primitives using various methods. Exclude specific primitives from the target primitives using ", {"type": "ui", "text": ["Add exclusions"]}, "."], "extent": [1087, 1250]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Set ", {"type": "ui", "text": ["Method"]}, " to ", {"type": "q", "text": ["Make Invisible"]}, " or ", {"type": "q", "text": ["Deactivate"]}, ", depending how you want to ", {"type": "q", "text": ["remove"]}, " the selected prims."], "extent": [1250, 1360]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Perform an ", {"type": "strong", "text": ["isolate"]}, " operation by turning on ", {"type": "ui", "text": ["Prune unselected"]}, " and targeting the primitives that should ", {"type": "strong", "text": ["not"]}, " be pruned."], "extent": [1360, 1488]}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips and notes"], "extent": [1488, 1509], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["For this node to prune a prim, the prim must pass the ", {"type": "q", "text": ["Target Primitives"]}, " rules, and then (", {"type": "em", "text": ["after"]}, " the matching set is inverted if ", {"type": "ui", "text": ["Prune unselected"]}, " is on) it must match the ", {"type": "ui", "text": ["Prune restrictions"]}, " pattern (if any)."], "extent": [1509, 1731]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Since the ", {"type": "ui", "text": ["Prune restrictions"]}, " pattern is applied ", {"type": "em", "text": ["after"]}, " the matching set is possibly inverted by the ", {"type": "ui", "text": ["Prune unselected"]}, " checkbox, you can use it to easily refine the contents of the inverted set. If ", {"type": "ui", "text": ["Prune unselected"]}, " is off, you may find it easier to simply add another target rule to achieve the same effect."], "extent": [1731, 2053]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can turn on ", {"type": "ui", "text": ["Add exclusions"]}, " to add rules that ", {"type": "em", "text": ["subtract"]}, " primitives from the matching set. This makes it easy to express things such as ", {"type": "q", "text": ["prune everything in this branch except these five specific prims"]}, "."], "extent": [2053, 2268]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2268, 2280], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Prune Unselected"], "extent": [2280, 2299], "body": [{"type": "para", "indent": 4, "text": ["Reverses the meaning of the node, so it hides or deactivates prims that are ", {"type": "strong", "text": ["not"]}, " selected by the rules above."], "extent": [2325, 2442]}], "container": true, "attrs": {"id": "pruneunselected"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Target primitives "], "extent": [2442, 2468], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Target Rules"], "extent": [2468, 2487], "body": [{"type": "para", "indent": 8, "text": ["You can specify multiple rules for what prims to prune. Set the number of include rules, or click the plus and minus buttons to add or remove rules. If ", {"type": "ui", "text": ["Prune unselected"]}, " is enabled, these primitives are the ones that will ", {"type": "strong", "text": ["not"]}, " be pruned."], "extent": [2487, 2738]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Enable"], "extent": [2738, 2750], "body": [{"type": "para", "indent": 8, "text": ["Turn off this parameter to disable a target rule, causing the node to behave as if the associated target rule doesn\u2019t exist."], "extent": [2750, 2884]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"type": "include_group", "body": [{"ext": "collection#targetmethod", "type": "include", "indent": 4, "role": "item", "extent": [2884, 2923]}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Create Missing Explicit Prims as Overs"], "extent": [2923, 2967], "body": [{"type": "para", "indent": 8, "text": ["If a list of explicit prims is provided, when Target Method is set to Primitive Pattern, any prims that do not yet exist will be created as over prims with their active or visible state set accordingly.  This allows you to effectively pre-declare specific prims' visibility or active state."], "extent": [2967, 3267]}, {"type": "para", "indent": 8, "text": [{"type": "strong", "text": ["Note"]}, " that exclusions and restrictions will have no effect on any newly created prims."], "extent": [3267, 3364]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Add Exclusions"], "extent": [3364, 3384], "body": [{"type": "para", "indent": 8, "text": ["Show another multi-parm for creating exclusion rules. Prims that match the exclude rules are subtracted from the list of prims that match the target rules to get the final set of primitives to prune or keep."], "extent": [3384, 3601]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Exclude Rules"], "extent": [3601, 3620], "body": [{"type": "para", "indent": 8, "text": ["You can specify multiple rules for what prims to exclude. Set the number of exclude rules, or click the plus and minus buttons to add or remove rules."], "extent": [3620, 3781]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Pruning Options "], "extent": [3781, 3805], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Method"], "extent": [3805, 3818], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Deactivate"], "extent": [3839, 3859], "body": [{"type": "para", "indent": 15, "text": ["Sets the ", {"type": "q", "text": ["active"]}, " metadata on the selected prims to false."], "extent": [3859, 3934]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Make Invisible"], "extent": [3934, 3958], "body": [{"type": "para", "indent": 15, "text": ["Sets the ", {"type": "q", "text": ["visibility"]}, " of the selected prims to ", {"type": "q", "text": ["hidden"]}, "."], "extent": [3958, 4031]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "method"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Prune"], "extent": [4031, 4042], "body": [{"type": "para", "indent": 8, "text": ["When this value is non-zero, the node prunes the matching primitives. If this is ", {"type": "code", "text": ["0"]}, ", the node instead ", {"type": "strong", "text": ["un-prunes"]}, " the matching primitives, making them explicitly active or visible. This parameter allows you to control the prune/un-prune operation with keyframe animation or an expression (for example, you could prune out the ", {"type": "q", "text": ["unfractured"]}, " version of an asset at the frame where a fracturing simulation starts). In USD terms, this authors an opinion at each time step about the active/visible property of the primitives."], "extent": [4062, 4593]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["This parameter is evaluated separately for each primitive that will be modified by this node. you may use the following local variable in this parameter only"], "extent": [4593, 4761], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 12, "text": [{"type": "code", "text": ["@numprim"]}], "extent": [4761, 4785], "body": [{"type": "para", "indent": 16, "text": ["The total number of primitives being modified by this node. "], "extent": [4785, 4862]}], "container": true}, {"type": "dt", "indent": 12, "text": [{"type": "code", "text": ["@prim"]}], "extent": [4862, 4883], "body": [{"type": "para", "indent": 16, "text": ["Index of the primitive being modified. This value goes from '0' to '@numprim-1'."], "extent": [4883, 4980]}], "container": true}, {"type": "dt", "indent": 12, "text": [{"type": "code", "text": ["@primpath"]}], "extent": [4980, 5005], "body": [{"type": "para", "indent": 16, "text": ["The path of the primitive being modified."], "extent": [5005, 5064]}], "container": true}], "container": true}], "container": true}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [5064, 5078], "body": [{"type": "para", "indent": 12, "text": ["This will not affect the visibility of ancestor primitives, so the selected primitives may still not be visible. Use the ", {"scheme": "Node", "value": "/nodes/lop/configureprims", "type": "link", "text": ["Configure Primitives node"], "fullpath": "/nodes/lop/configureprims.html"}, " to guarantee the visibility of certain primitives."], "extent": [5078, 5315]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "prune"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Prune Restrictions"], "extent": [5315, 5339], "body": [{"type": "para", "indent": 8, "text": ["This node only works on primitives that match this pattern. This lets you add further refinements to the targeting. For example, you can only affect a portion of the scene graph, or only prune primitives with geometry, or only prune Component kinds."], "extent": [5371, 5630]}], "container": true, "attrs": {"id": "prunerestrictions"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Prune Point Instances Individually"], "extent": [5630, 5670], "body": [{"type": "para", "indent": 8, "text": ["When pruning a point instancer prim, prune the instances individually instead of the entire instancer at once. This is currently only supported when pruning by bounding box."], "extent": [5704, 5887]}], "container": true, "attrs": {"id": "prunepointinstances"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Prune Ancestors Automatically"], "extent": [5887, 5922], "body": [{"type": "para", "indent": 8, "text": ["If all children of a primitive are being pruned, that parent primitive is pruned instead of pruning the children individually. This rule is applied recursively. This makes the prune operation much more efficient (at the expense of making it slightly more complicated to re-activate or display one of the pruned children). You should leave this on unless you want to un-prune individual children later."], "extent": [5951, 6362]}], "container": true, "attrs": {"id": "pruneancestors"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Prune Class Primitives"], "extent": [6362, 6390], "body": [{"type": "para", "indent": 8, "text": ["Enable this option to allow the Prune LOP to affect class primitives (also known as abstract primitives). This option is disabled by default because normally when pruning parts of a scene, it is the individual prims inheriting from classes that you want to prune. Class primitives themselves are never rendered, so there is little reason to prune them from the scene. However it is sometimes useful to prune class prims as a way of pruning all inheritors of that class."], "extent": [6420, 6900]}], "container": true, "attrs": {"id": "pruneclassprims"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Collection "], "extent": [6900, 6919], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Create Collection"], "extent": [6919, 6943], "body": [{"type": "para", "indent": 8, "text": ["Creates a USD collection with all the primitives that were modified by this node."], "extent": [6974, 7065]}], "container": true, "attrs": {"id": "createcollection"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Collection Primitive"], "extent": [7065, 7091], "body": [{"type": "para", "indent": 8, "text": ["The primitive on which to create the collection. If the specified primitive does not exist, the node will create it."], "extent": [7124, 7250]}], "container": true, "attrs": {"id": "collectionprimpath"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Collection Name"], "extent": [7250, 7271], "body": [{"type": "para", "indent": 8, "text": ["The name of the collection to create."], "extent": [7300, 7347]}], "container": true, "attrs": {"id": "collectionname"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}], "text": "Parameters"}], "title": ["Prune"], "summary": ["Hides or deactivates primitives and point instances."], "included": ["/nodes/lop/_primpattern", "/nodes/lop/collection"]}