{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "cache", "version": "2.0", "icon": "LOP/cache", "group": "util", "since": "19.5", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Cache"], "extent": [0, 10]}, {"type": "summary", "indent": 0, "text": ["Caches the results of cooking the network at different times, increasing playback speed."], "extent": [112, 208]}, {"type": "para", "indent": 0, "text": ["The output of this node is a single stage holding the union of any time samples authored on each individual cook. This speeds up playback by eliminating cooking and minimizing updates sent to the viewport."], "extent": [208, 415]}, {"type": "para", "indent": 0, "text": ["This node is also useful to enable motion blur in the viewport for transformation data authored in the LOP network."], "extent": [415, 532]}, {"type": "para", "indent": 0, "text": ["A Cache LOP with a time dependent input node can eliminate the time dependency if the entire frame range is cooked."], "extent": [532, 649]}, {"type": "para", "indent": 0, "text": ["If USD primitives are added or removed over time, the output of the Cache LOP is the union of all USD primitives created over the cached frame range. This behavior matches the ", {"scheme": "Node", "value": "/nodes/lop/usd_rop", "type": "link", "text": ["USD ROP"], "fullpath": "/nodes/lop/usd_rop.html"}, ", as both of these nodes combine time samples using USD\u2019s built-in layer stitching functionality."], "extent": [649, 950]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [950, 962], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Cache Behavior"], "extent": [962, 979], "body": [{"type": "para", "indent": 4, "text": ["Specifies when and how frames are combined into the cache."], "extent": [997, 1061]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Always Cache All Frames"], "extent": [1061, 1090], "body": [{"type": "para", "indent": 8, "text": ["As soon as the node is cooked the first time, or whenever the input to the Cache LOP is modified, the node cooks the entire frame range and combines the results into a single stage. "], "extent": [1090, 1282]}, {"type": "para", "indent": 8, "text": ["This can be very expensive in both time and memory. However, if you are caching the entire frame range, this method provides the lowest average per-frame caching time."], "extent": [1282, 1459]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Cache Cooked Frames"], "extent": [1459, 1484], "body": [{"type": "para", "indent": 8, "text": ["Frames of data are cooked and combined into the cache when that particular frame is requested. "], "extent": [1484, 1589]}, {"type": "para", "indent": 8, "text": ["This is more expensive per-frame than cooking multiple frames at once, but it provides the best time to first result."], "extent": [1589, 1716]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Cache Up To Cooked Frames"], "extent": [1716, 1747], "body": [{"type": "para", "indent": 8, "text": ["This is a hybrid of the ", {"type": "ui", "text": ["Always Cache All Frames"]}, " and ", {"type": "ui", "text": ["Cache Cooked Frames"]}, " options. When a particular frame\u2019s data is requested, this LOP cooks and caches all frames from the start of the range up to the requested frame."], "extent": [1747, 1982]}, {"type": "para", "indent": 8, "text": ["This option is useful when the cooked data is coming from a simulation where it might be very expensive to go back and cook earlier frames."], "extent": [1982, 2131]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Cache Current Frame Only"], "extent": [2131, 2161], "body": [{"type": "para", "indent": 8, "text": ["In this mode, only the current frame is in the cache. This reduces memory usage considerably when scrubbing through the timeline. However, it must recook the time samples every time a frame of data is requested from this node."], "extent": [2161, 2405]}, {"type": "para", "indent": 8, "text": ["This mode is typically only used when ", {"type": "ui", "text": ["Subframe Sampling"]}, " is turned on for motion blur."], "extent": [2405, 2504]}, {"type": "para", "indent": 8, "text": ["In this mode, the Cache node is always time dependent, even after playing back an entire simulation."], "extent": [2504, 2614]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "behavior"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start/End/Inc"], "extent": [2614, 2629], "body": [{"type": "para", "indent": 4, "text": ["The first frame, last frame, and increment size (in frames) between each cook request made of the input to populate the cache. The first two values control the range of frames over which the Cache should apply. The third value allows the stage to be super-sampled for improved motion blur, or sub-sampled to preserve memory (at the cost of accuracy, as USD simply uses linear interpolation between time sampled values)."], "extent": [2640, 3065]}], "container": true, "attrs": {"id": "f"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Track Primitive Existence to Set Visibility"], "extent": [3065, 3110], "body": [{"type": "para", "indent": 4, "text": ["LOP networks may generate vastly different scene graphs from one frame to the next. When combining these scene graphs over a frame range into a single animated scene graph, the set of primitives in the combined scene graph is the union of the primitives in each frame\u2019s hierarchy. However, if a mesh appears at frame 50, this generally means that it is desired for this mesh to not be visible prior to frame 50. Turn on this option to cause this node to track a list of all primitives at each frame, and automatically author animated visibility attributes for any primitives that are added to or removed from the scene graph over time. This gives the appearance of primitives being added and removed over time."], "extent": [3110, 3826]}, {"type": "para", "indent": 4, "text": ["Only subclasses of ", {"type": "code", "text": ["UsdGeomImageable"]}, " primitives are tracked this way, since these are the only USD primitive types that respect the visibility attribute."], "extent": [3826, 3986]}, {"type": "para", "indent": 4, "text": ["This option is not available when ", {"type": "ui", "text": ["Cache Behavior"]}, " is set to ", {"type": "ui", "text": ["Cache Cooked Frames"]}, ", as it requires all the frames to be cooked in order for the visibility authoring to behave properly."], "extent": [3986, 4180]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Subframe Sampling "], "extent": [4180, 4206], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Subframe Sampling"], "extent": [56, 79], "body": [{"type": "para", "indent": 8, "text": ["For each primary sample generated by this node, these parameters can cause additional samples to be generated around that primary sample time. This is most often used to ensure that accurate data exists at exactly the camera shutter open and close times, as well as at the primary sample time."], "extent": [79, 382]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Shutter"], "extent": [382, 395], "body": [{"type": "para", "indent": 8, "text": ["Controls the method used to specify the shutter open and close times relative to the primary sample times."], "extent": [395, 511]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Specify Manually"], "extent": [511, 537], "body": [{"type": "para", "indent": 12, "text": ["The ", {"type": "ui", "text": ["Shutter Open/Close"]}, " parameter values provide exact offset values relative to the primary sample time."], "extent": [537, 659]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Use Camera Prim"], "extent": [659, 684], "body": [{"type": "para", "indent": 12, "text": ["The ", {"type": "ui", "text": ["Camera Prim"]}, " parameter provides the scene graph path of a camera primitive from which the shutter open and close times are extracted to provide the offset values relative to the primary time sample."], "extent": [684, 903]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Shutter Open/Close"], "extent": [903, 927], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Shutter"]}, " is set to ", {"type": "ui", "text": ["Specify Manually"]}, ", these two offset values are added to the primary sample time to indicate the shutter open and close times. The open time should be less than or equal to zero, and the close time should be greater than or equal to zero."], "extent": [927, 1204]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Camera Prim"], "extent": [1204, 1221], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Shutter"]}, " is set to ", {"type": "ui", "text": ["Use Camera Prim"]}, ", this is the scene graph path of a camera prim on the input node\u2019s stage. The shutter open and close attribute values are read from this primitive."], "extent": [1221, 1425]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Samples"], "extent": [1425, 1438], "body": [{"type": "para", "indent": 8, "text": ["The number of subframe samples to create for each primary sample. These samples are evenly distributed between the shutter open and close times. Note that such an even distribution may or may not create a sample at exactly the primary sample time."], "extent": [1438, 1695]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Always Include Frame Sample"], "extent": [1695, 1728], "body": [{"type": "para", "indent": 8, "text": ["When turned on, forces a sample to be created at exactly the primary sample time. If the ", {"type": "ui", "text": ["Samples"]}, " value, together with the shutter open and close times, already place a sample at the primary sample time, turning on this option has no effect. Otherwise, this option causes an addition sample to be added. This means that the actual number of samples per primary sample may in fact be one more than the number specified in the ", {"type": "ui", "text": ["Samples"]}, " parameter."], "extent": [1728, 2189]}], "container": true, "role": "item"}], "container": true}], "container": true}], "text": "Parameters"}], "title": ["Cache"], "summary": ["Caches the results of cooking the network at different times, increasing playback speed."], "included": ["/nodes/lop/_sampling"]}