{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "graftstages", "icon": "LOP/graftstages", "group": "util", "since": "18.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Graft Stages"], "extent": [0, 17]}, {"type": "summary", "indent": 0, "text": ["Takes scene graph trees from other inputs and attaches them onto branches of the scene graph tree in the first input."], "extent": [116, 242]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [242, 247], "body": [{"type": "para", "indent": 4, "text": ["You may want to use the ", {"scheme": null, "value": "graftbranches", "type": "link", "text": ["Graft Branches node"], "fullpath": "/nodes/lop/graftbranches.html"}, " instead. It allows you to graft specific prims from a second input rather than entire stages, and to offset time samples."], "extent": [247, 435]}], "container": true}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [435, 450], "body": [{"type": "para", "indent": 0, "text": ["Unlike ", {"scheme": null, "value": "/solaris/usd#sublayers", "type": "link", "text": ["referencing in a file"], "fullpath": "/solaris/usd.html#sublayers", "fragment": "#sublayers"}, " with the ", {"scheme": "Node", "value": "/nodes/lop/reference", "type": "link", "text": ["Reference LOP"], "fullpath": "/nodes/lop/reference.html"}, ", this node is more for performing ", {"type": "q", "text": ["surgery"]}, " on anonymous in-memory layers to build them into a tree you want to write out. It flattens the prims from the other inputs and directly attaches them in-memory to the tree in the first input, rather than creating a composition arc."], "extent": [450, 826]}, {"type": "para", "indent": 0, "text": ["Because USD does not directly allow copying or deleting of stage contents, this node flattens the layers of each other stage (preserving references) into a single layer, and adds the contents of that flattened layer to the active layer of the first input."], "extent": [826, 1084]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Where to attach each sub-tree"], "extent": [1084, 1120], "body": [{"type": "para", "indent": 0, "text": ["By default, all destination paths are added ", {"type": "strong", "text": ["under"]}, " the scene graph path you set in ", {"type": "ui", "text": ["Primitive path"]}, ". The default is the path of the ", {"type": "em", "text": ["last modified prim"]}, " in the first input. You should change this to the parent prim under which you want to attach the trees in the other inputs."], "extent": [1120, 1402]}, {"type": "para", "indent": 0, "text": ["For each wire connected to the multi-input, you can specify a sub-branch under which to attach the root prims from that input. In the input table below the Graft Stages node\u2019s parameters, click the Destination Path column next to the input, type a primitive path, and press ", {"keys": ["Enter"], "type": "keys", "text": null}, "."], "extent": [1402, 1688]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["When you type any custom destination paths for an input"]}, ", the custom paths are ", {"type": "strong", "text": ["appended"]}, " to ", {"type": "ui", "text": ["Primitive path"]}, ". This means custom destination paths are ", {"type": "em", "text": ["always under whatever prim you set"]}, " in ", {"type": "ui", "text": ["Primitive path"]}, ". If you want to be able to specify root prims as the parents, set ", {"type": "ui", "text": ["Primitive path"]}, " to ", {"type": "code", "text": ["/"]}, "."], "extent": [1688, 1995]}, {"type": "para", "indent": 0, "text": ["If you don\u2019t set a destination path for an input, one is computed using the expression in ", {"type": "ui", "text": ["Destination path default"]}, ". The default is a prim with the same name as the node wired in."], "extent": [1995, 2179]}, {"type": "para", "indent": 0, "text": ["Say you have this scene graph tree in the first input."], "extent": [2179, 2235]}, {"lang": null, "type": "pre", "indent": 0, "text": ["\n/Models\n/Effects\n/Render\n"], "extent": [2235, 2268]}, {"type": "para", "indent": 0, "text": ["In another node chain you build a prop, for example using ", {"scheme": "Node", "value": "/nodes/lop/sopcreate", "type": "link", "text": ["SOP Create"], "fullpath": "/nodes/lop/sopcreate.html"}, ", and connect it to the multi-input, with a tree like this:"], "extent": [2268, 2419]}, {"lang": null, "type": "pre", "indent": 0, "text": ["\n/teapot\n    mesh0\n    mesh1\n"], "extent": [2419, 2455]}, {"type": "para", "indent": 0, "text": ["The following table shows how different values in the ", {"type": "ui", "text": ["Primitive path"]}, " and the second input\u2019s Destination Path lead to different graft locations:"], "extent": [2455, 2605]}, {"type": "table", "thead": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["Primitive path "], "role": "th", "extent": [2605, 2623], "container": true}, {"type": "cell", "indent": 4, "text": ["Destination path "], "role": "th", "extent": [2623, 2647], "container": true}, {"type": "cell", "indent": 8, "text": ["Result "], "role": "th", "extent": [2647, 2665]}], "divider": false}], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["/Models"]}, " "], "role": "td", "extent": [2665, 2678], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["/prop1"]}, " "], "role": "td", "extent": [2678, 2693], "container": true}, {"type": "cell", "role": "td", "body": [{"lang": null, "type": "pre", "indent": 8, "text": ["\n        /Models\n            prop1\n                teapot\n                    mesh0\n                    mesh1\n        /Effects\n        /Render\n        "], "extent": [2693, 2859]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["/"]}, " "], "role": "td", "extent": [2859, 2866], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["/prop1"]}, " "], "role": "td", "extent": [2866, 2881], "container": true}, {"type": "cell", "role": "td", "body": [{"lang": null, "type": "pre", "indent": 8, "text": ["\n        /prop1\n            teapot\n                mesh0\n                mesh1\n        /Model\n        /Effects\n        /Render\n        "], "extent": [2881, 3031]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["/"]}, " "], "role": "td", "extent": [3031, 3038], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["/"]}, " "], "role": "td", "extent": [3038, 3048], "container": true}, {"type": "cell", "role": "td", "body": [{"lang": null, "type": "pre", "indent": 8, "text": ["\n        /teapot\n            mesh0\n            mesh1\n        /Model\n        /Effects\n        /Render\n        "], "extent": [3048, 3172]}]}], "divider": false}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips"], "extent": [3172, 3185], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["This node is like ", {"scheme": null, "value": "/solaris/usd#sublayers", "type": "link", "text": ["referencing"], "fullpath": "/solaris/usd.html#sublayers", "fragment": "#sublayers"}, " but for in-memory trees. Similarly, the ", {"scheme": "Node", "value": "/nodes/lop/merge", "type": "link", "text": ["Merge LOP"], "fullpath": "/nodes/lop/merge.html"}, " is like ", {"scheme": null, "value": "/solaris/usd#sublayers", "type": "link", "text": ["sublayering"], "fullpath": "/solaris/usd.html#sublayers", "fragment": "#sublayers"}, " but for in-memory trees. It creates a stage that combines the sublayers of several input stages without altering the scene graph hierarchy."], "extent": [3185, 3496]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If an input chain has a Layer Break node further up the chain, the sublayers generated above the layer break will not be combined into the flattened layer that gets grafted into the active layer. Because this can involve a loss of scene graph information, this node will generate a warning in this case."], "extent": [3496, 3803]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If this node generates a path where intermediate prims do not exist yet, it will create them. The ", {"type": "ui", "text": ["Parent primitive type"]}, " parameter controls the type, and the ", {"type": "ui", "text": ["Primitive Specifier"]}, " parameter controls the specifier of any intermediate prims this node creates."], "extent": [3803, 4070]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [4070, 4082], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Primitive Path"], "extent": [4082, 4099], "body": [{"type": "para", "indent": 4, "text": ["The parent scene graph path of all grafted sub-trees. The ", {"type": "q", "text": ["destination path"]}, " of each subtree is appended to this path. See ", {"type": "q", "text": ["Where to attach each subtree"]}, " above."], "extent": [4118, 4284]}], "container": true, "attrs": {"id": "primpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Primitive Kind"], "extent": [4284, 4300], "body": [{"type": "para", "indent": 4, "text": ["If the parent prim in ", {"type": "ui", "text": ["Primitive path"]}, " does not exist, it will be created, and set to be this kind. If the prim already exists, this parameter does nothing."], "extent": [4319, 4483]}], "container": true, "attrs": {"id": "primkind"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Parent Primitive Type"], "extent": [4483, 4506], "body": [{"type": "para", "indent": 4, "text": ["If this node generates a path where intermediate prims do not exist yet, it will create them. This controls the type of any intermediate prims this node creates."], "extent": [4531, 4698]}], "container": true, "attrs": {"id": "parentprimtype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Primitive Specifier"], "extent": [4698, 4719], "body": [{"type": "para", "indent": 4, "text": ["This controls the specifier(Define/Over/Class) of any intermediate prims this node creates."], "extent": [4743, 4840]}], "container": true, "attrs": {"id": "primspecifier"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Make Destination Primitive Paths Unique"], "extent": [4840, 4881], "body": [{"type": "para", "indent": 4, "text": ["It is possible to set multiple inputs to have the same destination path. If this parameter is off, the trees are merged. If this is on, the node adds increasing numbers on to the end of each destination path until it is unique."], "extent": [4907, 5140]}], "container": true, "attrs": {"id": "makeuniquepaths"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Destination Path Default"], "extent": [5140, 5166], "body": [{"type": "para", "indent": 4, "text": ["You can set the destination path (which is then appended to the ", {"type": "ui", "text": ["Primitive path"]}, ") for each wire into the multi-input by clicking in the table below this node\u2019s parameters. If you don\u2019t give an input a custom destination path, the node evaluates this expression to compute destination path. The default is the name of the node connected into the multi-input."], "extent": [5185, 5550]}, {"type": "para", "indent": 4, "text": ["In the expression you can use the ", {"type": "code", "text": ["@input"]}, " local variable (", {"type": "code", "text": ["$IIDX"]}, " is deprecated) as the index of the current input (numbered from left to right starting at 0)."], "extent": [5550, 5717]}], "container": true, "attrs": {"id": "destpath"}, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}], "title": ["Graft Stages"], "summary": ["Takes scene graph trees from other inputs and attaches them onto branches of the scene graph tree in the first input."]}