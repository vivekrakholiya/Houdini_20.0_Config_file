{"type": "root", "attrs": {"type": "node", "context": "sop", "icon": "SOP/fluidcompress", "internal": "fluidcompress", "since": "14.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Fluid Compress"], "extent": [91, 110]}, {"type": "summary", "indent": 0, "text": ["Compresses the output of fluid simulations to decrease size on disk"], "extent": [110, 186]}, {"type": "para", "indent": 0, "text": ["The Fluid Compress SOP compresses fluid simulations, usually before saving the data to disk.  The compression is generally lossy, in that FLIP particles will be culled below the specified depth, and volume bandwidth is limited by zeroing out values. However, SOPs such as ", {"scheme": "Node", "value": "/nodes/sop/whitewatersource", "type": "link", "text": ["Whitewater Source SOP"], "fullpath": "/nodes/sop/whitewatersource.html"}, " and ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface SOP"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, " are designed to detect compressed fluid input and regenerate any required missing data."], "extent": [186, 660]}, {"type": "para", "indent": 0, "text": ["The typical input of this SOP are:"], "extent": [660, 696]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Particles from a FLIP simulation"], "extent": [696, 731]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["A ", {"type": "code", "text": ["surface"]}, " field representing the SDF field of a liquid simulation"], "extent": [731, 801]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Three fields name ", {"type": "code", "text": ["vel.x"]}, ", ", {"type": "code", "text": ["vel.y"]}, ", and ", {"type": "code", "text": ["vel.z"]}, " representing the velocity vector field of a fluid simulation."], "extent": [801, 914]}], "container": true}, {"type": "para", "indent": 0, "text": ["The primary methods of compression by this operator are:"], "extent": [914, 972]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Particle culling below specified depth."], "extent": [972, 1014]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Partitioning the particles spatially and converting them into packed primitives."], "extent": [1014, 1097]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Volume bandwidth limiting and conversion to sparse VDB format."], "extent": [1097, 1162]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Flagging the VDB\u2019s to save as 16-bit on disk, further reducing disk space."], "extent": [1162, 1240]}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1240, 1246], "body": [{"type": "para", "indent": 4, "text": ["This SOP creates several detail attributes indicating that the fluid has been compressed. Several of these are also stored to the info block when written to file, making them accessible through the ", {"scheme": "Node", "value": "/nodes/sop/file", "type": "link", "text": ["File SOP"], "fullpath": "/nodes/sop/file.html"}, "'s ", {"type": "ui", "text": ["Info Load"]}, " mode or the ", {"type": "code", "text": ["gstat"]}, " command line tool.  These attributes include:"], "extent": [1246, 1556]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["fluidcompress_particleband"]}, " and ", {"type": "code", "text": ["fluidcompress_volumeband"]}, " - the Particle and Volume bandwidth respectively."], "extent": [1556, 1672]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["fluidcompress_particlesuncompressed"]}, " and ", {"type": "code", "text": ["fluidcompress_particlescompressed"]}, " - the number of fluid particles before and after compression."], "extent": [1672, 1818]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "code", "text": ["fluidcompress_volumesize"]}, " and ", {"type": "code", "text": ["fluidcompress_volumet"]}, " - the original size and center of the fluid volumes."], "extent": [1818, 1937]}], "container": true}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["For more information, see the ", {"scheme": null, "value": "/fluid/compress", "type": "link", "text": ["Fluid Compression"], "fullpath": "/fluid/compress.html"}, " help page in the Fluids chapter."], "extent": [1937, 2037]}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [2037, 2045], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Fluid Simulation"], "extent": [2045, 2067], "body": [{"type": "para", "indent": 8, "text": ["Particles and surface and velocity volumes from a fluid simulation."], "extent": [2067, 2144]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2144, 2156], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Particles"], "extent": [2156, 2173], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Particle Separation"], "extent": [2173, 2195], "body": [{"type": "para", "indent": 4, "text": ["The distance between two particles in the fluid simulation. This parameter\n    should generally reference the same parameter on the ", {"scheme": "Node", "value": "/nodes/dop/flipobject", "type": "link", "text": ["FLIP Object SOP"], "fullpath": "/nodes/dop/flipobject.html"}, "\n    of the input simulation."], "extent": [2195, 2399]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cull Bandwidth"], "extent": [2399, 2415], "body": [{"type": "para", "indent": 4, "text": ["If turned on, any particles below this depth in the ", {"type": "code", "text": ["surface"]}, " field will be deleted.  This parameter is specified in units of ", {"type": "ui", "text": ["Particle Separation"]}, "."], "extent": [2415, 2571]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Attributes"], "extent": [2571, 2588], "body": [{"type": "para", "indent": 4, "text": ["If turned on, all particle attributes except those specified here will be deleted."], "extent": [2588, 2676]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compress to 16-bit"], "extent": [2676, 2696], "body": [{"type": "para", "indent": 4, "text": ["If turned on, all particle attributes specified here will have their precision set to 16-bit floats."], "extent": [2696, 2806]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [2806, 2816], "body": [{"type": "para", "indent": 8, "text": ["Integer attributes such as ", {"type": "code", "text": ["id"]}, " should not be added to this list to prevent them from being cast from integers to 16-bit floats."], "extent": [2816, 2954]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Storage Type"], "extent": [2954, 2968], "body": [{"type": "para", "indent": 4, "text": ["The geometry type used to store the fluid particles."], "extent": [2968, 3026]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Points"], "extent": [3026, 3038], "body": [{"type": "para", "indent": 8, "text": ["Point geometry."], "extent": [3038, 3063]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Packed Points"], "extent": [3063, 3082], "body": [{"type": "para", "indent": 8, "text": ["Partitions the particles into packed primitives using the ", {"scheme": "Node", "value": "/nodes/sop/packpoints", "type": "link", "text": ["Pack Points SOP"], "fullpath": "/nodes/sop/packpoints.html"}, " SOP. Packing allows on-demand loading of particles from disk if the resulting files are loaded with ", {"type": "ui", "text": ["Delay Load Geometry"]}, " enabled on a ", {"scheme": "Node", "value": "/nodes/sop/file", "type": "link", "text": ["File SOP"], "fullpath": "/nodes/sop/file.html"}, " or ", {"scheme": "Node", "value": "/nodes/sop/filecache", "type": "link", "text": ["File Cache SOP"], "fullpath": "/nodes/sop/filecache.html"}, " SOP."], "extent": [3082, 3393]}], "container": true}, {"type": "dt", "indent": 4, "text": ["VDB Points"], "extent": [3393, 3409], "body": [{"type": "para", "indent": 8, "text": ["Store the particles into a VDB Points primitive using the ", {"scheme": "Node", "value": "/nodes/sop/convertvdbpoints", "type": "link", "text": ["Convert VDB Points SOP"], "fullpath": "/nodes/sop/convertvdbpoints.html"}, " SOP. This storage type allows data quantization (compression) by storing position relative to the center of the parent voxel."], "extent": [3409, 3653]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Position Compression"], "extent": [2401, 2423], "body": [{"type": "para", "indent": 4, "text": ["The position can be stored relative to the center of the voxel.\n    This means it does not require the full 32 bit float representation,\n    but can be quantized to a smaller fixed point value."], "extent": [2448, 2651]}], "container": true, "attrs": {"id": "poscompression"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Volumes"], "extent": [3696, 3710], "body": [{"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [3710, 3717], "body": [{"type": "para", "indent": 4, "text": ["Input volumes named ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, " will be converted to VDB format."], "extent": [3717, 3795]}], "container": true}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Limit Bandwidth"], "extent": [3795, 3812], "body": [{"type": "para", "indent": 4, "text": ["Limit the bandwidth on input ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, " volumes beyond the specified distance\n    from the fluid surface.  "], "extent": [3812, 3938]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3938, 3948], "body": [{"type": "para", "indent": 8, "text": ["This value should ideally be greater than the ", {"type": "ui", "text": ["Foam Depth"]}, " parameter on any ", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver SOP"], "fullpath": "/nodes/dop/whitewatersolver.html"}, " nodes used with this data as a source."], "extent": [3948, 4124]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vel Resolution Ratio"], "extent": [4124, 4146], "body": [{"type": "para", "indent": 4, "text": ["Scales the resolution of the velocity field ", {"type": "code", "text": ["vel"]}, ". A resolution ratio of 0.5 will reduce the resolution by half on each axis such that the total voxel count will be reduced by a factor of 8."], "extent": [4146, 4342]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Advection Time"], "extent": [4342, 4358], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["vel"]}, " volume is limited by advecting backwards through time and clearing any values\n    that do not result in advection to within the ", {"type": "ui", "text": ["Limit Bandwidth"]}, " of the surface field.  If operating at a different timescale you can adjust the parameter here."], "extent": [4358, 4617]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Advection CFL"], "extent": [4617, 4632], "body": [{"type": "para", "indent": 4, "text": ["The CFL constraint on the advection used for velocity limiting. Lower numbers are more accurate but more expensive."], "extent": [4632, 4753]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Speed"], "extent": [4753, 4764], "body": [{"type": "para", "indent": 4, "text": ["Velocity values below this speed are assumed to be zero and cleared to save memory."], "extent": [4764, 4853]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Write 16-Bit Floats"], "extent": [4853, 4874], "body": [{"type": "para", "indent": 4, "text": ["A flag to specify that when writing to disk that the volumes should be down converted to 16 bit. This does not affect how they are stored in memory."], "extent": [4874, 5028]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Keep Pressure"], "extent": [5028, 5043], "body": [{"type": "para", "indent": 4, "text": ["Keep pressure volume and convert it to VDB."], "extent": [5065, 5114]}], "container": true, "attrs": {"id": "keeppressure"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [5114, 5123], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/flipsolver", "type": "link", "text": ["FLIP Solver"], "fullpath": "/nodes/dop/flipsolver.html"}], "extent": [5123, 5163]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/packpoints", "type": "link", "text": ["Pack Points"], "fullpath": "/nodes/sop/packpoints.html"}], "extent": [5163, 5203]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/whitewatersource", "type": "link", "text": ["Whitewater Source"], "fullpath": "/nodes/sop/whitewatersource.html"}], "extent": [5203, 5255]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver.html"}], "extent": [5255, 5307]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface.html"}], "extent": [5307, 5367]}], "container": true}], "text": "Related"}], "title": ["Fluid Compress"], "summary": ["Compresses the output of fluid simulations to decrease size on disk"], "included": ["/nodes/sop/convertvdbpoints"]}