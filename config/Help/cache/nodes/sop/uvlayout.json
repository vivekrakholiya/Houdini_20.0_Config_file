{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "uvlayout", "icon": "SOP/uvlayout", "tags": "uvs, textures, cleanup", "version": "3.0", "since": "17.0", "verb_since": "17.0", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["UV Layout"], "extent": [0, 14]}, {"type": "summary", "indent": 0, "text": ["Packs UV islands efficiently into a limited area."], "extent": [157, 215]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [215, 230], "body": [{"type": "para", "indent": 0, "text": ["UV Layout tightly packs UV islands into texture tiles. UV Layout can tightly pack any set of 2D profiles (islands) into any other set of 2D profiles (targets), without any restrictions on the number or size of islands or targets or the attributes that describe them. Islands can be assigned to specific targets or left un-assigned so that UV Layout can choose a target for them that allows a tightest packing."], "extent": [230, 642]}, {"type": "para", "indent": 0, "text": ["This node can pack into different categories of ", {"type": "em", "text": ["targets"]}, ": a single UV unit (", {"type": "code", "text": ["0,0"]}, " to ", {"type": "code", "text": ["1,1"]}, "), one or more rectangles with arbitrary size and positions, or ", {"scheme": null, "value": "#udim", "type": "link", "text": ["UDIM tiles"], "fullpath": "/nodes/sop/uvlayout.html#udim", "fragment": "#udim"}, ", "], "extent": [642, 819]}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 0, "role": "item", "extent": [819, 825], "body": [{"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/images/nodes/sop/uvlayout_after.jpg", "type": "img", "text": ""}], "extent": [825, 874]}], "container": true}, {"ext": null, "type": "col", "indent": 0, "role": "item", "extent": [874, 880], "body": [{"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/images/nodes/sop/uvlayout_detail.jpg", "type": "img", "text": ""}], "extent": [880, 932]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": "udim", "container": true, "type": "h", "indent": 0, "text": ["UDIM tiles"], "extent": [932, 956], "body": [{"type": "para", "indent": 0, "text": ["UDIM is a convention for labeling unit squares in the UV texture space grid. It makes it easier to refer to specific squares, and to match up texture files to specific grid squares by putting the UDIM number in the filename."], "extent": [956, 1183]}, {"type": "para", "indent": 0, "text": ["The typical Udim grid has unit square cells, is 10 cells wide, and its lower-left cell has number 1001. (You can customize all of these conventions using parameters on this node if necessary.)"], "extent": [1183, 1377]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/uv/udim.svg", "type": "img", "text": ""}], "extent": [1377, 1407]}]}, {"level": 2, "id": "state", "container": true, "type": "h", "indent": 0, "text": ["Interactive state"], "extent": [1407, 1439], "body": [{"type": "para", "indent": 0, "text": ["With the node selected, you can press ", {"keys": ["Enter"], "type": "keys", "text": null}, " in the viewer to get the node\u2019s ", {"scheme": "Icon", "value": "TOOL/handles", "type": "link", "text": "", "fullpath": "/nodes/sop/TOOL/handles.html"}, " handles state. In the node\u2019s state, you can interactively apply overrides to islands in the viewer."], "extent": [1439, 1641]}, {"type": "para", "indent": 0, "text": ["Select an island in the viewer, and then use the Override menu in the top to choose whether to override the island\u2019s target, scale, or orthogonal offset. Set the override value using the text box/slider next to the menu, then click ", {"type": "ui", "text": ["Apply"]}, "."], "extent": [1641, 1886]}]}, {"level": 2, "id": "general", "container": true, "type": "h", "indent": 0, "text": ["General packing"], "extent": [1886, 1918], "body": [{"type": "para", "indent": 0, "text": ["Technically you can use ", {"type": "em", "text": ["any"]}, " vector3-type point or vertex attribute to describe islands or targets, and choose a projection (XY, YZ, or ZX) to pack onto. (The projection is always ", {"type": "q", "text": ["XY"]}, " for texture attributes, with X and Y corresponding to U and V in UVW space.)"], "extent": [1918, 2183]}, {"type": "para", "indent": 0, "text": ["You can define targets the same way you define islands, but based on the geometry in the second input. In other words, the targets will be profiles of the pieces of the geometry in a 2D projection of a coordinate attribute where the pieces are defined by connectivity and manipulated by separator edges or islands attributes if needed."], "extent": [2183, 2520]}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 0, "role": "item", "extent": [2520, 2526], "body": [{"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/images/uv/uvlayout_3d_packing_top.jpg", "type": "img", "text": ""}], "extent": [2526, 2577]}], "container": true}, {"ext": null, "type": "col", "indent": 0, "role": "item", "extent": [2577, 2583], "body": [{"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/images/uv/uvlayout_3d_packing_persp.jpg", "type": "img", "text": ""}], "extent": [2583, 2638]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2638, 2650], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Islands To Pack"], "extent": [2650, 2673], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["UV Attribute"], "extent": [2673, 2688], "body": [{"type": "para", "indent": 4, "text": ["The name of the attribute to use for the texutre coordinates. Usually this is ", {"type": "code", "text": ["uv"]}, ". If you're layering multiple UVs on the same geometry, you can enter a custom attribute name."], "extent": [2707, 2889]}, {"type": "para", "indent": 4, "text": ["(If you're using this node to do general layout in 3D, you could use ", {"type": "code", "text": ["P"]}, " to project the model\u2019s point positions down onto the packing plane.)"], "extent": [2889, 3036]}], "container": true, "attrs": {"id": "uvattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [3036, 3043], "body": [{"type": "para", "indent": 4, "text": ["If this is blank, the node works on all incoming geometry. You can enter the name of a primitive group, or specify primitives using ", {"scheme": null, "value": "/model/groups#manual", "type": "link", "text": ["group syntax"], "fullpath": "/model/groups.html#manual", "fragment": "#manual"}, " to operate on only a subset of primitives."], "extent": [3059, 3275]}], "container": true, "attrs": {"id": "group"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": "overrides", "container": true, "type": "h", "indent": 0, "text": ["Overrides"], "extent": [3275, 3305], "body": [{"type": "para", "indent": 4, "text": ["You usually don\u2019t need to change these values if you're doing typical UV island packing. However, they can be useful for customizing where things are packed, working around existing data, and general packing."], "extent": [3342, 3556]}, {"type": "para", "indent": 4, "text": ["You can apply target, scale, and offset overrides to islands ", {"scheme": null, "value": "#state", "type": "link", "text": ["interactively"], "fullpath": "/nodes/sop/uvlayout.html#state", "fragment": "#state"}, " in the node\u2019s viewer state."], "extent": [3556, 3674]}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Connectivity"], "extent": [3674, 3701], "body": [{"type": "para", "indent": 4, "text": ["By default this node defines islands by connectivity of UV attribute values across polygon edges. You can override this using these controls."], "extent": [3701, 3849]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Separator edges"], "extent": [3849, 3870], "body": [{"type": "para", "indent": 8, "text": ["If this field is not empty, the node will use cut the model up into islands using these edges instead of UVs."], "extent": [3899, 4018]}, {"type": "para", "indent": 8, "text": ["You can use the ", {"type": "ui", "text": ["Connectivity Tolerance"]}, " parameter (under Packing > Advanced) to make sure small numerical differences in coordinate values do not separate polygons into different islands."], "extent": [4018, 4218]}], "container": true, "attrs": {"id": "separatoredges"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Island attribute"], "extent": [4218, 4240], "body": [{"type": "para", "indent": 8, "text": ["The name of an integer primitive attribute to use to combine islands. Islands containing polygons with the same value for this attribute will be merged. The ", {"type": "q", "text": ["sub-islands"]}, " will be packed in the same relative position from each other."], "extent": [4265, 4507]}, {"type": "para", "indent": 8, "text": ["Negative values are ignored. Conflicting ", {"type": "q", "text": ["merged"]}, " island numbers on different polygons of the same island are resolved by using the island number from the polygon with the smallest index."], "extent": [4507, 4705]}], "container": true, "attrs": {"id": "islandattr"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Target assignment"], "extent": [4705, 4737], "body": [{"type": "para", "indent": 4, "text": ["When there are multiple packing targets, UV Layout decides the target for each island to optimize packing coverage. These parameters let you force an island to be packed inside a designated target."], "extent": [4737, 4941]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Target attribute"], "extent": [4941, 4963], "body": [{"type": "para", "indent": 8, "text": ["The name of an integer primitive attribute that specifies which target space (rectangle index or UDIM number) the node should pack the polygon\u2019s island into."], "extent": [4963, 5130]}, {"type": "para", "indent": 8, "text": ["Negative values are ignored. If polygons of the same island have different values, the node uses the value from polygon with the smallest index."], "extent": [5130, 5284]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Overrides"], "extent": [5284, 5299], "body": [{"type": "para", "indent": 8, "text": ["A string of space-separated ", {"type": "code", "text": [{"type": "var", "text": ["polygon"]}, ":", {"type": "var", "text": ["target"]}]}, " mappings, where ", {"type": "var", "text": ["polygon"]}, " is the primitive number of one of the polygons in the island you want to assign, and ", {"type": "var", "text": ["target"]}, " specifies which target space (rectangle index or UDIM number) the node should pack the island into."], "extent": [5329, 5615]}, {"type": "para", "indent": 8, "text": ["For example, with UDIM packing, an override string of ", {"type": "code", "text": ["35:1009 15:1002"]}, " means ", {"type": "q", "text": ["pack the island containing polygon 35 into UDIM tile 1009, and pack the island containing polygon 15 into UDIM tile 1002"]}, "."], "extent": [5615, 5826]}, {"type": "para", "indent": 8, "text": ["Later mappings override earlier mappings in the string. So, in the example above, if polygons 35 and 15 both belong to the same island, that island will be packed in tile 1003. "], "extent": [5826, 6014]}], "container": true, "attrs": {"id": "targetoverrides"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Variable scaling"], "extent": [6014, 6045], "body": [{"type": "para", "indent": 4, "text": ["These parameters allow you to override the scale of individual islands. "], "extent": [6045, 6124]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Island scale attribute"], "extent": [6124, 6152], "body": [{"type": "para", "indent": 8, "text": ["A floating point primitive attribute that specifies the scale for the polygon\u2019s island."], "extent": [6152, 6249]}, {"type": "para", "indent": 8, "text": ["Negative values are ignored. If polygons of the same island have different values, the node uses the value from polygon with the smallest index."], "extent": [6249, 6403]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Overrides"], "extent": [6403, 6418], "body": [{"type": "para", "indent": 8, "text": ["A string of space-separated tokens ", {"type": "code", "text": [{"type": "var", "text": ["polygon"]}, ":", {"type": "var", "text": ["scale"]}]}, " mappings, where ", {"type": "var", "text": ["polygon"]}, " is the primitive number of one of the polygons in the island you want to scale, and ", {"type": "var", "text": ["scale"]}, " is a floating point value to scale the island\u2019s size by."], "extent": [6447, 6694]}, {"type": "para", "indent": 8, "text": ["For example, ", {"type": "code", "text": ["35:1.5 15:0.5"]}, " means ", {"type": "q", "text": ["make the island containing polygon 35 1.5\u00d7 bigger, and make the island containing polygon 15 half as big"]}, "."], "extent": [6694, 6846]}, {"type": "para", "indent": 8, "text": ["Later mappings override earlier mappings in the string."], "extent": [6846, 6912]}], "container": true, "attrs": {"id": "scaleoverrides"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Projection offset"], "extent": [6912, 6944], "body": [{"type": "para", "indent": 4, "text": ["Since UV Layout packs packs 2D profiles of geometries into 2D target domains, the node usually leaves the third (orthogonal) component of input 3D coordinates unchanged."], "extent": [6944, 7120]}, {"type": "para", "indent": 4, "text": ["In a ", {"type": "q", "text": ["general packing"]}, " workflow where you get the targets from geometry in second input, the node increases the third component by the smallest corresponding value in the target in which the island is packed."], "extent": [7120, 7334]}, {"type": "para", "indent": 4, "text": ["For example if the targets are flat parts of stairs whose heights are determined by the Z component, the Z coordinate of each packed geometry is raised to the height of the stair on which which it is packed."], "extent": [7334, 7547]}, {"type": "para", "indent": 4, "text": ["You can uses these controls to add or subtract an offset value for each island to further raise or lower them in the dimension orthogonal to the packing plane."], "extent": [7547, 7712]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Island Offset Attribute"], "extent": [7712, 7741], "body": [{"type": "para", "indent": 8, "text": ["A floating point primitive attribute that specifies how much to raise or lower the polygon\u2019s island."], "extent": [7741, 7851]}, {"type": "para", "indent": 8, "text": ["If polygons of the same island have different values, the node uses the value from polygon with the smallest index."], "extent": [7851, 7976]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Overrides"], "extent": [7976, 7991], "body": [{"type": "para", "indent": 8, "text": ["A string of space-separated tokens ", {"type": "code", "text": [{"type": "var", "text": ["polygon"]}, ":", {"type": "var", "text": ["offset"]}]}, " mappings, where ", {"type": "var", "text": ["polygon"]}, " is the primitive number of one of the polygons in the island you want to scale, and ", {"type": "var", "text": ["offset"]}, " is a floating point value to offset the island\u2019s ", {"type": "q", "text": ["height"]}, " by."], "extent": [8021, 8276]}], "container": true, "attrs": {"id": "offsetoverrides"}, "role": "item"}], "container": true, "role": "item_group"}]}], "attrs": {"display": "collapsible collapsed"}}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Scale Island to Match Their Surface Areas"], "extent": [8276, 8319], "body": [{"type": "para", "indent": 4, "text": ["Re-scales islands to their relative areas measured using the UV attribute match their 3D surface area measured using ", {"type": "code", "text": ["P"]}, ". This means large 3D surfaces will get large UV islands, and small 3D surfaces will get small islands."], "extent": [8319, 8548]}, {"type": "para", "indent": 4, "text": ["(The overrides above are applied after this rescaling.)"], "extent": [8548, 8609]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Axis Alignment"], "extent": [8609, 8626], "body": [{"type": "para", "indent": 4, "text": ["How/whether to align islands before packing."], "extent": [8626, 8676]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [8676, 8686], "body": [{"type": "para", "indent": 8, "text": ["Use the islands as they come with no pre-rotation."], "extent": [8686, 8746]}], "container": true}, {"type": "dt", "indent": 4, "text": ["By Island Symmetry (default)"], "extent": [8746, 8780], "body": [{"type": "para", "indent": 8, "text": ["Pre-rotate islands based on their shape to turn their ", {"type": "q", "text": ["longest side"]}, " horizontal. This option tries to detect symmetries in the islands and respect them. "], "extent": [8780, 8943]}], "container": true}, {"type": "dt", "indent": 4, "text": ["By Island Position in 3D"], "extent": [8943, 8973], "body": [{"type": "para", "indent": 8, "text": ["Pre-rotate islands so that the resulting horizontal and vertex UV lines on the surface best align with 3D coordinate axes."], "extent": [8973, 9105]}, {"type": "para", "indent": 8, "text": ["For flat islands parallel to one of the coordinate planes, this should rotate the island for the UV axes to match those of the coordinate plane to which the island is parallel. For curved islands, this option considers the ideal alignment for each polygon of the island and picks one that best agrees with all polygons in the island. "], "extent": [9105, 9450]}], "container": true}], "container": true}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Packing"], "extent": [9450, 9464], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Scale"], "extent": [9464, 9472], "body": [{"type": "para", "indent": 4, "text": ["Controls how the node scales the islands for packing."], "extent": [9472, 9531]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Largest packable"], "extent": [9531, 9553], "body": [{"type": "para", "indent": 8, "text": ["Make islands as large as possible while still fitting them into the given targets."], "extent": [9553, 9645]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Fixed"], "extent": [9645, 9656], "body": [{"type": "para", "indent": 8, "text": ["Specific a fixed scaling factor to apply to all islands."], "extent": [9656, 9722]}], "container": true}], "container": true}, {"type": "para", "indent": 4, "text": ["If you choose ", {"type": "q", "text": ["Fixed"]}, ", islands that fail to pack are lined up outside of the bounding box of the packing targets. You can get a primitive group consisting of the polygons of these ", {"type": "q", "text": ["non-packed"]}, " islands in Output Groups and Attributes (see below)."], "extent": [9722, 9973]}, {"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Pack into"]}, " is ", {"type": "q", "text": ["UDIM Tiles"]}, ", if you use a fixed scale, the node will fill as many tiles as can fit the scaled islands."], "extent": [9973, 10104]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Island Rotation Step"], "extent": [10104, 10126], "body": [{"type": "para", "indent": 4, "text": ["The node can try different island rotations to get better packing (some islands may be able to fit into a smaller available space if they are rotated slightly). Setting this parameter is a tradeoff between allowing rotations reducing axis alignment, trying more rotations giving more efficient packing, and trying lots of rotations being slow."], "extent": [10126, 10475]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["No rotation"], "extent": [10475, 10492], "body": [{"type": "para", "indent": 8, "text": ["Packs islands using the rotation they get from the ", {"type": "ui", "text": ["Axis alignment"]}, " parameter."], "extent": [10492, 10582]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Rotation step"], "extent": [10582, 10601], "body": [{"type": "para", "indent": 8, "text": ["Tries rotating the island by this number of degrees around a full circle. For example, 180 tries the island two ways (right-side-up and upside-down). 90 tries the island four ways (right-side-up, rotated left, rotated right, and upside-down), and so on. Each choice halves the degrees and so doubles the number of rotations that must tried."], "extent": [10601, 10951]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Custom"], "extent": [10951, 10963], "body": [{"type": "para", "indent": 8, "text": ["Lets you enter a custom number of divisions of 360 degrees."], "extent": [10963, 11032]}, {"type": "para", "indent": 8, "text": ["Bear in mind that 6 divisions of the circle may result in a packing inferior to 4 (90 degree steps) because only two of the attempted rotations are common and therefore one can not always expect the a tighter packing with 6 rotations compared to 4. "], "extent": [11032, 11291]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Avoid Packing Over Non-Group Island"], "extent": [11291, 11328], "body": [{"type": "para", "indent": 4, "text": ["This controls what to do when you use the ", {"type": "ui", "text": ["Group"]}, " field to apply this node to only a subset of the polygons in the input. When this is on, the node attempts to pack the polygons selected by the ", {"type": "ui", "text": ["Group"]}, " field around the other polygons in the input. When this if off (the default), the node will ignore the other polygons, possibly giving overlaps in UV space."], "extent": [11328, 11696]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pack Island in Cavities of Other Islands"], "extent": [11696, 11738], "body": [{"type": "para", "indent": 4, "text": ["When this is on (the default), the node will attempt to pack islands inside ", {"type": "q", "text": ["holes"]}, " and concave areas in other islands. Turning this off is faster but gives less efficient packing."], "extent": [11738, 11924]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Island Padding"], "extent": [11924, 11940], "body": [{"type": "para", "indent": 4, "text": ["The amount of padding to use to separates islands."], "extent": [11940, 11996]}, {"type": "para", "indent": 4, "text": ["This number is in ", {"type": "q", "text": ["pixels"]}, " of the ", {"type": "ui", "text": ["Search resolution"]}, " (under Advanced), so changing that number will change the padding distance in UV space."], "extent": [11996, 12145]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Apply Padding Between Island Target Boundary"], "extent": [12145, 12191], "body": [{"type": "para", "indent": 4, "text": ["When this is on, padding is added between islands and the edges of the target space. When this is off (the default), islands are packed right up to the edges of the target space."], "extent": [12191, 12375]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spread Island To All Available Space"], "extent": [12375, 12413], "body": [{"type": "para", "indent": 4, "text": ["Attempts to automatically increase padding so islands spread to cover the target area."], "extent": [12413, 12505]}, {"type": "para", "indent": 4, "text": ["(Normally the packing algorithm bunches up islands in tight corners as it progresses in order to leave as much space as possible for packing of subsequent islands. When this is on, once the packing is achieved, the padding is gradually increased to the maximum possible amount that still allows the same packing coverage. The effect of this is usually to spread the islands around in the available space. Note that this does not guarantee a uniform spreading as the fragmentation of the available space by the packing process can restrict free movement of the islands in some cases.)"], "extent": [12505, 13095]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [13095, 13112], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Iterations"], "extent": [13145, 13157], "body": [{"type": "para", "indent": 4, "text": ["The number of attempts at each scale. Each iteration randomizes the order in which it tries packing the islands, since different orderings can give different layouts. You can often achieve more efficient packing by increasing the iterations, at the cost of slower packing."], "extent": [13157, 13435]}, {"type": "para", "indent": 4, "text": ["The time increase for more iterations is ", {"type": "q", "text": ["sub-linear"]}, ", meaning the time to do 100 iterations is less (often much less) than 100\u00d7 the time to do one iteration. However, the improvement given by additional iterations may be marginal. The shape of the islands, particularly long and narrow islands that are hard to pack, can put a hard limit on the packing efficiency."], "extent": [13435, 13806]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Search Resolution"], "extent": [13806, 13825], "body": [{"type": "para", "indent": 4, "text": ["The packing algorithm works by building internal ", {"type": "q", "text": ["images"]}, " of islands on a pixel grid. The algorithm then plays a complicated game of Tetris with the islands, packing them into the target areas. This parameter sets the maximum number of pixels on the longest side of the packing image (across all targets)."], "extent": [13825, 14136]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [14136, 14146], "body": [{"type": "para", "indent": 8, "text": ["If you are using UV Layout to pack UV islands for a specific texture coordinate, do not set the pixel resolution larger than that of your texture image. Otherwise, when the internal ", {"type": "q", "text": ["image"]}, " is scaled down onto your texture, you may get islands which share pixels in your texture image."], "extent": [14146, 14441]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Connectivity Tolerance"], "extent": [14441, 14465], "body": [{"type": "para", "indent": 4, "text": ["Controls how close values in the ", {"type": "ui", "text": ["UV Attribute"]}, " must be to be considered the same value across an edge (and therefore combine the polygons on the two sides of the edge into the same island). If either of U or V value exceeds this limit at either endpoint of the edge, the node treats the edge as a seam. "], "extent": [14465, 14777]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale Search Tolerance"], "extent": [14777, 14801], "body": [{"type": "para", "indent": 4, "text": ["Controls when the node stops searching for a better scale. If the islands can be packed successfully at a given scale, but increasing the scale by less than this amount leads the packing to fail, then the algorithm stops searching for any larger packable scale. "], "extent": [14801, 15069]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Random Seed"], "extent": [15069, 15082], "body": [{"type": "para", "indent": 4, "text": ["When the ", {"type": "ui", "text": ["Iterations"]}, " is greater than 1, the node randomizes the order in which it tries packing the islands. Changing this seed generates different random numbers for the iterations. This can be useful, for example, if you use two different computers to search for a tighter packing, each using a large number of iterations, then you can avoid doing the same search by picking different random seeds for the two machines. "], "extent": [15082, 15514]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"display": "collapsible collapsed"}}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Targets"], "extent": [15514, 15528], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Pack into"], "extent": [15528, 15540], "body": [{"type": "para", "indent": 4, "text": ["Controls how the "], "extent": [15540, 15563]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Rectangles"], "extent": [15563, 15579], "body": [{"type": "para", "indent": 8, "text": ["Lets you specify one or more square or rectangular areas in the UV plane to pack into."], "extent": [15579, 15675]}], "container": true}, {"type": "dt", "indent": 4, "text": ["UDIM Tiles"], "extent": [15675, 15691], "body": [{"type": "para", "indent": 8, "text": ["Lets you specify tiles on the UV plane by their ", {"scheme": null, "value": "#udim", "type": "link", "text": ["UDIM number"], "fullpath": "/nodes/sop/uvlayout.html#udim", "fragment": "#udim"}, "."], "extent": [15691, 15769]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Islands from second input"], "extent": [15769, 15800], "body": [{"type": "para", "indent": 8, "text": ["Packs into areas defined by ", {"type": "q", "text": ["islands"]}, " in the geometry connected to this node\u2019s second input."], "extent": [15800, 15902]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Default Target"], "extent": [15902, 15918], "body": [{"type": "para", "indent": 4, "text": ["If you leave this off, islands will be distributed to targets based on where they fit best. If you turn this on, islands will be packed into this target unless an ", {"scheme": null, "value": "#overrides", "type": "link", "text": ["overridden"], "fullpath": "/nodes/sop/uvlayout.html#overrides", "fragment": "#overrides"}, "."], "extent": [15918, 16111]}, {"type": "para", "indent": 4, "text": ["This is particularly useful when UDIM packing. "], "extent": [16111, 16165]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Target rectangles"], "extent": [16165, 16191], "body": [{"type": "para", "indent": 0, "text": ["This section is visible when ", {"type": "ui", "text": ["Pack into"]}, " is set to ", {"type": "q", "text": ["Rectangles"]}, "."], "extent": [16191, 16260]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Target rectangles"], "extent": [16260, 16279], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Pack into"]}, " is set to ", {"type": "q", "text": ["Rectangles"]}, ", this multiparm lets you add or remove rectangles. You can specify the position and size of the target area on the UV grid. The default is a single UV unit square from 0,0 to 1,1."], "extent": [16295, 16523]}], "container": true, "attrs": {"id": "rects"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tile grid"], "extent": [16523, 16541], "body": [{"type": "para", "indent": 0, "text": ["This section is visible when ", {"type": "ui", "text": ["Pack into"]}, " is set to ", {"type": "q", "text": ["UDIM"]}, "."], "extent": [16541, 16604]}, {"type": "para", "indent": 0, "text": ["You can use ", {"type": "ui", "text": ["Starting UDIM"]}, " if you need to pack around existing data."], "extent": [16604, 16677]}, {"type": "para", "indent": 0, "text": ["You should not change tile size or number of columns unless you have a good reason. Originally these were flexible (the number of columns was the U DIMension from which the convention gets its name) but they are considered standards and many software packages are hard-coded to use 1\u00d71 tiles with 10 columns."], "extent": [16677, 16987]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Tile size"], "extent": [16987, 16998], "body": [{"type": "para", "indent": 4, "text": ["The size of UDIM tiles in UV space. Do not change this value unless you have a good reason (for example, compatibility with old textures)."], "extent": [16998, 17142]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Columns"], "extent": [17142, 17151], "body": [{"type": "para", "indent": 4, "text": ["The number of columns in which to layout the tile grid. This has been standardized at 10 and is often hard-coded in other software packages. Do not change this value unless you have a very good reason."], "extent": [17151, 17358]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Starting UDIM"], "extent": [17358, 17373], "body": [{"type": "para", "indent": 4, "text": ["The first tile to start packing into. You can use this pack around existing data lower-numbered tiles."], "extent": [17373, 17482]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Second input"], "extent": [17482, 17503], "body": [{"type": "para", "indent": 0, "text": ["These parameters are visible when ", {"type": "ui", "text": ["Pack into"]}, " is set to ", {"type": "q", "text": ["Islands from second input"]}, "."], "extent": [17503, 17592]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["UV Attribute"], "extent": [17592, 17606], "body": [{"type": "para", "indent": 4, "text": ["Similar to UV Attribute for island specification. This is a point or vertex attribute on the second input."], "extent": [17631, 17743]}], "container": true, "attrs": {"id": "targetuvattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [17743, 17750], "body": [{"type": "para", "indent": 4, "text": ["If this is blank, the node works on all incoming geometry from the second input. You can enter the name of a primitive group, or specify primitives using ", {"scheme": null, "value": "/model/groups#manual", "type": "link", "text": ["group syntax"], "fullpath": "/model/groups.html#manual", "fragment": "#manual"}, " to operate on only a subset of primitives."], "extent": [17772, 18010]}], "container": true, "attrs": {"id": "targetgroup"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Connectivity Overrides"], "extent": [18010, 18043], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Separator edges"], "extent": [18080, 18101], "body": [{"type": "para", "indent": 8, "text": ["If this field is not empty, the node will use cut the model up into islands using these edges instead of UVs."], "extent": [3899, 4018]}, {"type": "para", "indent": 8, "text": ["You can use the ", {"type": "ui", "text": ["Connectivity Tolerance"]}, " parameter (under Packing > Advanced) to make sure small numerical differences in coordinate values do not separate polygons into different islands."], "extent": [4018, 4218]}], "container": true, "attrs": {"id": "targetseparatoredges"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Island attribute"], "extent": [18174, 18196], "body": [{"type": "para", "indent": 8, "text": ["The name of an integer primitive attribute to use to combine islands. Islands containing polygons with the same value for this attribute will be merged. The ", {"type": "q", "text": ["sub-islands"]}, " will be packed in the same relative position from each other."], "extent": [4265, 4507]}, {"type": "para", "indent": 8, "text": ["Negative values are ignored. Conflicting ", {"type": "q", "text": ["merged"]}, " island numbers on different polygons of the same island are resolved by using the island number from the polygon with the smallest index."], "extent": [4507, 4705]}], "container": true, "attrs": {"id": "targetislandattr"}, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"display": "collapsible collapsed"}}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Island Stacking"], "extent": [18262, 18284], "body": [{"type": "para", "indent": 0, "text": ["The controls in this section can detect islands that look the same and stack them over each other, which often saves texture space."], "extent": [18284, 18418]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [18418, 18424], "body": [{"type": "para", "indent": 4, "text": ["Island stacking only works on connected islands. You cannot stack islands created by the ", {"type": "ui", "text": ["Island Attribute"]}, ". "], "extent": [18424, 18541]}], "container": true}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Stack identical islands"], "extent": [18541, 18566], "body": [{"type": "para", "indent": 4, "text": ["Detect and stack identical islands over each other."], "extent": [18566, 18623]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Match Mirrored Islands"], "extent": [18623, 18647], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Stack identical islands"]}, " is on, also detect islands that would be identical if reflected, mirror one and stanck them over each other."], "extent": [18647, 18794]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Allow Stacking on Non-Group islands"], "extent": [18794, 18831], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Stack identical islands"]}, " is on, also look at islands that are not selected in the ", {"type": "ui", "text": ["Group"]}, " field, and if one matches a selected island, stack the selected island on the non-selected island."], "extent": [18831, 19035]}, {"type": "para", "indent": 4, "text": ["This is useful if you have prototype island shapes already in place and want to put islands with similar shapes over them. "], "extent": [19035, 19164]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shape tolerance"], "extent": [19164, 19181], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Stack identical islands"]}, " is on, how close the shapes need to be for them to be stacked. You can tweak this number until the islands you want to stack start stacking."], "extent": [19181, 19361]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Output Groups and Attributes"], "extent": [19361, 19396], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Nonpacked polygons"], "extent": [19396, 19417], "body": [{"type": "para", "indent": 4, "text": ["Output a group containing the polygons of any islands that failed to pack because ", {"type": "ui", "text": ["Fixed"]}, " scaling made them too big."], "extent": [19417, 19541]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Island number"], "extent": [19541, 19556], "body": [{"type": "para", "indent": 4, "text": ["Add a primitive attribute to each polygon containing the number of the island it was a part of."], "extent": [19556, 19657]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Assigned target"], "extent": [19657, 19674], "body": [{"type": "para", "indent": 4, "text": ["Add a primitive attribute to each polygon containing the number of the target it was packed into."], "extent": [19674, 19778]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [19778, 19787], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/uvautoseam", "type": "link", "text": "", "fullpath": "/nodes/sop/uvautoseam.html"}], "extent": [19787, 19812]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/uvflatten", "type": "link", "text": "", "fullpath": "/nodes/sop/uvflatten.html"}], "extent": [19812, 19835]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/uvproject", "type": "link", "text": "", "fullpath": "/nodes/sop/uvproject.html"}], "extent": [19835, 19858]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/uvpelt", "type": "link", "text": "", "fullpath": "/nodes/sop/uvpelt.html"}], "extent": [19858, 19878]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/uvunwrap", "type": "link", "text": "", "fullpath": "/nodes/sop/uvunwrap.html"}], "extent": [19878, 19901]}], "container": true}], "text": "Related"}], "title": ["UV Layout"], "summary": ["Packs UV islands efficiently into a limited area."]}