{"type": "root", "attrs": {"icon": "DOP/squishyobject", "context": "sop", "type": "node", "internal": "smooth_points_ql", "version": "3", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Smooth Points qL"], "extent": [52, 73]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 3"]}], "extent": [73, 97]}, {"type": "summary", "indent": 0, "text": ["A two-pass smoothing (", {"type": "q", "text": ["relax"]}, ") of polygon mesh points."], "extent": [97, 159]}, {"type": "para", "indent": 0, "text": ["This operator provides relaxation of geometry points,\nusing a combination of multiple methods (or passes)."], "extent": [159, 267]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/nodes/sop/qLib--smooth_points_ql-3/smooth_points_ql_sop_main.png", "type": "img", "text": ""}], "extent": [267, 313]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "em", "text": ["Geometry smoothing \u2013 left: original, center: proximity-based, right: topology-based smoothing."]}], "extent": [313, 414]}], "container": true}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/nodes/sop/qLib--smooth_points_ql-3/smooth_points_ql_sop_guide.png", "type": "img", "text": ""}], "extent": [414, 461]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "em", "text": ["Heavily smoothed animated geometry, with guide geometry indicating the original shape (in blue)."]}], "extent": [461, 563]}], "container": true}, {"level": 1, "id": "methods", "container": true, "type": "methods_section", "indent": 0, "role": "section", "extent": [563, 572], "body": [{"type": "para", "indent": 0, "text": ["The following methods (passes) are available:"], "extent": [572, 620]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "strong", "text": ["Point proximity-based"]}], "extent": [620, 647], "body": [{"type": "para", "indent": 4, "text": [{"type": "em", "text": ["pros: fast / cons: inaccurate"]}], "extent": [647, 684]}, {"type": "para", "indent": 4, "text": ["Point positions are relaxed by averaging with spatially-close neighbours\n    (without any consideration for topology).\n    It is a point cloud-based approach, with the usual parameters."], "extent": [684, 875]}, {"type": "para", "indent": 4, "text": ["This pass doesn\u2019t require any geometry but points\n    (so it works for particles, point clouds, etc.)"], "extent": [875, 982]}, {"type": "para", "indent": 4, "text": ["It is very fast, although a bit inaccurate, and better suited for static geometry\n    (as opposed to one with animated deformations).\n    Applying an additional topology-based pass is recommended."], "extent": [982, 1185]}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "strong", "text": ["Topology-based (Laplacian)"]}], "extent": [1185, 1217], "body": [{"type": "para", "indent": 4, "text": [{"type": "em", "text": ["pros: accurate / cons: slow"]}], "extent": [1217, 1252]}, {"type": "para", "indent": 4, "text": ["This method smooths points by\n    ", {"scheme": null, "value": "http://en.wikipedia.org/wiki/Laplacian_smoothing", "type": "link", "text": ["averaging the positions of topological neighbours"], "exists": true}, ".\n    It requires an actual geometry topology (for point connectivity).\n    It also needs to be run for multiple ", {"type": "em", "text": ["iterations"]}, "\n    (with run time increasing linearly)."], "extent": [1252, 1558]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 4, "role": "item", "extent": [1558, 1567], "body": [{"type": "para", "indent": 8, "text": ["Take advantage of the strengths of both algorithms and avoid their weaknesses \u2013\n        try using a carefully-tuned 1st pass, so the 2nd pass could be run with fewer iterations."], "extent": [1567, 1757]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "text": "Methods"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1757, 1769], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Group"], "extent": [1769, 1780], "body": [{"type": "para", "indent": 8, "text": ["The group of components to be smoothed."], "extent": [1780, 1828]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Group Type"], "extent": [1828, 1844], "body": [{"type": "para", "indent": 8, "text": ["Type of the geometry component group."], "extent": [1844, 1891]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Envelope, Weight Name"], "extent": [1891, 1918], "body": [{"type": "para", "indent": 8, "text": ["Standard deformer envelope and weighting-related parameters."], "extent": [1918, 1996]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Pin Edges"], "extent": [1996, 2011], "body": [{"type": "para", "indent": 8, "text": ["If enabled, it pins unshared geometry edges, so they retain their original\n        positions while smoothing."], "extent": [2011, 2138]}, {"type": "para", "indent": 8, "text": ["This pins geometry border points of and curve end points."], "extent": [2138, 2213]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [2213, 2227], "body": [{"type": "para", "indent": 12, "text": ["For topology-based smoothing, weighting is treated like ", {"type": "q", "text": ["anchor points"]}, ",\n            rather than blending the before- and after-smoothed state of the geometry."], "extent": [2227, 2400]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Proximity Based"], "extent": [2400, 2421], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Proximity %"], "extent": [2421, 2442], "body": [{"type": "para", "indent": 12, "text": ["A blending ratio between the original and the proximity-smoothed geometry."], "extent": [2442, 2534]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Max Distance"], "extent": [2534, 2556], "body": [{"type": "para", "indent": 12, "text": ["The maximum distance when looking for nearby points."], "extent": [2556, 2622]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Max Points"], "extent": [2622, 2642], "body": [{"type": "para", "indent": 12, "text": ["The maximum number of points to be considered."], "extent": [2642, 2702]}, {"type": "para", "indent": 12, "text": ["If this number is reached, no further points will be looked for, regardless\n            of ", {"type": "em", "text": ["Max Distance"]}, " \u2013 so if adjusting ", {"type": "em", "text": ["Max Distance"]}, " seems to have no effect,\n            try increasing this value."], "extent": [2702, 2919]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Falloff Exponent"], "extent": [2919, 2945], "body": [{"type": "para", "indent": 12, "text": ["Nearby found points are weighted according to their distance to the current point.\n            This value controls weight falloff."], "extent": [2945, 3089]}, {"type": "para", "indent": 12, "text": ["A value of ", {"type": "code", "text": ["1"]}, " means linear falloff; larger values result in weights dropping\n            faster with distance; smaller ones go towards more equal weights over distance."], "extent": [3089, 3272]}, {"type": "para", "indent": 12, "text": ["A value of ", {"type": "code", "text": ["0"]}, " disables falloff weighting altogether (each point will be weighted\n            equally)."], "extent": [3272, 3390]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Topology Based"], "extent": [3390, 3410], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Topology %"], "extent": [3410, 3430], "body": [{"type": "para", "indent": 12, "text": ["A blending ratio between the pre- and the post-smoothed geometry."], "extent": [3430, 3509]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Iterations"], "extent": [3509, 3529], "body": [{"type": "para", "indent": 12, "text": ["The number of times the smoothing to be applied."], "extent": [3529, 3591]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Method"], "extent": [3591, 3607], "body": [{"type": "para", "indent": 12, "text": ["The Laplacian smoothing variant to use."], "extent": [3607, 3660]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 12, "text": ["Extended Laplacian"], "extent": [3660, 3692], "body": [{"type": "para", "indent": 16, "text": ["An extended version of the original Laplacian algorithm."], "extent": [3692, 3766]}, {"type": "para", "indent": 16, "text": ["After each iteration, the original geometry coordinates are blended\n                back with a given percentage (", {"type": "em", "text": ["Alpha"]}, ").\n                This results in better convergence for higher iteration counts."], "extent": [3766, 3987]}], "container": true}, {"type": "dt", "indent": 12, "text": ["Humphrey\u2019s Method"], "extent": [3987, 4018], "body": [{"type": "para", "indent": 16, "text": ["A variant with more complex internal calculations for\n                better convergence."], "extent": [4018, 4125]}, {"type": "note_group", "body": [{"type": "note", "indent": 16, "role": "item", "extent": [4125, 4147], "body": [{"type": "para", "indent": 20, "text": ["This mode is not yet implemented."], "extent": [4147, 4202]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 12, "text": ["Alpha"], "extent": [4202, 4221], "body": [{"type": "para", "indent": 16, "text": ["The blend-back percentage value for the Extended Laplacian method."], "extent": [4221, 4305]}, {"type": "para", "indent": 16, "text": ["Zero (", {"type": "code", "text": ["0.0"]}, ") will provide the worst convergence, while one (", {"type": "code", "text": ["1.0"]}, ")\n                will result in no smoothing at all."], "extent": [4305, 4441]}], "container": true}, {"type": "dt", "indent": 12, "text": ["Beta"], "extent": [4441, 4459], "body": [{"type": "para", "indent": 16, "text": ["The ", {"type": "q", "text": ["beta"]}, " variable for the HC method (to be implemented later)."], "extent": [4459, 4542]}], "container": true}], "container": true}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["(misc)"], "extent": [4542, 4554], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Save Rest Position"], "extent": [4554, 4582], "body": [{"type": "para", "indent": 12, "text": ["Save original point coordinates in the ", {"type": "code", "text": ["rest"]}, " attribute."], "extent": [4582, 4652]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 12, "role": "item", "extent": [4652, 4669], "body": [{"type": "para", "indent": 16, "text": ["This is a convenience toggle, allowing to use ", {"type": "code", "text": ["rest"]}, " positions\n                in a connected\n                ", {"scheme": "Node", "value": "/nodes/sop/qLib::displacebydelta_ql::1", "type": "link", "text": ["Displace by Delta qL SOP"], "exists": true}, "."], "extent": [4669, 4861]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 8, "text": ["Show Guide"], "extent": [4861, 4881], "body": [{"type": "para", "indent": 12, "text": ["Displays the guide geometry in the viewport."], "extent": [4881, 4941]}], "container": true}], "container": true}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4941, 4950], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/smooth", "type": "link", "text": "", "fullpath": "/nodes/sop/smooth.html"}], "extent": [4950, 4974]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/attribtransfer", "type": "link", "text": "", "fullpath": "/nodes/sop/attribtransfer.html"}], "extent": [4974, 5007]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::displacebydelta_ql::1", "type": "link", "text": ["Displace by Delta qL SOP"], "exists": true}], "extent": [5007, 5077]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::smooth_points_ql::1", "type": "link", "text": ["Smooth Points qL SOP"], "exists": true}], "extent": [5077, 5142]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::bend_ql::2", "type": "link", "text": ["Bend Deformer qL SOP"], "exists": true}], "extent": [5142, 5197]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::bias_deformer_ql::1", "type": "link", "text": ["Bias Deformer qL SOP"], "exists": true}], "extent": [5197, 5261]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::deform_pcloud_ql::1", "type": "link", "text": ["Deform by Point Cloud qL SOP"], "exists": true}], "extent": [5261, 5333]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::deformbysurface_ql::1", "type": "link", "text": ["Deform by Surface qL SOP"], "exists": true}], "extent": [5333, 5403]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::mountain_deformer_ql::1", "type": "link", "text": ["Mountain Deformer qL SOP"], "exists": true}], "extent": [5403, 5475]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::noise_ql::1", "type": "link", "text": ["Noise qL SOP"], "exists": true}], "extent": [5475, 5523]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::pointjitter_ql::1", "type": "link", "text": ["PointJitter qL SOP"], "exists": true}], "extent": [5523, 5583]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::taper_ql::1", "type": "link", "text": ["Taper Deformer qL SOP"], "exists": true}], "extent": [5583, 5640]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::twist_ql::2", "type": "link", "text": ["Twist Deformer qL SOP"], "exists": true}], "extent": [5640, 5700]}], "container": true}], "text": "Related"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [5700, 5712], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Implement HC method (Humphrey\u2019s)"], "extent": [5712, 5751]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Should work on other attributes than ", {"type": "code", "text": ["P"]}], "extent": [5751, 5798]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Add ", {"type": "code", "text": ["N"]}, " (normal) support to point cloud mode?"], "extent": [5798, 5853]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [5853, 5877], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 3"]}, " \u2014"], "extent": [5877, 5905]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2024-02-17"], "extent": [5905, 5917], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Percentage ranges now go -1..1 (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1384", "type": "link", "text": ["#1384"], "exists": true}, ")"], "extent": [5917, 6006]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-11-14"], "extent": [6006, 6018], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["OCD alert: removed color from output knob (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1168", "type": "link", "text": ["#1168"], "exists": true}, ")"], "extent": [6018, 6118]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2019-01-12"], "extent": [6118, 6130], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated internal Point Wrangles to Attrib Wrangles"], "extent": [6130, 6187]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Group parameter now supports other geometry components (i.e. prims)"], "extent": [6187, 6263]}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 2"]}, " \u2014"], "extent": [6263, 6290]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2017-05-06"], "extent": [6290, 6302], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Doesn\u2019t leak internal __edges group any more (#566)"], "extent": [6302, 6360]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Pin Edges now only pins curve endpoints, not the whole curve (#566)"], "extent": [6360, 6435]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2016-08-26"], "extent": [6435, 6447], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Changed behaviour of the weight attribute for topology-based\n      smoothing: it\u2019s more like an ", {"type": "q", "text": ["anchor point"]}, " behaviour now,\n      rather than the usual deformer-weighting (which just blends\n      between the pre- and post-deformed geometry)"], "extent": [6447, 6696]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added Pin Edges functionality"], "extent": [6696, 6734]}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [6734, 6761]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2014-09-04"], "extent": [6761, 6773], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Enhanced the Laplacian smoothing algorithm, so it\u2019ll converge better."], "extent": [6773, 6849], "body": [{"type": "bullet_group", "body": [{"blevel": 8, "type": "bullet", "indent": 6, "text": ["The basic algorithm is now ", {"type": "q", "text": ["Extended Laplacian"]}, "\n        (use an ", {"type": "em", "text": ["Alpha"]}, " value of ", {"type": "code", "text": ["0"]}, " to get the original ", {"type": "q", "text": ["naive"]}, " Laplacian results)."], "extent": [6849, 6990]}, {"blevel": 8, "type": "bullet", "indent": 6, "text": ["Another one called ", {"type": "q", "text": ["Humphrey\u2019s Classes (HC)"]}, " will also be implemented later"], "extent": [6990, 7075]}], "container": true}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-08-29"], "extent": [7075, 7087], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["The default method is now the topology-based one"], "extent": [7087, 7143]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-08-17"], "extent": [7143, 7155], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added help tip on rest attribute and Displace by Delta qL SOP."], "extent": [7155, 7225]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-08-14"], "extent": [7225, 7237], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added deformer weighting/envelope parameters"], "extent": [7237, 7288]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Guide geometry"], "extent": [7288, 7310]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-08-13"], "extent": [7310, 7322], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["First version. The green squshy-teddy is back! ;)"], "extent": [7322, 7379]}], "container": true}], "container": true}], "container": true}]}], "title": ["Smooth Points qL"], "summary": ["A two-pass smoothing (", {"type": "q", "text": ["relax"]}, ") of polygon mesh points."]}