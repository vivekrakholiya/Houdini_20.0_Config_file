{"type": "root", "attrs": {"type": "node", "context": "sop", "icon": "SOP/shallowwatersolver", "internal": "shallowwatersolver", "since": "19.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Shallow Water Solver"], "extent": [117, 142]}, {"type": "summary", "indent": 0, "text": [" Runs shallow water simulations on height fields. "], "extent": [142, 201]}, {"type": "para", "indent": 0, "text": ["The Shallow Water Solver SOP can simulate bulk behavior of water on height\nfields. It can be used both for large-scale scenarios, like flooding a valley in\nterrain, or to simulate small-scale effects, such as a stream flowing into a\nstorm drain. Water is represented by its depth at each point; as such, the\nShallow Water Solver is not able to capture spray or splashes."], "extent": [201, 573]}, {"type": "para", "indent": 0, "text": ["This operator uses an explicit method to integrate the dynamics on the OpenCL\ndevice. Although this is fast, it can suffer from stability problems when\nworking at higher resolutions. There are several safety features that can be\nenabled on the solver to mitigate such stability issues."], "extent": [573, 860]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "ui", "text": ["Max Wave Speed"]}, " should first be clamped to values that make sense for the\nscenario being simulated (taking the scene scale into consideration)."], "extent": [860, 1009]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Small amounts of ", {"type": "ui", "text": ["Velocity Diffusion"]}, " can help to stabilize the simulation.\nThis parameter controls the fluid\u2019s viscosity, so setting it too high can also\nhave the effect of ", {"type": "q", "text": ["thickening"]}, " the liquid."], "extent": [1009, 1212]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "ui", "text": ["Max Surface Speed"]}, " is purely a safety limit on how fast the water depth may\nchange. You can use it to prevent the simulation from visibly blowing up.\nHowever, it can also result in unphysical behavior (such as water not being\nconserved), and should thus be used with caution."], "extent": [1212, 1493]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Instability is caused primarily by taking time steps that are too large.\nConsequently, the best way to combat it is to reduce size of the time steps.\nYou can do this by increasing the number of ", {"type": "ui", "text": ["Substeps"]}, "\u2013though note that this\nhas an associated runtime cost."], "extent": [1493, 1758]}], "container": true}, {"type": "para", "indent": 0, "text": ["The Shallow Water Solver is fairly faithful across different resolutions. Thus,\nit\u2019s recommended to start at a lower resolution (corresponding to larger\n", {"type": "ui", "text": ["Voxel Size Scale"]}, " values), which will also let you get away with fewer\n", {"type": "ui", "text": ["Substeps"]}, ". Once the desired motion is achieved with these lower quality\nsettings, you can ramp down the ", {"type": "ui", "text": ["Voxel Size Scale"]}, " and run a full resolution\nsimulation. You will also have to increase ", {"type": "ui", "text": ["Substeps"]}, " to ensure that the\nsimulation remains stable. As a rough rule of thumb, if you decrease\n", {"type": "ui", "text": ["Voxel Size Scale"]}, " by a factor of ", {"type": "code", "text": ["X"]}, ", then you should multiply ", {"type": "ui", "text": ["Substeps"]}, "\nby ", {"type": "code", "text": ["X"]}, " to retain stability."], "extent": [1758, 2391]}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [2391, 2399], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Height Fields"], "extent": [2399, 2415], "body": [{"type": "para", "indent": 4, "text": ["Height field layers used for simulation. The purpose of the incoming layers\n    can be set in the ", {"type": "ui", "text": ["Bindings"]}, " tab."], "extent": [2415, 2536]}, {"type": "para", "indent": 4, "text": ["The exception is the hard-coded ", {"type": "code", "text": ["vel"]}, " vector volume. If it exists, it will\n    be treated as the starting velocities for the simulation. Additionally, if\n    forces are set to be applied (that is, ", {"type": "ui", "text": ["Forces Frequency"]}, " is enabled), the\n    ", {"type": "code", "text": ["vel"]}, " vector field acts like the goal velocity field. Specifically,\n    simulation velocities will be driven towards these goal values inside the\n    ", {"type": "ui", "text": ["Force Mask Layer"]}, "."], "extent": [2536, 2952]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [2952, 2961], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Height Fields with Simulated Water"], "extent": [2961, 2998], "body": [{"type": "para", "indent": 4, "text": ["Input height fields, along with simulation results for the ", {"type": "ui", "text": ["Water Layer"]}, "."], "extent": [2998, 3079]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [3079, 3091], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reset Simulation"], "extent": [3091, 3110], "body": [{"type": "para", "indent": 4, "text": ["Clears the entire simulation cache."], "extent": [3130, 3171]}], "container": true, "attrs": {"id": "resimulate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start Frame"], "extent": [3171, 3184], "body": [{"type": "para", "indent": 4, "text": ["The simulation will begin at this frame on the Houdini playbar."], "extent": [3204, 3273]}], "container": true, "attrs": {"id": "startframe"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Setup"], "extent": [3273, 3285], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Input Water Height Is Absolute"], "extent": [3285, 3318], "body": [{"type": "para", "indent": 4, "text": ["When this toggle is enabled, incoming values in the ", {"type": "ui", "text": ["Water Layer"]}, " are\n    assumed to contain location of the water surface; in this case, height of\n    the water column at each voxel is the difference between ", {"type": "ui", "text": ["Water Layer"]}, " and\n    ", {"type": "ui", "text": ["Seabed Layer"]}, ". If this is disabled, then ", {"type": "ui", "text": ["Water Layer"]}, " should contain\n    height of the water column at each voxel."], "extent": [3341, 3702]}], "container": true, "attrs": {"id": "inputwaterabs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Input Terrain Includes Water Height"], "extent": [3702, 3739], "body": [{"type": "para", "indent": 4, "text": ["When enabled, ", {"type": "ui", "text": ["Seabed Layer"]}, " is assumed to also incorporate the water; in\n    this case, height values for the bottom collider are the difference between\n    ", {"type": "ui", "text": ["Seabed Layer"]}, " and ", {"type": "ui", "text": ["Water Layer"]}, ". If this is disabled, ", {"type": "ui", "text": ["Seabed Layer"]}, "\n    should be the pure bottom collider."], "extent": [3769, 4050]}], "container": true, "attrs": {"id": "inputheightwithwater"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Up Axis"], "extent": [4050, 4059], "body": [{"type": "para", "indent": 4, "text": ["Normal axis for the height fields. This applies to inputs and outputs."], "extent": [4075, 4151]}], "container": true, "attrs": {"id": "normal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Gravity"], "extent": [4151, 4160], "body": [{"type": "para", "indent": 4, "text": ["Acceleration due to gravity. Larger values of ", {"type": "ui", "text": ["Gravity"]}, " will more quickly\n    flatten the water surface and also result in faster wave speeds."], "extent": [2333, 2483]}], "container": true, "attrs": {"id": "gravity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Diffusion"], "extent": [4249, 4269], "body": [{"type": "para", "indent": 4, "text": ["Controls the amount of blurring done to the velocity field. Larger values\n    will make the liquid more viscous. Small amounts of diffusion can also help\n    to stabilize a simulation."], "extent": [4291, 4481]}], "container": true, "attrs": {"id": "veldiffusion"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Scale"], "extent": [4481, 4493], "body": [{"type": "para", "indent": 4, "text": ["A scaling factor for time inside the solver. ", {"type": "code", "text": ["1"]}, " is normal speed, greater\n    than ", {"type": "code", "text": ["1"]}, " speeds up the simulation, while less than ", {"type": "code", "text": ["1"]}, " slows it down."], "extent": [4512, 4665]}], "container": true, "attrs": {"id": "timescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Boundaries"], "extent": [4665, 4677], "body": [{"type": "para", "indent": 4, "text": ["Controls behavior of waves that hit the domain boundaries. When set to\n    ", {"type": "ui", "text": ["Reflective"]}, ", waves will bounce off of boundaries and move back in the\n    direction they came from. ", {"type": "ui", "text": ["Periodic"]}, " results in waves wrapping around the\n    domain and continuing their motion on the other side."], "extent": [4699, 4990]}], "container": true, "attrs": {"id": "boundarytype"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "type": "sep", "indent": 0, "text": [" Damping Layer "], "extent": [4990, 5010]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Damping Layer"], "extent": [5010, 5033], "body": [{"type": "para", "indent": 4, "text": ["Waves normally reflect when they hit the boundaries or continue moving on\n    the other side (as set by the ", {"type": "ui", "text": ["Boundaries"]}, " parameter). A damping layer can\n    be used to slow down waves as they approach the boundary, making it appear\n    as if waves are freely exiting the domain. Turning on this parameter allows\n    you to selectively add such damping layers on the four sides of the \n    simulation region. "], "extent": [5054, 5470]}], "container": true, "attrs": {"id": "damp_enable"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damp Water Depths"], "extent": [5470, 5489], "body": [{"type": "para", "indent": 4, "text": ["When this toggle is enabled, water depths are also decayed within the\n    damping layers. This prevents accumulation of water in the damping layer and\n    can be used to let water to seamlessly flow out. ", {"type": "ui", "text": ["Damp Water Depths"]}, "\n    should be turned off if water is meant to remain in the domain (for example,\n    when working on a sea patch); otherwise, water will be siphoned off on the\n    damped sides."], "extent": [5509, 5918]}], "container": true, "attrs": {"id": "damp_water"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["-X Axis"], "extent": [5918, 5927], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the negative ", {"type": "code", "text": ["X"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["X"]}, "."], "extent": [5944, 6062]}], "container": true, "attrs": {"id": "damp_xm"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["+X Axis"], "extent": [6062, 6071], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the positive ", {"type": "code", "text": ["X"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["X"]}, "."], "extent": [6088, 6206]}], "container": true, "attrs": {"id": "damp_xp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["-Y Axis"], "extent": [6206, 6215], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the negative ", {"type": "code", "text": ["Y"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["Y"]}, "."], "extent": [6232, 6350]}], "container": true, "attrs": {"id": "damp_ym"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["+Y Axis"], "extent": [6350, 6359], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the positive ", {"type": "code", "text": ["Y"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["Y"]}, "."], "extent": [6376, 6494]}], "container": true, "attrs": {"id": "damp_yp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["-Z Axis"], "extent": [6494, 6503], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the negative ", {"type": "code", "text": ["Z"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["Z"]}, "."], "extent": [6520, 6638]}], "container": true, "attrs": {"id": "damp_zm"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["+Z Axis"], "extent": [6638, 6647], "body": [{"type": "para", "indent": 4, "text": ["Toggles the damping layer on the positive ", {"type": "code", "text": ["Z"]}, " side. This parameter is not\n    available if ", {"type": "ui", "text": ["Up Axis"]}, " is ", {"type": "ui", "text": ["Z"]}, "."], "extent": [6664, 6782]}], "container": true, "attrs": {"id": "damp_zp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Layer Size"], "extent": [6782, 6794], "body": [{"type": "para", "indent": 4, "text": ["Size of damping layers. Damping layer must be large enough to allow for\n    gradual slowing of the waves. If the damping layer is not sufficiently\n    large, waves may still reach the boundary and reflect back into the domain."], "extent": [5223, 5455]}], "container": true, "attrs": {"id": "damp_size"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Strength"], "extent": [6890, 6908], "body": [{"type": "para", "indent": 4, "text": ["Controls how fast velocities decay inside the damping layers.\n    ", {"type": "ui", "text": ["Damping Strength"]}, " must be high enough to properly slow down waves that\n    enter the damping layer; but setting this value too high will stop the\n    waves too abruptly, causing them to reflect within the layer."], "extent": [5498, 5784]}], "container": true, "attrs": {"id": "damp_strength"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "type": "sep", "indent": 0, "text": [" Constraint Updates "], "extent": [7011, 7036]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Additive Sourcing"], "extent": [7036, 7056], "body": [{"type": "para", "indent": 4, "text": ["When enabled, scaled values in the ", {"type": "ui", "text": ["Source Layer"]}, " will be added to the\n    ", {"type": "ui", "text": ["Water Layer"]}, " during the simulation. If this toggle is disabled,\n    ", {"type": "ui", "text": ["Source Layer"]}, " instead acts like a minimum water level (that is,\n    ", {"type": "ui", "text": ["Water Layer"]}, " is not allowed to fall below the prescribed source)."], "extent": [7075, 7368]}], "container": true, "attrs": {"id": "sourceadd"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Scale"], "extent": [7368, 7382], "body": [{"type": "para", "indent": 4, "text": ["A multiplier applied to values in the ", {"type": "ui", "text": ["Source Layer"]}, " before using them to\n    inject new water into the simulation."], "extent": [7403, 7526]}], "container": true, "attrs": {"id": "sourcescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Frequency"], "extent": [7526, 7544], "body": [{"type": "para", "indent": 4, "text": ["Specifies how frequently to update sources used in the simulation from the\n    ", {"type": "ui", "text": ["Source Layer"]}, ". ", {"type": "ui", "text": ["Initialize Only"]}, " copies the field at the start of the\n    simulation and uses it throughout; this is the fastest option and should be\n    used with a static source (or if animation can be delegated to\n    ", {"type": "ui", "text": ["Source Scale"]}, "). ", {"type": "ui", "text": ["Once per Frame"]}, " refreshes the simulation source on the\n    first substep of each frame; this should be used with changing sources\n    whenever possible. ", {"type": "ui", "text": ["Every Substep"]}, " is the slowest option, and should be\n    avoided, except for special cases with very rapidly changing sources."], "extent": [7567, 8181]}], "container": true, "attrs": {"id": "update_source"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sink Frequency"], "extent": [8181, 8197], "body": [{"type": "para", "indent": 4, "text": ["Specifies how frequently to update the simulation sink from the\n    ", {"type": "ui", "text": ["Sink Layer"]}, ". The sink will be used to remove water from the simulation in\n    relative amounts. For example, value of ", {"type": "code", "text": ["0.1"]}, " indicates that the amount of\n    water in the voxel should be reduced by ", {"type": "code", "text": ["10%"]}, " in one frame at the canonical\n    frame rate of 24 per second."], "extent": [8218, 8560]}, {"type": "para", "indent": 4, "text": [{"type": "ui", "text": ["Initialize Only"]}, " copies the field at the start of the simulation and uses\n    it throughout; this is the fastest option and should be used with a static\n    sink. ", {"type": "ui", "text": ["Once per Frame"]}, " refreshes the simulation sink on the first substep\n    of each frame; this should be used with changing sinks whenever possible.\n    ", {"type": "ui", "text": ["Every Substep"]}, " is the slowest option, and should be avoided, except for\n    special cases with very rapidly changing sinks."], "extent": [8560, 9010]}], "container": true, "attrs": {"id": "update_sink"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Forces Frequency"], "extent": [9010, 9028], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the simulation velocities in areas marked by the\n    ", {"type": "ui", "text": ["Force Mask Layer"]}, " are driven towards the goal velocities contained in the\n    incoming ", {"type": "code", "text": ["vel"]}, " vector layer. Where ", {"type": "ui", "text": ["Force Mask Layer"]}, " is ", {"type": "code", "text": ["0"]}, ", no forces\n    are applied. Larger values, up to ", {"type": "code", "text": ["1"]}, ", speed up the rate at which the\n    simulation velocities match the goal values in ", {"type": "code", "text": ["vel"]}, "."], "extent": [9051, 9410]}, {"type": "para", "indent": 4, "text": [{"type": "ui", "text": ["Initialize Only"]}, " copies the force mask and goal velocity fields at the\n    start of the simulation and uses them throughout. This is the fastest option\n    and should be used with a static force field. ", {"type": "ui", "text": ["Once per Frame"]}, " refreshes\n    the simulation sink on the first substep of each frame; this should be used\n    with changing force fields whenever possible. ", {"type": "ui", "text": ["Every Substep"]}, " is the\n    slowest option, and should be avoided, except in special cases with very\n    rapidly changing force fields."], "extent": [9410, 9916]}], "container": true, "attrs": {"id": "update_forces"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "type": "sep", "indent": 0, "text": [" Speed Limits "], "extent": [9916, 9935]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Max Wave Speed"], "extent": [9935, 9952], "body": [{"type": "para", "indent": 4, "text": ["When enabled, each component of velocity will be clamped against this value.\n    This parameter can be used to stabilize the simulation, as well as to\n    prevent unrealistically large velocity values."], "extent": [2749, 2956]}], "container": true, "attrs": {"id": "maxwavespeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Surface Speed"], "extent": [10045, 10064], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the change in water depth is clamped against this value. This\n    parameter can be used to stabilize the simulation, but can give rise to\n    unphysical behavior."], "extent": [4181, 4363]}], "container": true, "attrs": {"id": "maxsurfacespeed"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Simulation"], "extent": [10164, 10181], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Voxel Size Scale"], "extent": [10181, 10200], "body": [{"type": "para", "indent": 4, "text": ["Controls resolution of the simulation. More precisely, this value acts as a\n    multiplier on voxel size of the incoming height fields; their product forms\n    the voxel size used for simulation. As such, larger values of this parameter\n    correspond to lower resolutions."], "extent": [10224, 10503]}], "container": true, "attrs": {"id": "voxelsizescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Substeps"], "extent": [10503, 10513], "body": [{"type": "para", "indent": 4, "text": ["Each frame of the simulation is subdivided into this number of substeps when\n    performing the solve. Larger values produce more accurate results, but take\n    longer to run. If the simulation is unstable, ", {"type": "ui", "text": ["Substeps"]}, " need to be\n    increased."], "extent": [10531, 10782]}], "container": true, "attrs": {"id": "substeps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Global Substeps"], "extent": [10782, 10799], "body": [{"type": "para", "indent": 4, "text": ["Controls global substeps at the simulation level. ", {"type": "ui", "text": ["Global Substeps"]}, " are\n    best used when you need to export the substepped geometry. They will use\n    more memory per frame, but all substeps will be kept rather than just the\n    final results for each frame."], "extent": [10822, 11090]}], "container": true, "attrs": {"id": "globalsubstep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Memory (MB)"], "extent": [11090, 11109], "body": [{"type": "para", "indent": 4, "text": ["Controls whether or not the simulation is cached to memory. If turned on,\n    the value represents the maximum size of the memory cache."], "extent": [11131, 11273]}], "container": true, "attrs": {"id": "cachemaxsize"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Output"], "extent": [11273, 11286], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Output Water Height Is Absolute"], "extent": [11286, 11320], "body": [{"type": "para", "indent": 4, "text": ["When this toggle is enabled, output ", {"type": "ui", "text": ["Water Layer"]}, " will contain location of\n    the water surface. If this is turned off, then ", {"type": "ui", "text": ["Water Layer"]}, " will hold\n    height of the water column at each voxel."], "extent": [11344, 11549]}], "container": true, "attrs": {"id": "outputwaterabs"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Terrain Includes Water Height"], "extent": [11549, 11587], "body": [{"type": "para", "indent": 4, "text": ["When enabled, output ", {"type": "ui", "text": ["Seabed Layer"]}, " will be adjusted to include the water\n    (that is, ", {"type": "ui", "text": ["Water Layer"]}, " will be added to it)."], "extent": [11618, 11751]}], "container": true, "attrs": {"id": "outputheightwithwater"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualization"], "extent": [11751, 11766], "body": [{"type": "para", "indent": 4, "text": ["Controls visualization of the height fields in the viewport. If set to\n    ", {"type": "ui", "text": ["Unchanged"]}, ", incoming visualization settings will be preserved. When this\n    parameter is set to ", {"type": "ui", "text": ["Color by Water Layer"]}, " or ", {"type": "ui", "text": ["Color by Height Layer"]}, ",\n    then the height fields will be tinted by values in the respective layer."], "extent": [11779, 12091]}], "container": true, "attrs": {"id": "viz"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualize Range"], "extent": [12091, 12108], "body": [{"type": "para", "indent": 4, "text": ["Controls tinting of the height fields when ", {"type": "ui", "text": ["Visualization"]}, " is set to\n    ", {"type": "ui", "text": ["Color by Water Layer"]}, " or ", {"type": "ui", "text": ["Color by Height Layer"]}, ". First value in this\n    range is mapped to white, and the second value is mapped to blue."], "extent": [12126, 12351]}], "container": true, "attrs": {"id": "vizrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Velocity (vel)"], "extent": [12351, 12374], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the ", {"type": "code", "text": ["vel"]}, " vector field will be exported by the solver. This\n    field stores the flow velocities."], "extent": [12393, 12510]}], "container": true, "attrs": {"id": "outputvel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Acceleration (accel)"], "extent": [12510, 12539], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the acceleration vector field (", {"type": "code", "text": ["accel"]}, ") will be exported by\n    the solver. This field stores the ", {"type": "em", "text": ["Lagrangian"]}, " accelerations\u2013the change in\n    velocity in the frame of the liquid."], "extent": [12560, 12760]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [12760, 12770], "body": [{"type": "para", "indent": 8, "text": ["Toggling this parameter will invalidate the cache, since these\n        accelerations need to be computed during the simulation."], "extent": [12770, 12907]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "outputaccel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Vorticity (vorticity)"], "extent": [12907, 12937], "body": [{"type": "para", "indent": 4, "text": ["The solver\u2019s output will contain the ", {"type": "code", "text": ["vorticity"]}, " layer when this option is\n    enabled. Vorticity is curl of the velocity field, and it measures the amount\n    of local spinning at every voxel."], "extent": [12962, 13161]}], "container": true, "attrs": {"id": "outputvorticity"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bindings"], "extent": [13161, 13177], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Seabed Layer"], "extent": [13177, 13192], "body": [{"type": "para", "indent": 4, "text": ["Name of the input layer containing the collision terrain."], "extent": [13213, 13276]}], "container": true, "attrs": {"id": "heightlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Water Layer"], "extent": [13276, 13289], "body": [{"type": "para", "indent": 4, "text": ["Name of the water layer. This layer in the output contains the simulation\n    results. If this layer exists in the input, it will be used as the initial\n    state."], "extent": [13309, 13478]}], "container": true, "attrs": {"id": "waterlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Layer"], "extent": [13478, 13492], "body": [{"type": "para", "indent": 4, "text": ["Name of the input layer containing water sources. You can use the\n    ", {"type": "ui", "text": ["Source Layer"]}, " to inject new water into the simulation."], "extent": [13513, 13646]}], "container": true, "attrs": {"id": "sourcelayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sink Layer"], "extent": [13646, 13658], "body": [{"type": "para", "indent": 4, "text": ["Name of the input layer containing water sinks. You can use the\n    ", {"type": "ui", "text": ["Sink Layer"]}, " to remove water from the simulation."], "extent": [13677, 13802]}], "container": true, "attrs": {"id": "sinklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Force Mask Layer"], "extent": [13802, 13820], "body": [{"type": "para", "indent": 4, "text": ["Name of the input layer containing the force mask. Values of ", {"type": "code", "text": ["0"]}, " in this\n    layer mark places where no forces are applied. Larger values (up to ", {"type": "code", "text": ["1"]}, ")\n    speed up the rate at which the simulation velocities match the goal\n    velocities in the incoming ", {"type": "code", "text": ["vel"]}, " vector field. You must enable\n    ", {"type": "ui", "text": ["Forces Frequency"]}, " under ", {"type": "ui", "text": ["Constraint Updates"]}, " for force application to\n    take place."], "extent": [13844, 14233]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [14233, 14243], "body": [{"type": "para", "indent": 8, "text": ["If there is no incoming ", {"type": "code", "text": ["vel"]}, " vector field, then ", {"type": "code", "text": ["0"]}, " goal velocities\n        will be used. This will act as a drag force that slows down the flow."], "extent": [14243, 14399]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "forcemasklayer"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["Shallow Water Solver"], "summary": [" Runs shallow water simulations on height fields. "], "included": ["/nodes/dop/gasintegrateshallowwaterequations", "/nodes/dop/standard_data_locals", "/nodes/dop/standard_gas_timestep", "/nodes/dop/standard_locals"]}