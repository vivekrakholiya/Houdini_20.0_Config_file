{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "crowdmotionpathfollow", "icon": "SOP/crowdmotionpathfollow", "tags": "crowds, agents", "since": "20.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Crowd MotionPath Follow"], "extent": [128, 156]}, {"type": "summary", "indent": 0, "text": ["Deforms motion paths to follow guiding curves."], "extent": [156, 211]}, {"type": "para", "indent": 0, "text": ["This SOP deforms motion paths to follow the orientation of the curves provided in the Curves to Follow (third) input.\nThis is useful for procedurally guiding the motion of many agents using a small number of guiding curves."], "extent": [211, 436]}, {"type": "para", "indent": 0, "text": ["Agents follow the closest curve to their initial position, and track their current distance along the curve to avoid jumping to another part of a looping curve.\nIf closed curves are provided, agents continue to follow the curve again after reaching the end of the curve."], "extent": [436, 708]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [708, 713], "body": [{"type": "para", "indent": 4, "text": ["The curves do not need to be polyline curves. They could also be NURBS or Bezier curves, which are more suitable for representing a smooth path to follow. "], "extent": [713, 874]}, {"type": "para", "indent": 4, "text": ["You can use the ", {"scheme": "Node", "value": "/nodes/sop/curve", "type": "link", "text": ["Curve SOP"], "fullpath": "/nodes/sop/curve.html"}, " to draw smooth curves for this node. "], "extent": [874, 960]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["See ", {"scheme": null, "value": "/crowds/sopcrowds", "type": "link", "text": ["SOP motion paths"], "fullpath": "/crowds/sopcrowds.html"}, " for more information on the SOP Crowds MotionPath toolset."], "extent": [960, 1061]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1061, 1073], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [1073, 1081], "body": [{"type": "para", "indent": 4, "text": ["The motion paths that are deformed to follow the guiding curves."], "extent": [1096, 1166]}], "container": true, "attrs": {"id": "group"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Curves "], "extent": [1166, 1181], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Curve Group"], "extent": [1181, 1199], "body": [{"type": "para", "indent": 8, "text": ["The curves from the Curves to Follow input that the agents follow."], "extent": [1223, 1299]}], "container": true, "attrs": {"id": "curvegroup"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Match by Attribute"], "extent": [1299, 1323], "body": [{"type": "para", "indent": 8, "text": ["When selecting a curve to follow, only considers curves for which the ", {"type": "ui", "text": ["Curve Attribute"]}, " matches the value of the ", {"type": "ui", "text": ["Agent Attribute"]}, " on the motion path or agent primitive.\n        This can be useful for precisely controlling which curve each agent follows."], "extent": [1350, 1618]}, {"type": "para", "indent": 8, "text": ["If ", {"type": "ui", "text": ["Curve Attribute"]}, " is turned off, the ", {"type": "ui", "text": ["Agent Attribute"]}, " is matched against the curves' primitive numbers.\n        If there is no matching curve, the default behavior is used (select the closest curve to the motion path\u2019s initial position)."], "extent": [1618, 1873]}], "container": true, "attrs": {"id": "matchbyattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Agent Attribute"], "extent": [1873, 1894], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Match by Attribute"]}, " is turned on, this is the name of an integer or string primitive attribute on the Motion Paths input.\n        This can also be provided as a point or primitive attribute on the agent primitive associated with each path."], "extent": [1919, 2176]}], "container": true, "attrs": {"id": "agentattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Curve Attribute"], "extent": [2176, 2197], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Match by Attribute"]}, " and ", {"type": "ui", "text": ["Curve Attribute"]}, " are turned on, the specified name is an integer or string primitive attribute on the Curves to Follow input. \n        If not specified, the curve\u2019s primitive number is used."], "extent": [2222, 2457]}], "container": true, "attrs": {"id": "curveattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Target Up Vector"], "extent": [2457, 2479], "body": [{"type": "para", "indent": 8, "text": ["The up vector to use when computing orientations along the guiding curves. This is used to break the tie between all possible rolls around the tangent."], "extent": [2505, 2666]}], "container": true, "attrs": {"id": "upvectortype"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Reference Direction"], "extent": [2666, 2691], "body": [{"type": "para", "indent": 8, "text": ["The direction to align with the curve\u2019s tangent vector. This should be set to the original facing direction of the agent."], "extent": [2711, 2842]}], "container": true, "attrs": {"id": "refdir"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Level of Detail"], "extent": [2842, 2863], "body": [{"type": "para", "indent": 8, "text": ["The point density to use when converting other curve types to polygon curves."], "extent": [2885, 2972]}], "container": true, "attrs": {"id": "curvelod"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Deformation "], "extent": [2972, 2992], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Distance Variance"], "extent": [2992, 3016], "body": [{"type": "para", "indent": 8, "text": ["The maximum difference between an agent\u2019s original and current distance to the curve.\n        Small values force an agent to maintain its original distance to the curve, but may involve more abrupt changes in the agent\u2019s motion."], "extent": [3046, 3284]}], "container": true, "attrs": {"id": "distancevariance"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 4, "text": [" Smoothing "], "extent": [3284, 3306], "body": [{"type": "para", "indent": 8, "text": ["In addition to sampling the curve\u2019s closest point to the agent\u2019s position, the orientations at other nearby points on the curve are also sampled in order to produce smoother changes in the agent\u2019s motion.\n        This is particularly important for agents that are farther from the curve, since the closest point to the agent can shift rapidly as the agent moves, which would produce sudden orientation changes."], "extent": [3306, 3727]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Smoothing Radius"], "extent": [3727, 3753], "body": [{"type": "para", "indent": 12, "text": ["When searching for additional points, the sample radius is extended to be the agent\u2019s minimum distance to the curve plus this distance."], "extent": [3786, 3935]}], "container": true, "attrs": {"id": "smoothingradius"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Cone Angle"], "extent": [3935, 3955], "body": [{"type": "para", "indent": 12, "text": ["Only consider sample points for which the distance along the curve from the agent\u2019s closest point is within the arc length described by this angle and the sample radius.\n            This ensures that only nearby points along the curve are considered (ignoring points that are only spatially close, such as from a figure-eight curve), while also increasing the number of samples for agents farther from the curve."], "extent": [3982, 4408]}], "container": true, "attrs": {"id": "coneangle"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Max Search Points"], "extent": [4408, 4435], "body": [{"type": "para", "indent": 12, "text": ["The maximum number of sample points to consider."], "extent": [4468, 4530]}], "container": true, "attrs": {"id": "maxsearchpoints"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [4530, 4538], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Motion Paths"], "extent": [4538, 4553], "body": [{"type": "para", "indent": 4, "text": ["Polyline curves representing the paths of the agents over a time range."], "extent": [4553, 4630]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Agents"], "extent": [4630, 4638], "body": [{"type": "para", "indent": 4, "text": ["A crowd of agents whose motion is represented by the Motion Paths."], "extent": [4638, 4710]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Curves to Follow"], "extent": [4710, 4728], "body": [{"type": "para", "indent": 4, "text": ["Guiding curves that the motion paths are deformed to follow."], "extent": [4728, 4794]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [4794, 4803], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Motion Paths"], "extent": [4803, 4818], "body": [{"type": "para", "indent": 4, "text": ["Polyline curves representing the paths of the agents over a time range."], "extent": [4818, 4895]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Agents"], "extent": [4895, 4903], "body": [{"type": "para", "indent": 4, "text": ["A crowd of agents whose motion is represented by the Motion Paths."], "extent": [4903, 4975]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4975, 4984], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "/crowds/sopcrowds", "type": "link", "text": ["SOP motion paths"], "fullpath": "/crowds/sopcrowds.html"}], "extent": [4984, 5023]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpath", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpath.html"}], "extent": [5023, 5052]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathavoid", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathavoid.html"}], "extent": [5052, 5086]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathedit", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathedit.html"}], "extent": [5086, 5119]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathevaluate", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathevaluate.html"}], "extent": [5119, 5156]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathlayer", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathlayer.html"}], "extent": [5156, 5190]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathretime", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathretime.html"}], "extent": [5190, 5225]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathtransition", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathtransition.html"}], "extent": [5225, 5264]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/crowdmotionpathtrigger", "type": "link", "text": "", "fullpath": "/nodes/sop/crowdmotionpathtrigger.html"}], "extent": [5264, 5300]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/curve", "type": "link", "text": "", "fullpath": "/nodes/sop/curve.html"}], "extent": [5300, 5319]}], "container": true}], "text": "Related"}], "title": ["Crowd MotionPath Follow"], "summary": ["Deforms motion paths to follow guiding curves."]}