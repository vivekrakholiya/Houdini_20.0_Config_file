{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "quadremesh", "icon": "SOP/quadremesh.svg", "tags": "meshing", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Quad Remesh"], "extent": [0, 16]}, {"type": "summary", "indent": 0, "text": ["Converts an arbitrary mesh into structured quadrilaterals."], "extent": [112, 179]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [179, 194], "body": [{"tag": "div", "attrs": {"style": "position: relative;"}, "type": "xml", "text": ["\n    ", {"tag": "div", "attrs": {"style": "float: left; width: 5em;"}, "type": "xml", "text": ["\n        ", {"scheme": "Image", "value": "/images/beta.svg", "type": "link", "text": "", "fullpath": "/images/beta.svg.html"}, "\n    "]}, "\n    ", {"tag": "div", "attrs": {"style": "margin-left: 5em; padding-left: 1em; min-height: 4em;"}, "type": "xml", "text": ["\n        This feature is still under development. The current functionality is\n        unfinished and subject to change, and may have thin or no documentation.\n        Please bear this in mind when using it.\n    "]}, "\n"]}, {"type": "para", "indent": 0, "text": ["This node builds a mesh of quads (four-sided polygons) with the same shape as the input surface, but as quads and with potentially much better edge flow."], "extent": [217, 372]}, {"type": "para", "indent": 0, "text": ["The higher the target number of polygons, the better the shape of the output can match the shape of the input. In this example, the input model on the left has 16 million polygons, and the output on the right has 15 thousand quads."], "extent": [372, 605]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/model/quad_remesh.jpg", "type": "img", "text": ""}], "extent": [605, 644]}, {"type": "para", "indent": 0, "text": ["(Note that since it works to a target quad count, this node can also ", {"type": "em", "text": ["increase"]}, " the number of polygons in the model.)"], "extent": [644, 764]}, {"level": 3, "id": "internals", "container": true, "type": "h", "indent": 0, "text": ["How it works internally"], "extent": [764, 808], "body": [{"type": "para", "indent": 0, "text": ["An understanding of what the node is doing internally may help you use the node\u2019s options and output. In technical terms, this node computes a global parameterization over the input geometry, and extracts a quadrilateral mesh by tracing integer grid lines in the parameterization."], "extent": [808, 1091]}, {"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Internally, the node builds a ", {"type": "q", "text": ["direction field"]}, ", representing the edge flow directions across the surface. This is a ", {"type": "q", "text": ["rough draft"]}, " for how the edges will be layed out in the output, before any constraints are applied. Areas where the directions in the field are parallel will come out as smooth, regular quads."], "extent": [1091, 1405], "body": [{"type": "para", "indent": 4, "text": ["You can visualize the direction field by turning on ", {"type": "ui", "text": ["Direction field"]}, " in the node\u2019s operation toolbar at the top of the viewer."], "extent": [1405, 1540]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["It\u2019s not possible for the entire surface to be smooth. At some point, different flows will run into each other, and there will be points on the surface where the surrounding directions converge or diverge or cross. These are called ", {"type": "em", "text": ["singularities"]}, "."], "extent": [1540, 1792], "body": [{"type": "para", "indent": 4, "text": ["You can visualize the singularities by turning on ", {"type": "ui", "text": ["Field singularities"]}, " in the node\u2019s operation toolbar at the top of the viewer."], "extent": [1792, 1929]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The singularities are the ", {"type": "q", "text": ["corners"]}, " from which the node will ", {"type": "q", "text": ["unwrap"]}, " the surface onto a UV plane. The node creates ", {"type": "em", "text": ["seams"]}, " between the singularity points, which it ", {"type": "q", "text": ["cuts"]}, " to make them the boundaries of the unwrapped UV surface."], "extent": [1929, 2161], "body": [{"type": "para", "indent": 4, "text": ["You can visualize the seams by turning on ", {"type": "ui", "text": ["Seams"]}, " in the node\u2019s operation toolbar at the top of the viewer."], "extent": [2161, 2276]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The node traces lines across the UV space to create the new quad mesh layout. One of the biggest constraints on how the node can lay out the edges, and how much you can change the layout, is that edge flow must be continuous across the seams (the boundaries of the unwrapped surface in UV space)."], "extent": [2276, 2576], "body": [{"type": "para", "indent": 4, "text": ["If you compare the direction field visualization to the final quad output, the main reason for any differences is usually needing to maintain continuity across seams."], "extent": [2576, 2748]}], "container": true}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["The singularities will usually become ", {"type": "em", "text": ["extraordinary vertices"]}, " (vertices with fewer or more than four connected edges) in the output mesh. The node\u2019s ", {"type": "ui", "text": ["Apply subdivision"]}, " option (on by default) automatically does a subdivision step on the polygon mesh before output, to remove extraordinary vertices."], "extent": [2748, 3054]}], "container": true}]}]}, {"level": 2, "id": "tweaking", "container": true, "type": "h", "indent": 0, "text": ["Tweaking the output"], "extent": [3054, 3091], "body": [{"type": "para", "indent": 0, "text": ["The node does not allow a lot of control over the final result, however you can use the parameters to tweak the output."], "extent": [3091, 3213]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Changing the ", {"type": "ui", "text": ["Decimation level"]}, " can give different results. For high resolution input, higher levels of reduction can give better results."], "extent": [3213, 3357]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"type": "ui", "text": ["Curvature edge flow"]}, " parameter lets you influence the trade-off between smoother edge flow versus capturing the curvature of the surface in the flow. Increasing ", {"type": "ui", "text": ["Curvature edge flow"]}, " increases the number of singularities."], "extent": [3357, 3591]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Some of the options that influence the topology of the output, such as symmetry or a ", {"scheme": null, "value": "#guideattrib", "type": "link", "text": ["guide attribute"], "fullpath": "/nodes/sop/quadremesh.html#guideattrib", "fragment": "#guideattrib"}, ", constrain the node\u2019s search for a parameterization. As you add more constraints, or increase their weight, they may have less of an impact on the resulting quad mesh, since they make it harder to find a solution that satisfies all the constraints, especially with input geometry of higher complexity."], "extent": [3591, 4012], "body": [{"type": "para", "indent": 4, "text": ["For example, the more ", {"type": "q", "text": ["guide lines"]}, " you add through a guide attribute, the ", {"type": "em", "text": ["less"]}, " influence they may have, because it becomes impossible for the node to satisfy all the constraints."], "extent": [4012, 4199]}, {"type": "para", "indent": 4, "text": ["Generally, if you visualize the direction field, and it doesn\u2019t already look roughly like what you want, you can\u2019t add constraints to force it to look like what you want. You can only influence it."], "extent": [4199, 4402]}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"type": "ui", "text": ["Target quad count"]}, " lets you choose how much detail to include in the output. Once the node has created the direction field internally, changing the level of detail in the output is quite fast."], "extent": [4402, 4605]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The parameters on the ", {"type": "ui", "text": ["Symmetry"]}, " tab let you specify planes of symmetry in the input model. The node will only remesh one side of the symmetry plane and (optionally) mirror the remeshed surface back across the symmetry plane. (This is a convenience, there is basically no different between using these options, or adding a ", {"scheme": "Node", "value": "/nodes/sop/clip", "type": "link", "text": ["Clip"], "fullpath": "/nodes/sop/clip.html"}, " node before this node and a ", {"scheme": "Node", "value": "/nodes/sop/mirror", "type": "link", "text": ["Mirror"], "fullpath": "/nodes/sop/mirror.html"}, " node after.)"], "extent": [4605, 5021]}], "container": true}]}, {"level": 2, "id": "limitations", "container": true, "type": "h", "indent": 0, "text": ["Limitations"], "extent": [5021, 5053], "body": [{"type": "para", "indent": 0, "text": ["This node is a work in progress. The node is very useful for certain use cases, but has a few limitations in its current ", {"type": "q", "text": ["beta"]}, " state. We hope to address these issues as we continue to work on the node."], "extent": [5053, 5258]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["There is currently no way to interactive influence edge flow (for example, by brushing or drawing lines). However, you can manually set up a vector attribute on the polygons to have some influence over the edge flow. See the ", {"scheme": null, "value": "#guideattrib", "type": "link", "text": ["Guide Attribute"], "fullpath": "/nodes/sop/quadremesh.html#guideattrib", "fragment": "#guideattrib"}, " parameter on the ", {"type": "ui", "text": ["Guide"]}, " tab."], "extent": [5258, 5549]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The node is currently not good at ", {"type": "q", "text": ["hard surface"]}, " models with sharp edges, in those cases the node will round off the sharp edge in the output. The node is currently better at ", {"type": "q", "text": ["organic"]}, " shapes."], "extent": [5549, 5745]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Currently, when you use the Symmetry options, the seam along the symmetry plane will be straight in 3D space, but may not always be straight in UV space. This can cause edges to run into the symmetry line instead of running parallel to it."], "extent": [5745, 5988]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The flattened UVs created by the node can be quite complicated. This can cause artifacts in the output."], "extent": [5988, 6095]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The node currently produces uniform sized quads, rather than adapting the size of the quads to better capture small details."], "extent": [6095, 6224]}], "container": true}]}, {"level": 2, "id": "quadremeshtoolbar", "container": true, "type": "h", "indent": 0, "text": ["Toolbar"], "extent": [6224, 6258], "body": [{"type": "para", "indent": 0, "text": ["Select a Quad Remesh node in the network editor, and click the ", {"scheme": "Icon", "value": "TOOLS/handles", "type": "link", "text": "", "fullpath": "/nodes/sop/TOOLS/handles.html"}, " Handles tool to the left of the viewer, or press ", {"keys": ["Enter"], "type": "keys", "text": null}, " in the viewport to use the Quad Remesh tool."], "extent": [6258, 6448]}, {"type": "para", "indent": 0, "text": ["Currently the tool does not have viewport interaction (use the parameter editor to change how the node works), but does provide visualizes to help you understand how the node generates the output, and what parts of the input model might be difficult for the node to deal with."], "extent": [6448, 6726]}, {"type": "para", "indent": 0, "text": ["You can control visualization options using the controls in the operator toolbar (above the viewer). (See ", {"scheme": null, "value": "#internals", "type": "link", "text": ["how the node works internally"], "fullpath": "/nodes/sop/quadremesh.html#internals", "fragment": "#internals"}, " for information about what these visualizations show.)"], "extent": [6726, 6931]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Global Parameter"], "extent": [6931, 6949], "body": [{"type": "para", "indent": 4, "text": ["When this is on, the node draws the global parameter lines as darker lines across the model."], "extent": [6949, 7047]}, {"type": "para", "indent": 4, "text": ["The global parameter lines influence the directions of edge loops in the output surface, but are independent of the output resolution."], "extent": [7047, 7191]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Seams"], "extent": [7191, 7198], "body": [{"type": "para", "indent": 4, "text": ["When this is on, the node draws the seams of the global parameterization as brightly colored lines across the model."], "extent": [7198, 7320]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Field Singularities"], "extent": [7320, 7341], "body": [{"type": "para", "indent": 4, "text": ["When this is on, the node draws singularities in the direction field as dots on the model."], "extent": [7341, 7441]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Direction Field"], "extent": [7441, 7458], "body": [{"type": "para", "indent": 4, "text": ["When this is on, the node draws U/V crosses to help visualize the direction field across the model. The red line in each cross represents the direction of the field at that point."], "extent": [7458, 7643]}, {"type": "para", "indent": 4, "text": ["You can change the length of the cross lines with the ", {"type": "ui", "text": ["Vector scale"]}, " slider."], "extent": [7643, 7727]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Vector Scale"], "extent": [7727, 7741], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Direction field"]}, " is on, this controls the length of the vector visualizations."], "extent": [7741, 7834]}], "container": true}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [7834, 7846], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Topology"], "extent": [7846, 7862], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [7862, 7870], "body": [{"type": "para", "indent": 4, "text": ["The name of a group or list of primitive numbers/patterns that select the geometry this node will affect.\n    If you leave this blank, the node affects all closed polygons in the input."], "extent": [7870, 8061]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output"], "extent": [8061, 8069], "body": [{"type": "para", "indent": 4, "text": ["Controls the output of this node. ", {"type": "ui", "text": ["Extracted Mesh"]}, " outputs the remeshed quad surface.\n    ", {"type": "ui", "text": ["Global Parameterization"]}, " outputs a triangular mesh with a ", {"type": "code", "text": ["uv"]}, " vertex attribute containing the parameterization."], "extent": [8086, 8299]}, {"type": "para", "indent": 4, "text": ["The triangular mesh is post-reduction by the ", {"type": "ui", "text": ["Decimation level"]}, "."], "extent": [8299, 8371]}], "container": true, "attrs": {"id": "output"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Quad Count"], "extent": [8371, 8390], "body": [{"type": "para", "indent": 4, "text": ["The number of polygons you want the output surface to have."], "extent": [8416, 8481]}], "container": true, "attrs": {"id": "targetquadcount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Decimation Level"], "extent": [8481, 8499], "body": [{"type": "para", "indent": 4, "text": ["The input to this node is typically a high-resolution surface, such as scan data, with way more information than the node needs. This parameter reduces the number of polygons in the input before remeshing. Reducing the input polygons makes remeshing much faster, and in many cases can improve the edge flows in the output because the reduced input will have less ", {"type": "q", "text": ["noise"]}, ". Default is ", {"type": "code", "text": ["2"]}, ". Increase this value for more reduction."], "extent": [8520, 8953]}, {"type": "para", "indent": 4, "text": ["If you specify a ", {"type": "ui", "text": ["Guide attribute"]}, " (on the ", {"type": "ui", "text": ["Guide"]}, " tab), the node will not reduce any faces with the attribute."], "extent": [8953, 9074]}], "container": true, "attrs": {"id": "decimation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Include Boundary Edges"], "extent": [9074, 9098], "body": [{"type": "para", "indent": 4, "text": ["Preserves boundaries in the output quad mesh."], "extent": [9126, 9177]}], "container": true, "attrs": {"id": "featureboundaries"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Apply Subdivision"], "extent": [9177, 9196], "body": [{"type": "para", "indent": 4, "text": ["Applies one level of Catmull-Clark subdivision to the extracted mesh.\n    This eliminates any potential N-gons. "], "extent": [9223, 9341]}], "container": true, "attrs": {"id": "applysubdivision"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Project Points"], "extent": [9341, 9357], "body": [{"type": "para", "indent": 4, "text": ["Fit points in the output back onto the input surface.\n    This can help compensate for volume loss caused by the subdivision step."], "extent": [9381, 9518]}], "container": true, "attrs": {"id": "projectpoints"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Symmetry"], "extent": [9518, 9533], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Center"], "extent": [9533, 9542], "body": [{"type": "para", "indent": 4, "text": ["The original of the symmetry plane(s) in the input model."], "extent": [9567, 9630]}], "container": true, "attrs": {"id": "symmetrycenter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["X"], "extent": [9630, 9633], "body": [{"type": "para", "indent": 4, "text": ["Treat the model as symmetrical across the X axis. Choose whether to remesh the +X or -X side of the input (relative to the ", {"type": "ui", "text": ["Center"]}, ")."], "extent": [9649, 9794]}], "container": true, "attrs": {"id": "xaxis"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Y"], "extent": [9794, 9797], "body": [{"type": "para", "indent": 4, "text": ["Treat the model as symmetrical across the Y axis. Choose whether to remesh the +Y or -Y side of the input (relative to the ", {"type": "ui", "text": ["Center"]}, ")."], "extent": [9813, 9958]}], "container": true, "attrs": {"id": "yaxis"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Z"], "extent": [9958, 9961], "body": [{"type": "para", "indent": 4, "text": ["Treat the model as symmetrical across the Z axis. Choose whether to remesh the +Z or -Z side of the input (relative to the ", {"type": "ui", "text": ["Center"]}, ")."], "extent": [9977, 10122]}], "container": true, "attrs": {"id": "zaxis"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mirror Output"], "extent": [10122, 10137], "body": [{"type": "para", "indent": 4, "text": ["When a symmetry direction is on, this automatically mirrors the remeshed half back across the symmetry plane in the output. When this is off, the output only contains the remeshed side of the symmetry. You can turn this off if you want to further processing to the remeshed half before mirroring it manually (or if you don\u2019t need to mirror it at all)."], "extent": [10160, 10517]}], "container": true, "attrs": {"id": "mirroroutput"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Consolidate Seam"], "extent": [10517, 10535], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Mirror Output"]}, " is on, the node fuses points of the two halves along the symmetry plane, if they are closer than this distance. New points are only fused with their mirrored counterpart."], "extent": [10560, 10760]}], "container": true, "attrs": {"id": "consolidatetol"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Guide"], "extent": [10760, 10772], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Curvature Edge Flow"], "extent": [10772, 10794], "body": [{"type": "para", "indent": 4, "text": ["How much curvature direction affects edge flow in the output."], "extent": [10814, 10881]}], "container": true, "attrs": {"id": "alignment"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Field"], "extent": [10881, 10888], "body": [{"type": "para", "indent": 4, "text": ["Whether to generate the direction field over polygon faces or edges."], "extent": [10904, 10982]}], "container": true, "attrs": {"id": "field"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Boundary"], "extent": [10982, 10992], "body": [{"type": "para", "indent": 4, "text": ["How much boundary tangents affect the output."], "extent": [11017, 11072]}], "container": true, "attrs": {"id": "boundaryweight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Guide Attribute"], "extent": [11072, 11089], "body": [{"type": "para", "indent": 4, "text": ["The name of vector3 primitive attribute on the input surface. If this is not blank and the attribute exists, the node uses ", {"type": "em", "text": ["non-zero"]}, " values of the attribute as directions to influence the edge flow. Zero values are ignored and filled in. This is a ", {"type": "q", "text": ["soft"]}, " constraint. The output edge flows may not match the attribute directions exactly. Input faces with a non-zero value for this attribute are not reduced by the ", {"type": "ui", "text": ["Decimation level"]}, " step."], "extent": [11111, 11557]}], "container": true, "attrs": {"id": "guideattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Guide Weight"], "extent": [11557, 11571], "body": [{"type": "para", "indent": 4, "text": ["How much the ", {"type": "ui", "text": ["Guide Attribute"]}, " affects the output. Higher values mean the guides will have a stronger influence, however they node can reach a convergence point where increasing this value further will have no more effect on the output."], "extent": [11599, 11848]}], "container": true, "attrs": {"id": "guideattribweight"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [11848, 11857], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/tangentfield", "type": "link", "text": "", "fullpath": "/nodes/sop/tangentfield.html"}], "extent": [11857, 11885]}], "container": true}], "text": "Related"}], "title": ["Quad Remesh"], "summary": ["Converts an arbitrary mesh into structured quadrilaterals."], "included": ["/news/beta"]}