{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "flipsolver", "icon": "SOP/flipsolver", "since": "19.5", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["FLIP Solver"], "extent": [84, 100]}, {"type": "summary", "indent": 0, "text": ["Evolves an object as a FLIP fluid object inside a SOP network."], "extent": [100, 171]}, {"type": "para", "indent": 0, "text": ["A FLIP solver is a type of hybrid between a particle based and volume based fluid simulations. All fluid data is stored in the particles and only particles need to persist frame to frame, ensuring no unwanted mixing or loss of fluid can occur. However, the pressure projection step is done on a volume that is created just in time. The fluid is represented by particles with their ", {"type": "code", "text": ["pscale"]}, ", and can be moved around with POP and DOP forces."], "extent": [171, 612]}, {"type": "para", "indent": 0, "text": ["When FLIP fluids are solved, a temporary velocity field is made. The particle velocities are transferred to this grid and the grid is used to perform the fluid projection. This is what prevents the particles from all going on top of each other and start moving in similar directions."], "extent": [612, 897]}, {"type": "para", "indent": 0, "text": ["The advantage of the FLIP Solver is that you run with only a few time steps per frame while other methods require anywhere from 5 to 10 time steps or more per frame to stabilize. FLIP utilizes a few grids (volume fields) to help tame the instantaneous impulses that can arise in a fluid sim. This way you can run far fewer points at far fewer time steps and the inter-spacing between particles can be random. You can introduce new particles at any time with little to no consequence."], "extent": [897, 1382]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1467, 1479], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reset Simulation"], "extent": [1479, 1498], "body": [{"type": "para", "indent": 4, "text": ["Click this button to refresh the simulation and remove all cached data from the RAM. Already simulated frames will be lost unless they're cached to disk."], "extent": [1498, 1657]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start Frame"], "extent": [1657, 1670], "body": [{"type": "para", "indent": 4, "text": ["Specify a frame for the simulation to start. Until then, no calculations are performed. If you cache the simulation to disk, empty frames are written until ", {"type": "ui", "text": ["Start Frame"]}, " is reached."], "extent": [1670, 1859]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Setup"], "extent": [1859, 1873], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" General "], "extent": [1873, 1890]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Particle Separation"], "extent": [1890, 1912], "body": [{"type": "para", "indent": 4, "text": ["Particles can end up closer together than their ", {"type": "code", "text": ["pscale"]}, " attribute. When this happens, internal forces can\u2019t separate the particles. This results in the fluid compressing over time. For correct results, take the ", {"type": "ui", "text": ["Particle Separation"]}, " value from the ", {"scheme": "Node", "value": "/nodes/sop/flipcontainer", "type": "link", "text": ["FLIP Container SOP"], "fullpath": "/nodes/sop/flipcontainer.html"}, " node and use it here."], "extent": [1933, 2255]}], "container": true, "attrs": {"id": "particlesep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Grid Scale"], "extent": [2255, 2267], "body": [{"type": "para", "indent": 4, "text": ["A fudge factor to account for the inability for the particles to actually pack at the ", {"type": "code", "text": ["pscale"]}, " amount due to the sphere packing problem. To test different values, run a FLIP solve without any volume or particle forces and see which values cause your initial particles to retain the desired volume."], "extent": [2286, 2589]}], "container": true, "attrs": {"id": "gridscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Scale"], "extent": [10090, 10103], "body": [{"type": "para", "indent": 4, "text": ["A scaling factor for time inside this solver. A value of ", {"type": "code", "text": ["1"]}, " is normal speed, a value greater than ", {"type": "code", "text": ["1"]}, " makes the FLIP simulation appear sped up, and a value less than ", {"type": "code", "text": ["1"]}, " makes the simulation appear to be in slow motion."], "extent": [10122, 10352]}, {"type": "para", "indent": 4, "text": ["You can use expression functions such as ", {"scheme": "Exp", "value": "/expressions/doptime", "type": "link", "text": "", "fallback_text": "doptime()", "fullpath": "/expressions/doptime.html"}, ", ", {"scheme": "Exp", "value": "/expressions/dopframe", "type": "link", "text": "", "fallback_text": "dopframe()", "fullpath": "/expressions/dopframe.html"}, ", ", {"scheme": "Exp", "value": "/expressions/dopsttot", "type": "link", "text": "", "fallback_text": "dopsttot()", "fullpath": "/expressions/dopsttot.html"}, ", and ", {"scheme": "Exp", "value": "/expressions/dopttost", "type": "link", "text": "", "fallback_text": "dopttost()", "fullpath": "/expressions/dopttost.html"}, " to convert between global times and simulation times."], "extent": [10352, 10518]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [10518, 10528], "body": [{"type": "para", "indent": 8, "text": ["Changing the ", {"type": "ui", "text": ["Time Scale"]}, " only affects the timestep of the simulation. If adding velocities calculated in SOPs to the simulation for collisions or pumps with the ", {"scheme": "Node", "value": "/nodes/dop/volumesource", "type": "link", "text": ["Volume Source DOP"], "fullpath": "/nodes/dop/volumesource.html"}, ", scale the incoming velocities by ", {"type": "code", "text": ["1/timescale"]}, " to match the timestep of the simulation."], "extent": [10528, 10832]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "timescale"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Simulation "], "extent": [2628, 2647]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Global Substeps"], "extent": [2647, 2665], "body": [{"type": "para", "indent": 4, "text": ["Use this parameter to overwrite ", {"type": "ui", "text": ["Minimum Substeps"]}, " and ", {"type": "ui", "text": ["Maximum Substeps"]}, ". More substeps lead to longer simulation times."], "extent": [2682, 2813]}], "container": true, "attrs": {"id": "substep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Substeps"], "extent": [10832, 10846], "body": [{"type": "para", "indent": 4, "text": ["The FLIP solver will always enforce this minimum number of substeps."], "extent": [10871, 10945]}, {"type": "para", "indent": 4, "text": ["This should rarely need to be changed."], "extent": [10945, 10989]}], "container": true, "attrs": {"id": "minimumsubsteps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Substeps"], "extent": [10989, 11003], "body": [{"type": "para", "indent": 4, "text": ["The FLIP solver will not break the simulation down to more\n    substeps than this value."], "extent": [11021, 11115]}], "container": true, "attrs": {"id": "substeps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Memory (MB)"], "extent": [2895, 2914], "body": [{"type": "para", "indent": 4, "text": ["The amount of RAM, reserved for caching a simulation to memory."], "extent": [2936, 3005]}], "container": true, "attrs": {"id": "cachemaxsize"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Waterline"], "extent": [3005, 3023], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" Waterline "], "extent": [3023, 3042]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Waterline"], "extent": [3042, 3054], "body": [{"type": "para", "indent": 4, "text": ["Turn on this option to create an initial water volume, e.g. to partially fill a container or create a water surface for interaction with objects or fluid sources."], "extent": [3075, 3243]}, {"type": "para", "indent": 4, "text": ["By default, you can only see a layer of water with a certain thickness, because of the solver\u2019s narrow band option. Narrow band is an effective method to speed up a simulation and reduce its memory footprint while maintaining the fluid\u2019s behavior and quality. In narrow band simulations, the fluid below the waterline is represented by volumes and fields (e.g. velocity and surface)."], "extent": [3243, 3632]}, {"type": "para", "indent": 4, "text": ["If you want to perform a waterline check in VEX or VOPs, for example if a displaced particle is above the waterline, you have to take ", {"type": "code", "text": ["pscale"]}, " into account. In DOP-based FLIP fluids, particles are created up to ", {"type": "code", "text": ["0"]}, ". In SOP-based fluids, ", {"type": "ui", "text": ["Waterline"]}, " creates particles up to ", {"type": "code", "text": ["-pscale"]}, ". So, the correct expression is ", {"type": "code", "text": ["v@P.y>-f@pscale"]}, ". To get the current ", {"type": "code", "text": ["pscale"]}, " value, please check the ", {"scheme": "Link", "value": "../../ref/panes/geosheet", "type": "link", "text": ["Geometry Spreadsheet"], "fullpath": "/ref/panes/geosheet.html"}, " pane."], "extent": [3632, 4083]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [4083, 4093], "body": [{"type": "para", "indent": 8, "text": ["In simulations with boundary transfer through the solver node\u2019s 4th input you have to turn off ", {"type": "ui", "text": ["Waterline"]}, ". The water surface is created by the connected node, e.g. ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum SOP"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " and ", {"scheme": "Node", "value": "/nodes/sop/oceanevaluate", "type": "link", "text": ["Ocean Evaluate SOP"], "fullpath": "/nodes/sop/oceanevaluate.html"}, " nodes."], "extent": [4093, 4368]}], "container": true}, {"type": "note", "indent": 4, "role": "item", "extent": [4368, 4378], "body": [{"type": "para", "indent": 8, "text": ["When turned on, you see a particle band around the domain\u2019s outside. This band represents the outside environment and injects velocity and pressure to the fluid inside the domain. New particles are also sourced from this layer. Note that the particle layer is taken into account when you surface the fluid particle. You can adjust the width of this layer with ", {"type": "ui", "text": ["Source Band"]}, "."], "extent": [4378, 4764]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "dowaterline"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Water Origin"], "extent": [4764, 4778], "body": [{"type": "para", "indent": 4, "text": ["By default, water origins at ", {"type": "code", "text": ["0,0,0"]}, ". With ", {"type": "ui", "text": ["Water Origin"]}, " you can change this position and add an offset, for example in Y direction. The fluid is then simulated in the space between ", {"type": "ui", "text": ["Water Origin"]}, " and ", {"type": "ui", "text": ["Waterline"]}, "."], "extent": [4799, 5025]}], "container": true, "attrs": {"id": "waterorigin"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Waterline"], "extent": [5025, 5036], "body": [{"type": "para", "indent": 4, "text": ["Drag the slider to move the waterline along the Y axis or enter a value. The waterline has to be inside the ", {"scheme": "Node", "value": "/nodes/sop/flipcontainer", "type": "link", "text": ["FLIP Container SOP\u2019s"], "fullpath": "/nodes/sop/flipcontainer.html"}, " boundaries."], "extent": [5055, 5226]}], "container": true, "attrs": {"id": "waterline"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Additional Velocity"], "extent": [5226, 5247], "body": [{"type": "para", "indent": 4, "text": ["You can add an initial velocity and direction to the waterline particles, e.g. to create a stream of water similar to a river. New particles are constantly sourced and removed at the domain\u2019s boundaries."], "extent": [5271, 5480]}], "container": true, "attrs": {"id": "water_velocity"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Boundary Condition "], "extent": [5480, 5507]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Type"], "extent": [5507, 5514], "body": [{"type": "para", "indent": 4, "text": [{"type": "ui", "text": ["Type"]}, " determines how particles, interacting with the domain\u2019s boundaries, are handled. With both types, water vanishes once it hits the domain\u2019s boundaries, while new particles are sourced to maintain an equilibrium. Sourcing and deleting of particles happens within the ", {"type": "ui", "text": ["Source Band"]}, " around the domain\u2019s outside. The parameter is also relevant in simulations with boundary transfer, e.g. the creation of rolling ocean waves or up-ressing scenarios. For simulations without contact to the domain\u2019s boundaries, e.g. when you fill a glass, ", {"type": "ui", "text": ["Type"]}, " doesn\u2019t have to be considered. "], "extent": [5536, 6125]}, {"type": "para", "indent": 4, "text": ["Results can turn out completely different depending on which ", {"type": "ui", "text": ["Type"]}, " you're using. ", {"type": "ui", "text": ["Pressure Driven"]}, " boundaries tend to be more splashy."], "extent": [6125, 6270]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Pressure Driven"], "extent": [6270, 6291], "body": [{"type": "para", "indent": 8, "text": ["With this option, fluids tend to be more splashy and turbulent, but also less stable."], "extent": [6291, 6386]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Velocity Driven"], "extent": [6386, 6407], "body": [{"type": "para", "indent": 8, "text": ["Velocity driven fluids are less turbulent, but more stable."], "extent": [6407, 6476]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "boundarytype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Initial Surface"], "extent": [6476, 6493], "body": [{"type": "para", "indent": 4, "text": ["The way, how the domain is filled, depends on a combination of ", {"type": "ui", "text": ["Initial Surface"]}, ", ", {"type": "ui", "text": ["Waterline"]}, ", and ", {"type": "ui", "text": ["Enable Particle Narrow Band"]}, " in the ", {"type": "ui", "text": ["Advanced"]}, " sub-pane."], "extent": [6517, 6687]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["When you turn on ", {"type": "ui", "text": ["Waterline"]}, ", you see a water surface by default."], "extent": [6687, 6761]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn off ", {"type": "ui", "text": ["Enable Particle Narrow Band"]}, " to get a particle volume."], "extent": [6761, 6834]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["With all three parameters turned off, the domain remains empty."], "extent": [6834, 6904]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["If you only turn off ", {"type": "ui", "text": ["Initial Surface"]}, ", a particle band is created around the domain."], "extent": [6904, 6999]}], "container": true}], "container": true, "attrs": {"id": "initialsurface"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Band"], "extent": [6999, 7014], "body": [], "container": true, "attrs": {"id": "velocityband"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pressure Band"], "extent": [7037, 7052], "body": [], "container": true, "attrs": {"id": "pressureband"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Band"], "extent": [7075, 7088], "body": [{"type": "para", "indent": 4, "text": ["When you turn on ", {"type": "ui", "text": ["Waterline"]}, ", you can see a water surface inside the domain and a particle area around the outside - the source band. The source band is the area where new particles are sourced and this parameter controls its size."], "extent": [7108, 7347]}], "container": true, "attrs": {"id": "sourceband"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Collisions"], "extent": [7347, 7366], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" Collision Behavior "], "extent": [7366, 7394]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Particle Collisions"], "extent": [7394, 7416], "body": [{"type": "para", "indent": 4, "text": ["Which mode you have to use depends on the collision object\u2019s geometry, but also the ", {"scheme": "Node", "value": "/nodes/sop/flipcollide", "type": "link", "text": ["FLIP Collide SOP"], "fullpath": "/nodes/sop/flipcollide.html"}, " node\u2019s ", {"type": "ui", "text": ["Volume Collide"]}, " and ", {"type": "ui", "text": ["Surface Collide"]}, " settings. The default mode works for closed 3D objects and volumes."], "extent": [7435, 7682]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [7682, 7692], "body": [{"type": "para", "indent": 8, "text": ["Disables particle-object collision for the entire simulation."], "extent": [7692, 7762]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Particle"], "extent": [7762, 7776], "body": [{"type": "para", "indent": 8, "text": ["Use this mode if there is 2D or open 3D geometry involved."], "extent": [7776, 7843]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Move Outside Collision"], "extent": [7843, 7871], "body": [{"type": "para", "indent": 8, "text": ["Use this mode with closed 3D objects and volumes."], "extent": [7871, 7930]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "collision"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Transparency"], "extent": [7930, 7944], "body": [], "container": true, "attrs": {"id": "transparency"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Surface Extrapolation"], "extent": [33505, 33528], "body": [{"type": "para", "indent": 4, "text": ["When the fluid surface is within this voxel distance of a collision, the solver will consider it part of the collision object. This extrapolation helps fluid flow smoothly along curved surfaces, but can create a slight stickiness.  Decreasing this value can create more dynamic splashes from collisions, especially as objects enter the fluid."], "extent": [33548, 33900]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [33900, 33910], "body": [{"type": "para", "indent": 8, "text": ["Setting this to 0 is not recommended."], "extent": [33910, 33957]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "extrapdist"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Stick on Collision "], "extent": [8007, 8034]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Stick on Collision"], "extent": [35918, 35938], "body": [{"type": "para", "indent": 4, "text": ["Causes the fluid\u2019s velocity to match the collision velocity when close to collision objects. See the ", {"scheme": "Node", "value": "/nodes/dop/gasstickoncollision", "type": "link", "text": ["Gas Stick On Collision DOP"], "fullpath": "/nodes/dop/gasstickoncollision.html"}, " for more information."], "extent": [35959, 36145]}], "container": true, "attrs": {"id": "enablestick"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stick Scale"], "extent": [36145, 36158], "body": [{"type": "para", "indent": 4, "text": ["The amount of collision velocity to blend into the fluid\u2019s velocity, where a value of 1 indicates fully matching the collision velocity."], "extent": [36178, 36320]}], "container": true, "attrs": {"id": "stickscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Distance"], "extent": [36320, 36334], "body": [{"type": "para", "indent": 4, "text": ["Specifies the world-space distance within which to apply the effect."], "extent": [36353, 36427]}], "container": true, "attrs": {"id": "stickdist"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Cells"], "extent": [36427, 36438], "body": [{"type": "para", "indent": 4, "text": ["Specifies the maximum number of voxels within which to apply the effect."], "extent": [36458, 36536]}], "container": true, "attrs": {"id": "stickcells"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stick Bias"], "extent": [36536, 36548], "body": [{"type": "para", "indent": 4, "text": ["Controls how quickly within the stick distance the effect will reach the full ", {"type": "ui", "text": ["Stick Scale"]}, ". Values closer to 1 will have more effect throughout the stick distance."], "extent": [36567, 36739]}], "container": true, "attrs": {"id": "stickbias"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Normal Scale"], "extent": [36739, 36753], "body": [{"type": "para", "indent": 4, "text": ["Scale the amount of velocity adjustment in the direction normal to the collision surface."], "extent": [36779, 36874]}], "container": true, "attrs": {"id": "sticknormalscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tangent Scale"], "extent": [36874, 36889], "body": [{"type": "para", "indent": 4, "text": ["Scale the amount of velocity adjustment in the direction tangent to the collision surface."], "extent": [36916, 37012]}], "container": true, "attrs": {"id": "sticktangentscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Control Field"], "extent": [37210, 37225], "body": [{"type": "para", "indent": 4, "text": ["Scale the effect by this spatially varying field, which should match the collision field in resolution."], "extent": [37252, 37361]}], "container": true, "attrs": {"id": "stickcontrolfield"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Ground "], "extent": [8569, 8584]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Add Ground Plane"], "extent": [8584, 8603], "body": [{"type": "para", "indent": 4, "text": ["You can add a ground object and make it interact with the fluid particles."], "extent": [8622, 8702]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [8702, 8712], "body": [{"type": "para", "indent": 8, "text": ["No ground plane will be added."], "extent": [8712, 8751]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Ground Plane"], "extent": [8751, 8769], "body": [{"type": "para", "indent": 8, "text": ["Adds a ground plane to the simulation."], "extent": [8769, 8816]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Height Field"], "extent": [8816, 8834], "body": [{"type": "para", "indent": 8, "text": ["Adds a heightfield static object to the simulation."], "extent": [8834, 8895]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "useground"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Height Field"], "extent": [8895, 8909], "body": [{"type": "para", "indent": 4, "text": ["SOP path to the height field geometry."], "extent": [8909, 8953]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Position"], "extent": [8953, 8970], "body": [{"type": "para", "indent": 4, "text": ["The location of the center of the ground plane."], "extent": [8970, 9023]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Up"], "extent": [9023, 9034], "body": [{"type": "para", "indent": 4, "text": ["The orientation of the ground plane."], "extent": [9034, 9076]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Fluid Behavior"], "extent": [9076, 9099], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Velocity Transfer"], "extent": [9099, 9119], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "ui", "text": ["Velocity Transfer"]}, " parameter lets you choose between the default ", {"type": "ui", "text": ["FLIP (Splashy)"]}, " and ", {"type": "ui", "text": ["APIC (Swirly)"]}, ". ", {"type": "ui", "text": ["FLIP (Splashy)"]}, " is typically used for high energy, noisy large FLIP simulations like rivers or oceans, where the surface from FLIP noise isn\u2019t a problem. ", {"type": "ui", "text": ["APIC"]}, " is typically used for high vorticity simulations where you need to reduce surface noise as much as possible while still retaining the swirling nature of the simulation. For example, for small scale fluids where surface noise can be really distracting or for lava type simulations."], "extent": [9140, 9706]}], "container": true, "attrs": {"id": "veltransfer"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Air Incompressibility "], "extent": [9706, 9736]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enforce Air Incompressibility"], "extent": [42209, 42240], "body": [{"type": "para", "indent": 4, "text": ["The divergence free constraint will now also be applied to the air volume. This will prevent air volumes from collapsing and create rising bubbles. This is useful for capturing realistic air-liquid interaction like a glugging watercooler."], "extent": [42269, 42513]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [42513, 42523], "body": [{"type": "para", "indent": 8, "text": ["This does not work with Pressure Adaptivity."], "extent": [42523, 42577]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "doincompressibleair"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Apply Moving Collision"], "extent": [42577, 42601], "body": [{"type": "para", "indent": 4, "text": ["Moving collisions can interact indirectly with the liquid through an air pocket. Any compression applied to the air pocket by the collision is compensated for at the liquid surface of the air pocket."], "extent": [42630, 42835]}], "container": true, "attrs": {"id": "applycollisiontoair"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Air Region Voxels"], "extent": [9834, 9857], "body": [{"type": "para", "indent": 4, "text": ["Air regions containing fewer voxels than the minimum will not have their incompressibility enforced. This is useful for preventing small bubbles from emerging along collision surfaces."], "extent": [9883, 10073]}], "container": true, "attrs": {"id": "minairregionsize"}, "role": "item"}], "container": true, "role": "item_group"}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [10073, 10079], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "ui", "text": ["Enforce Air Incompressibility"]}, " feature does not solve for the velocity in the air volume. It simply constrains the velocity of the liquid from compressing or expanding the air volume. This approach makes the simulation much mor efficient than fully simulating the entire air-volume."], "extent": [10079, 10374]}], "container": true}, {"type": "note", "indent": 0, "role": "item", "extent": [10374, 10380], "body": [{"type": "para", "indent": 4, "text": ["Bubbles submerged in the fluid could disappear during the render stage when using the default settings in ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, ". Activate the  ", {"type": "ui", "text": ["Preserve Bubbles"]}, " in ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, " to maintain the bubbles inside the fluid."], "extent": [10380, 10682]}], "container": true}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Apply Particle Separation"], "extent": [19923, 19951], "body": [{"type": "para", "indent": 4, "text": ["Despite the velocity projection stage, particles can end up closer\n    together than their ", {"type": "code", "text": ["pscale"]}, " attribute.  When this happens, internal\n    forces can\u2019t separate the particles because the velocity projection\n    will remove those forces.  This results in the fluid compressing\n    over time."], "extent": [19968, 20269]}], "container": true, "attrs": {"id": "partsep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Separation Iterations"], "extent": [20269, 20292], "body": [{"type": "para", "indent": 4, "text": ["The number of times to perform the separation relaxation step.  This\n    value can usually be set to 1 since successive frames of separation\n    will have the same effect."], "extent": [20313, 20490]}], "container": true, "attrs": {"id": "partsepiter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Separation Rate"], "extent": [20490, 20507], "body": [{"type": "para", "indent": 4, "text": ["How far to move the particles towards their desired separation\n    locations.  This can be reduced to get the effect of a fractional\n    iteration."], "extent": [20530, 20683]}], "container": true, "attrs": {"id": "partsepamount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Separation Scale"], "extent": [20683, 20701], "body": [{"type": "para", "indent": 4, "text": ["A fudge factor to account for the inability for the particles to\n    actually pack at the ", {"type": "code", "text": ["pscale"]}, " amount due to the sphere packing\n    problem.  To test different values, run a FLIP solve without any\n    volume or particle forces and see which values cause your initial\n    particles to retain the desired volume."], "extent": [20723, 21043]}], "container": true, "attrs": {"id": "partsepscale"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Reseeding "], "extent": [10842, 10860]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reseeding"], "extent": [10860, 10872], "body": [{"type": "para", "indent": 4, "text": ["Create new particles in voxels where the particle count has\n    dropped too low to properly represent the fluid surface, and\n    delete particles in voxels that have become too crowded. Reseeding\n    can help avoid collapsing pockets of air forming in the fluid near\n    collisions, as well as provide a smoother surface from which to\n    generate a polygonal mesh."], "extent": [10893, 11264]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "text": [" "], "role": "item", "extent": [11264, 11275], "body": [{"type": "para", "indent": 8, "text": ["Reseeding cannot be turned off if ", {"type": "ui", "text": ["Enable Particle Narrowband"]}, " \n        is turned on."], "extent": [11275, 11372]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "doreseeding"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Birth Threshold"], "extent": [18128, 18145], "body": [{"type": "para", "indent": 4, "text": ["Particles will be added to a voxel once the current number drops below the product of this parameter and the goal number of particles."], "extent": [18169, 18309]}], "container": true, "attrs": {"id": "birththreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Death Threshold"], "extent": [18309, 18326], "body": [{"type": "para", "indent": 4, "text": ["Particles will be deleted from a voxel once the current number rises above the product of this parameter and the goal number of particles."], "extent": [18350, 18494]}], "container": true, "attrs": {"id": "deaththreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Oversample At Boundaries"], "extent": [17887, 17913], "body": [{"type": "para", "indent": 4, "text": ["Oversample within ", {"type": "ui", "text": ["Oversampling Bandwidth"]}, " voxels of the fluid volume boundaries. This setting helps avoid collapsing pockets of fluid at the boundaries of a ", {"type": "q", "text": ["Tank"]}, "-type simulation."], "extent": [17939, 18128]}], "container": true, "attrs": {"id": "oversamplebounds"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Surface Oversampling"], "extent": [17521, 17543], "body": [{"type": "para", "indent": 4, "text": ["The goal number of particles will be scaled by this amount when within ", {"type": "ui", "text": ["Oversampling Bandwidth"]}, " of the surface."], "extent": [17565, 17684]}], "container": true, "attrs": {"id": "oversampling"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Oversampling Bandwidth"], "extent": [17684, 17708], "body": [{"type": "para", "indent": 4, "text": ["Oversample within this number of voxels from the surface or any ", {"type": "ui", "text": ["Surface"]}, " volume boundaries, if ", {"type": "ui", "text": ["Oversample at Boundaries"]}, " is\n    enabled."], "extent": [17739, 17887]}], "container": true, "attrs": {"id": "oversamplingbandwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Random Seed"], "extent": [18494, 18507], "body": [{"type": "para", "indent": 4, "text": ["A seed that controls the time-varying random function used to generate new particle positions when reseeding.  Because high-frequency splashes in a simulation are strongly influenced by particle positions, varying this value (e.g. with a ", {"scheme": "Node", "value": "/nodes/out/wedge", "type": "link", "text": ["Wedge ROP"], "fullpath": "/nodes/out/wedge.html"}, ") can generate multiple simulations with similar bulk motion but different splash behavior from otherwise identical simulation parameters."], "extent": [18521, 18929]}], "container": true, "attrs": {"id": "seed"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [11628, 11650], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Show Collision"], "extent": [11650, 11667], "body": [{"type": "para", "indent": 4, "text": ["Turn on the checkbox to display a wireframe representation of the collision objects' surface to check for leaks or insufficient resolution."], "extent": [11690, 11835]}], "container": true, "attrs": {"id": "showcollision"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Particles "], "extent": [11835, 11853]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Points as Spheres"], "extent": [11853, 11873], "body": [{"type": "para", "indent": 4, "text": ["When turned on, particles are displayed as small spheres."], "extent": [11902, 11965]}], "container": true, "attrs": {"id": "vis_pointsasspheres"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Color by Speed"], "extent": [11965, 11981], "body": [{"type": "para", "indent": 4, "text": ["Use ", {"type": "ui", "text": ["Max Speed"]}, " and the ", {"type": "ui", "text": ["Visualization Ramp"]}, " to dye the particles according to their speed and enhance areas of interest like splashes."], "extent": [12007, 12152]}], "container": true, "attrs": {"id": "vis_colorbyspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Speed"], "extent": [12152, 12163], "body": [{"type": "para", "indent": 4, "text": ["Use this parameter to visualize the fluid\u2019s velocity differences. All particles with velocities equal to or greater than the adjusted value will be displayed with the same color."], "extent": [12185, 12369]}], "container": true, "attrs": {"id": "vis_maxspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualization Ramp"], "extent": [12369, 12389], "body": [{"type": "para", "indent": 4, "text": ["The speed values will be fed through this ramp to obtain a particle color."], "extent": [12407, 12487]}], "container": true, "attrs": {"id": "vis_ramp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Point No."], "extent": [12487, 12498], "body": [{"type": "para", "indent": 4, "text": ["The number of ramp\u2019s color sliders."], "extent": [12498, 12539]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Position"], "extent": [12539, 12549], "body": [{"type": "para", "indent": 4, "text": ["The current position of the active color slider. Values range from ", {"type": "code", "text": ["0"]}, " (leftmost color) to ", {"type": "code", "text": ["1"]}, " (rightmost color)."], "extent": [12571, 12690]}], "container": true, "attrs": {"id": "vis_ramp3pos"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Color"], "extent": [12690, 12697], "body": [{"type": "para", "indent": 4, "text": ["The base color for this set. You can choose a color from a palette or define numerical RGB through the input fields."], "extent": [12717, 12839]}], "container": true, "attrs": {"id": "vis_ramp3#"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Interpolation"], "extent": [12839, 12854], "body": [{"type": "para", "indent": 4, "text": ["Choose a method from the dropdown menu to determine, how the curve between the color points should be interpolated."], "extent": [12879, 13000]}], "container": true, "attrs": {"id": "vis_ramp3interp"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [13000, 13017], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" Solving "], "extent": [13017, 13034]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Particle Narrow Band"], "extent": [54330, 54359], "body": [{"type": "para", "indent": 4, "text": ["A narrow band of FLIP particles will be used to update the\n    fluid\u2019s surface and velocity volumes within the ", {"type": "ui", "text": ["Bandwidth"]}, "\n    of the fluid surface. Any particles deeper into the fluid than\n    the ", {"type": "ui", "text": ["Bandwidth"]}, " will be removed from the simulation."], "extent": [54381, 54637]}], "container": true, "attrs": {"id": "donarrowband"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Use Multigrid Preconditioner"], "extent": [6092, 6126], "body": [{"type": "para", "indent": 8, "text": ["When this checkbox is turned on, the pressure system is preconditioned using algebraic\n        multigrid to speed up the solution. This option greatly reduces the number of iterations required to converge, at the expense of increasing the cost of each iteration. This typically greatly speeds up the solve, but does not support Air Incompressibility or distribution."], "extent": [6159, 6534]}], "container": true, "attrs": {"id": "usemgpreconditioner"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Solve Pressure with Adaptivity"], "extent": [13149, 13181], "body": [{"type": "para", "indent": 4, "text": ["When turned on, the pressure solver uses adaptive timesteps where possible to decrease simulation time. If you observe instabilities or exploding particles, try to turn off this option."], "extent": [13210, 13401]}, {"type": "para", "indent": 4, "text": ["This mode ", {"type": "em", "text": ["can\u2019t"]}, " be used in conjunction with ", {"type": "ui", "text": ["Fluid Behavior \u25b8 Air Incompressibility"]}, ". You also have to turn off this option in simulations with point variable density."], "extent": [13401, 13578]}], "container": true, "attrs": {"id": "useadaptivepressure"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Solve Viscosity with Adaptivity"], "extent": [13578, 13611], "body": [{"type": "para", "indent": 4, "text": ["When turned on, the viscosity solver uses adaptive timesteps where possible to decrease simulation time. If you observe instabilities or exploding particle, try to turn off this option. If the problems persist, consider increasing ", {"type": "ui", "text": ["Solver \u25b8 Global Substeps"]}, "."], "extent": [13640, 13906]}], "container": true, "attrs": {"id": "useadaptivevelocity"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Checkpoints "], "extent": [13906, 13926]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Save Checkpoints"], "extent": [10205, 10223], "body": [{"type": "para", "indent": 4, "text": ["Normally when the Allow Caching to Disk is enabled and the simulation hits the memory limit, the simulation is saved to files in the temp directory.  While these are valid .sim files, they can be hard to manage. When this options is on, each frame is immediately cached to the specified directory. It is still kept in memory until the Cache Memory is hit, but at that point it is not saved to disk (since it\u2019s already on disk). The advantage of checkpointing is that if a cache frame already exists DOPs will not cook that frame, even if the simulation has been reset. Instead it will load that frame. Further, it only needs to cook the frames after the last valid checkpoint frame before the requested frame.  So if you have cache_50.sim and try to cook frame 100, cooking can start at frame 50."], "extent": [10246, 11048]}, {"type": "para", "indent": 4, "text": ["Using save checkpoints is similar to using a File DOP in Automatic Mode. However, when you try to jump to frame 50 with a File DOP it must load the first 50 frames. With checkpoints it can skip this step."], "extent": [11048, 11258]}], "container": true, "attrs": {"id": "explicitcache"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Checkpoint Files"], "extent": [11258, 11276], "body": [{"type": "para", "indent": 4, "text": ["The file sequence to save the checkpoints to.  These are .sim files, loadable with the File DOP or File SOP.  The variable $SF must be used to specify the frame number - $F cannot be used because this is working in simulation space. $SF4 is also supported."], "extent": [11303, 11565]}], "container": true, "attrs": {"id": "explicitcachename"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Checkpoint Trail Length"], "extent": [11565, 11590], "body": [{"type": "para", "indent": 4, "text": ["How much of a history to keep before the checkpoint files are deleted.  A value of 0 will never delete cache files. Otherwise, frames older than this value will be erased from disk."], "extent": [11619, 11806]}, {"type": "para", "indent": 4, "text": ["Note that only checkpoint files created by this session of Houdini will be deleted.  If you restart Houdini with an existent cache files, they will not be deleted.  This is done because you were likely restarting from a crashed location and will want to guarantee you can once again restart there if it crashes again."], "extent": [11806, 12129]}], "container": true, "attrs": {"id": "explicitcachensteps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Checkpoint Interval"], "extent": [12129, 12150], "body": [{"type": "para", "indent": 4, "text": ["The frame interval between checkpoints. Setting this to a value of 1 will save a checkpoint every frame. Setting this to higher values will save a checkpoint after every number of frames specified. For example setting this to 5 will save a checkpoint every 5 frames."], "extent": [12190, 12462]}, {"type": "para", "indent": 4, "text": ["This can be done to save disk space if you are running a large simulation. "], "extent": [12462, 12543]}], "container": true, "attrs": {"id": "explicitcachecheckpointspacing"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [14107, 14115], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Sources"], "extent": [14115, 14125], "body": [{"type": "para", "indent": 4, "text": ["Expects the fluid\u2019s particles."], "extent": [14125, 14161]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Container"], "extent": [14161, 14172], "body": [{"type": "para", "indent": 4, "text": ["Expects the geometry from the FLIP Container SOP as a surface field."], "extent": [14172, 14246]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Collisions"], "extent": [14246, 14258], "body": [{"type": "para", "indent": 4, "text": ["Expects all collision objects from the FLIP Collide SOP nodes as surface and velocity fields."], "extent": [14258, 14357]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Boundary Flow"], "extent": [14357, 14372], "body": [{"type": "para", "indent": 4, "text": ["This input can be used to transfer boundary pressure or velocity information, for example for up-res simulations. It\u2019s also possible to connect an ocean spectrum as an external source to create rolling waves."], "extent": [14372, 14586]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [14586, 14595], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Sources"], "extent": [14595, 14605], "body": [{"type": "para", "indent": 4, "text": ["Contains the fluid particles."], "extent": [14605, 14640]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Container"], "extent": [14640, 14651], "body": [{"type": "para", "indent": 4, "text": ["Contains the geometry from the FLIP Container SOP as a surface field."], "extent": [14651, 14726]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Collisions"], "extent": [14726, 14738], "body": [{"type": "para", "indent": 4, "text": ["Contains all collision objects from the FLIP Collide SOP nodes as surface and velocity fields."], "extent": [14738, 14837]}], "container": true}], "container": true}], "text": "Outputs"}], "title": ["FLIP Solver"], "summary": ["Evolves an object as a FLIP fluid object inside a SOP network."], "included": ["/nodes/dop/flipsolver", "/nodes/dop/gasprojectnondivergentvariational", "/nodes/dop/gassubstep", "/nodes/dop/standard_data_locals", "/nodes/dop/standard_data_outputs", "/nodes/dop/standard_datagroup_parms", "/nodes/dop/standard_dataname_parms", "/nodes/dop/standard_dataop_parms", "/nodes/dop/standard_distribution", "/nodes/dop/standard_locals", "/nodes/dop/standard_microsolver_inputs", "/nodes/dop/standard_solver_mutualparms", "/nodes/dop/standard_solver_parms", "/nodes/obj/common", "/nodes/obj/dopnet", "/props/_minmax_styles", "/props/mantra"]}