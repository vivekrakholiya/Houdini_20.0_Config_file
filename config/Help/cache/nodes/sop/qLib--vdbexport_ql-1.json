{"type": "root", "attrs": {"type": "node", "context": "sop", "icon": "NETWORKS/rop", "internal": "vdbexport_ql", "version": "1", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["VDB Export qL"], "extent": [47, 65]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 1"]}], "extent": [65, 89]}, {"type": "summary", "indent": 0, "text": ["Exports VDB volume(s) in a way that allows easier use in other applications (such as Maya)."], "extent": [89, 188]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/nodes/sop/qLib--vdbexport_ql-1/vdbexport_ql_sop_main.png", "type": "img", "text": ""}], "extent": [188, 230]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "em", "text": ["A pyro simulation and its generated related geometry (visualization and bounds)."]}], "extent": [230, 316]}], "container": true}, {"type": "para", "indent": 0, "text": ["This operator builds bounding boxes and visualization proxies for the input volume(s),\nand export all the volumes and their related geometry in the specified output directory."], "extent": [316, 493]}, {"type": "para", "indent": 0, "text": ["The exported geometry can be used to represent both the bounding boxes and the\nactual contents of each volume."], "extent": [493, 605]}, {"type": "para", "indent": 0, "text": ["The following files are exported:"], "extent": [605, 640]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["<prefix>.####.vdb"], "extent": [640, 659], "body": [{"type": "para", "indent": 4, "text": ["VDB files (one file per frame), containing data from all the volumes."], "extent": [659, 734]}], "container": true}, {"type": "dt", "indent": 0, "text": ["<prefix>.abc"], "extent": [734, 748], "body": [{"type": "para", "indent": 4, "text": ["Alembic file, containing geometry for each volume\n    (animated \u2013 visualization and bounds)."], "extent": [748, 847]}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": ["The alembic geometry file contains the following objects (for each volume):"], "extent": [847, 924]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["vis_", {"type": "code", "text": ["<volumename>"]}], "extent": [924, 944], "body": [{"type": "para", "indent": 4, "text": ["An animated geometry, indicating (approximate) voxel values."], "extent": [944, 1010]}], "container": true}, {"type": "dt", "indent": 0, "text": ["volume_", {"type": "code", "text": ["<volumename>"]}], "extent": [1010, 1033], "body": [{"type": "para", "indent": 4, "text": ["An animated bounding box, representing the bounds of the volume\n    on each frame."], "extent": [1033, 1121]}], "container": true}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1121, 1127], "body": [{"type": "para", "indent": 4, "text": [{"type": "em", "text": ["All exported geometry have consistent, non-changing topology"]}, "\n    (even voxel field proxies with changing boundaries)."], "extent": [1127, 1252]}, {"type": "para", "indent": 4, "text": ["This means all geometry are safe to display at fractional\n    frame values (", {"type": "q", "text": ["subframes"]}, ") \u2013 without visualization geometry\n    falling apart, for example."], "extent": [1252, 1413]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [1413, 1421], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Input Volume(s)"], "extent": [1421, 1442], "body": [{"type": "para", "indent": 8, "text": ["The input geometry, which should consist only of named volume primitives."], "extent": [1442, 1525]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [1525, 1539], "body": [{"type": "para", "indent": 12, "text": ["Unnamed volumes are ", {"type": "em", "text": ["not"]}, " supported \u2013 all volumes should have a ", {"type": "code", "text": ["name"]}, " attribute."], "extent": [1539, 1635]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 4, "text": ["Max Volume Bounds (Manual)"], "extent": [1635, 1667], "body": [{"type": "para", "indent": 8, "text": ["An optional geometry, specifying the maximum bounding box\n        of the volume(s). This should include all animation of the volume(s)."], "extent": [1667, 1812]}, {"type": "para", "indent": 8, "text": ["If not connected, the boundaries will be calculated automatically\n        from the input volumes (over the given frame range)."], "extent": [1812, 1948]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [1948, 1961], "body": [{"type": "para", "indent": 12, "text": ["The operator might have to go through its specified frame range multiple times.\n            It is recommended to have simulation(s) cached to disk, before doing any\n            export operation from this node."], "extent": [1961, 2187]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2187, 2199], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Convert to VDBs"], "extent": [2199, 2220], "body": [{"type": "para", "indent": 8, "text": ["If enabled, an automatic conversion is run on all primitives\n        to make sure they are in the VDB format."], "extent": [2220, 2339]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Write 16-bit floats"], "extent": [2339, 2364], "body": [{"type": "para", "indent": 8, "text": ["The VDB volumes written to disk will use the ", {"type": "code", "text": ["half"]}, " data type\n        (which, as the name suggests, requires half the storage space)."], "extent": [2364, 2507]}, {"type": "para", "indent": 8, "text": ["In practice, there shouldn\u2019t be any difference in quality, so this\n        is enabled by default."], "extent": [2507, 2615]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Output Directory"], "extent": [2615, 2637], "body": [{"type": "para", "indent": 8, "text": ["Full path to the directory to contain the VDB file sequence(s)\n        and geometry (alembic) files."], "extent": [2637, 2747]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["File Prefix"], "extent": [2747, 2764], "body": [{"type": "para", "indent": 8, "text": ["File name prefix for all created files within the ", {"type": "em", "text": ["Output Directory"]}, "\n        (e.g. ", {"type": "code", "text": ["prefix.0001.vdb"]}, ", ", {"type": "code", "text": ["prefix.abc"]}, ")."], "extent": [2764, 2890]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Start/End/Inc"], "extent": [2890, 2909], "body": [{"type": "para", "indent": 8, "text": ["Frame range to process and export."], "extent": [2909, 2953]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Bounds Range Step"], "extent": [2953, 2976], "body": [{"type": "para", "indent": 8, "text": ["Frame step for the automatic volume boundaries detection\n        (only every ", {"type": "em", "text": ["n"]}, "-th frame is considered, ", {"type": "em", "text": ["n"]}, " being this value)."], "extent": [2976, 3113]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Bounds Scale"], "extent": [3113, 3131], "body": [{"type": "para", "indent": 8, "text": ["An uniform scale, applied to all volume bounding boxes."], "extent": [3131, 3196]}, {"type": "para", "indent": 8, "text": ["For certain renderer/shader configurations, having 100% sized bounds\n        can result in a default volume density ", {"type": "q", "text": ["seeping in"]}, " at the volume bounds\n        (resulting in incorrect renders)."], "extent": [3196, 3397]}, {"type": "para", "indent": 8, "text": ["A slight uniform scaling down of the bounds solves the problem.\n        This is what\u2019s this setting is for (the default value is suitable for\n        most situations)."], "extent": [3397, 3574]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Proxy Vol Step Size"], "extent": [3574, 3599], "body": [{"type": "para", "indent": 8, "text": ["Size of one ", {"type": "q", "text": ["voxel"]}, " in the geometry-proxy representation of a volume."], "extent": [3599, 3678]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [3678, 3691], "body": [{"type": "para", "indent": 12, "text": ["Start with a ", {"type": "em", "text": ["very"]}, " high value and work your way down."], "extent": [3691, 3759]}, {"type": "para", "indent": 12, "text": ["The lower this value the more dense proxy geometry are generated \u2013\n            it\u2019s recommended to use as high values as possible\n            (while still suited for visualization purposes)."], "extent": [3759, 3964]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Proxy Voxel Shape"], "extent": [3964, 3987], "body": [{"type": "para", "indent": 8, "text": ["Shape of a single voxel (Box, Tetrahedron, Tri-Plane)."], "extent": [3987, 4051]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Vis Range Source, Dest"], "extent": [4051, 4079], "body": [{"type": "para", "indent": 8, "text": ["Value range remapping, from original voxel values to their\n        proxy representations."], "extent": [4079, 4178]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Strip Empty Visualization Areas"], "extent": [4178, 4215], "body": [{"type": "para", "indent": 8, "text": ["If enabled, voxels that have zero values throughout the entire\n        frame range will not have visualization geometry."], "extent": [4215, 4345]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [4345, 4358], "body": [{"type": "para", "indent": 12, "text": ["Using this option usually allows for more detailed proxy geometry\n            (i.e. lower ", {"type": "em", "text": ["Step Size"]}, " values)."], "extent": [4358, 4482]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Strip Using Field, Min Value"], "extent": [4482, 4516], "body": [{"type": "para", "indent": 8, "text": ["A voxel will be considered empty if its value remain below the\n        given ", {"type": "em", "text": ["Min Value"]}, " in the specified ", {"type": "em", "text": ["Field"]}, "\n        (throughout the entire frame range)."], "extent": [4516, 4684]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Display Only"], "extent": [4684, 4702], "body": [{"type": "para", "indent": 8, "text": ["If enabled, only the specified geometry will be displayed (or used as\n        SOP output).\n        ", {"type": "em", "text": ["This does not affect geometry export."]}], "extent": [4702, 4850]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Show Guide"], "extent": [4850, 4866], "body": [{"type": "para", "indent": 8, "text": ["Show all volume bounds as guide geometry."], "extent": [4866, 4917]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Export"], "extent": [4917, 4929], "body": [{"type": "para", "indent": 8, "text": ["Run the export process."], "extent": [4929, 4964]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4964, 4973], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::pre_export_ql::2", "type": "link", "text": ["Pre-Export qL SOP"], "exists": true}], "extent": [4973, 5031]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [5031, 5044]}], "container": true}], "text": "Related"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [5044, 5056], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Test well and make sure 16-bit (half) volumes work (esp. in a Maya-Arnold combo)"], "extent": [5056, 5143]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["(done: to test) Have an explicit max bounding box option"], "extent": [5143, 5206]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Options for applying ", {"type": "q", "text": ["preprocess motion blur"]}, " to all fields\n      (using velocity volumes)"], "extent": [5206, 5303]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [5303, 5314]}], "container": true}]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [5314, 5319], "body": [{"type": "para", "indent": 4, "text": ["To apply ", {"type": "q", "text": ["preprocess motion blur"]}, " to simulated volumes, take a look at\n    the (experimental) ", {"type": "q", "text": ["Volume Wrangle: Blur Density by Velocity"]}, " gallery item"], "extent": [5319, 5473], "body": [{"type": "para", "indent": 5, "text": ["(qLib\u2013SOP/Volumes, a ", {"type": "em", "text": ["Volume Wrangle SOP"]}, " preset)."], "extent": [5473, 5533]}], "container": true}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "dependencies", "container": true, "type": "dependencies_section", "indent": 0, "role": "section", "extent": [5533, 5547], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::bounds_ql::1", "type": "link", "text": "", "exists": true}], "extent": [5547, 5583]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::attrib_builder_ql::1", "type": "link", "text": "", "exists": true}], "extent": [5583, 5627]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::primgroups_extract_tool_ql::1", "type": "link", "text": "", "exists": true}], "extent": [5627, 5680]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/out/qLib::rop_tool_ql::1", "type": "link", "text": "", "exists": true}], "extent": [5680, 5718]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [5718, 5731]}], "container": true}], "text": "Dependencies"}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [5731, 5755], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [5755, 5783]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2015-03-11"], "extent": [5783, 5795], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Resaved in H14."], "extent": [5795, 5817]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Internally it always considers the last frame of the range, even with larger-than-range\n      ", {"type": "em", "text": ["Bounds Range Step"]}, " values (useful for Strip Empty Visualization Areas)"], "extent": [5817, 5990]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2015-01-01"], "extent": [5990, 6002], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added somewhat better error ", {"type": "q", "text": ["handling"]}, " (it doesn\u2019t stop at missing geometry, but at least it shows an error message)"], "extent": [6002, 6125]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Happy new year! :)"], "extent": [6125, 6151]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-29"], "extent": [6151, 6163], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["Write 16-bit Floats"]}, " to VDB conversion"], "extent": [6163, 6216]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-22"], "extent": [6216, 6228], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Bounds Range Step wasn\u2019t connected \u2013 fixed"], "extent": [6228, 6278]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [6278, 6289]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-10-09"], "extent": [6289, 6301], "body": [{"type": "para", "indent": 4, "text": ["First qLib version. (What started out as a quick-and-dirty thing\n    is now in a state that it is not shameful to present in in public. :))"], "extent": [6301, 6447]}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-09-29"], "extent": [6447, 6459], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Enabled ", {"type": "q", "text": ["Batch Mode"]}, " on obj extract tool"], "extent": [6459, 6507]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-??-??"], "extent": [6507, 6519], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Previous versions (in-house^2)"], "extent": [6519, 6557]}], "container": true}], "container": true}], "container": true}]}], "title": ["VDB Export qL"], "summary": ["Exports VDB volume(s) in a way that allows easier use in other applications (such as Maya)."]}