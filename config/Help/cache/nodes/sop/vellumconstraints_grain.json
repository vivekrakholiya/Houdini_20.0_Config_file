{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "vellumconstraints_grain", "icon": "SHELF/vellum_grains", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Vellum Configure Grain"], "extent": [111, 138]}, {"type": "summary", "indent": 0, "text": ["Configures geometry for Vellum Grain constraints."], "extent": [138, 196]}, {"type": "para", "indent": 0, "text": ["The Vellum Configure Grain SOP configures the incoming geometry to be solved as grains or fluid in the Vellum Solver system.  The two main options are either to convert the incoming geometry into points by treating it as a volume and filling it with grains or fluid particles; or tag existing points on the input to have grain-like behavior."], "extent": [196, 539]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [539, 545], "body": [{"type": "para", "indent": 4, "text": ["Grains and fluid often require more substeps than other Vellum constraint types.  It is recommended any attached Vellum solver be raised to at least 5 substeps for stability."], "extent": [545, 725]}], "container": true}, {"type": "note", "indent": 0, "role": "item", "extent": [725, 731], "body": [{"type": "para", "indent": 4, "text": ["For more control over filling a volume with grains, look at the ", {"scheme": "Node", "value": "/nodes/sop/grainsource", "type": "link", "text": ["Grain Source"], "fullpath": "/nodes/sop/grainsource.html"}, " node."], "extent": [731, 842]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [842, 854], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Create Points from Volume"], "extent": [854, 882], "body": [{"type": "para", "indent": 4, "text": ["Treat the incoming geometry as a closed volume and fill it with points.\n    These points are then configured as grains or fluid, according to the ", {"type": "ui", "text": ["Type"]}, " parameter."], "extent": [905, 1076]}], "container": true, "attrs": {"id": "createpoints"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [1076, 1083], "body": [{"type": "para", "indent": 4, "text": ["The subset of incoming points to configure for grain-like interaction."], "extent": [1099, 1175]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group Type"], "extent": [1175, 1187], "body": [{"type": "para", "indent": 4, "text": ["In case the group is named or numeric, this can disambiguate what\n    type of group it is."], "extent": [1207, 1303]}], "container": true, "attrs": {"id": "grouptype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Convex Hull"], "extent": [1303, 1320], "body": [{"type": "para", "indent": 4, "text": ["Create points inside the convex hull of the input geometry."], "extent": [1339, 1404]}], "container": true, "attrs": {"id": "doconvex"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Method"], "extent": [1404, 1412], "body": [{"type": "para", "indent": 4, "text": ["Controls the method used for creating points.  ", {"type": "ui", "text": ["Regular Grid"]}, " creates a regular grid of particles that \n    can be jittered with ", {"type": "ui", "text": ["Jitter Scale"]}, ".  ", {"type": "ui", "text": ["Sphere Packing"]}, " scatters points within the volume and adjusts their positions to avoid overlap."], "extent": [1429, 1683]}], "container": true, "attrs": {"id": "method"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Type"], "extent": [1683, 1689], "body": [{"type": "para", "indent": 4, "text": ["The type of particle to create: ", {"type": "ui", "text": ["Grain"]}, " or ", {"type": "ui", "text": ["Fluid"]}, "."], "extent": [1704, 1765]}], "container": true, "attrs": {"id": "type"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Particle Size"], "extent": [1765, 1780], "body": [{"type": "para", "indent": 4, "text": ["Diameter of the particles. The ", {"type": "code", "text": ["pscale"]}, " attribute will be set to\n    one half this."], "extent": [1800, 1889]}], "container": true, "attrs": {"id": "grainsize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Packing Density"], "extent": [1889, 1906], "body": [{"type": "para", "indent": 4, "text": ["Allows for over packing of the input geometry. Increasing this value\n    helps fill the volume completely with ", {"type": "ui", "text": ["Fluid"]}, " particles. However, ", {"type": "ui", "text": ["Grain"]}, "\n    particles might be packed too close together for values over 1, causing an initial\n    expansion during the simulation."], "extent": [1935, 2215]}], "container": true, "attrs": {"id": "packingdensity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Jitter Scale"], "extent": [2215, 2229], "body": [{"type": "para", "indent": 4, "text": ["Controls jittering of point positions.  "], "extent": [2251, 2297]}, {"type": "para", "indent": 4, "text": ["Because relaxation can never accurately separate all particles, note\n    that the final ", {"type": "code", "text": ["pscale"]}, " will be reduced to minimize overlap."], "extent": [2297, 2436]}], "container": true, "attrs": {"id": "jitterscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Dither Surface"], "extent": [4549, 4565], "body": [{"type": "para", "indent": 4, "text": ["If a uniform lattice of points is being built, then the surface layer will exhibit terracing as points cross the boundary.  This dithers the points, comparing the distance to the cut-off threshold with a random number to see if the point should be kept.  This causes points to be kept outside of the threshold, as it expands half a grid scale in both directions. Turning this on will result in a more randomized surface layer."], "extent": [4588, 5020]}], "container": true, "attrs": {"id": "dithersurface"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Dither Normal"], "extent": [5020, 5035], "body": [{"type": "para", "indent": 4, "text": ["Often an object has one face that is free, and the other faces are constrained by collisions.  If you don\u2019t want to dither the colliding faces (as particles may be generated outside of the collision range, or holes made that will collapse) you can use this normal and the angle to specify which regions of the source are available for dithering.  The geometric normal of the SDF built from the surface is used, not any normal attribute on the incoming geometry."], "extent": [5057, 5524]}], "container": true, "attrs": {"id": "dithernormal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Dither Angle"], "extent": [5524, 5538], "body": [{"type": "para", "indent": 4, "text": ["How many degrees away from the dither normal is eligible for dithering.  Setting this value to 180 will cause all faces to be dithered."], "extent": [5559, 5700]}], "container": true, "attrs": {"id": "ditherangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Isovalue"], "extent": [2542, 2552], "body": [{"type": "para", "indent": 4, "text": ["The crossing point of the SDF values that is considered the surface."], "extent": [2571, 2645]}], "container": true, "attrs": {"id": "isovalue"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Radius Scale"], "extent": [2645, 2663], "body": [{"type": "para", "indent": 4, "text": ["The largest sphere can be larger than the ", {"type": "ui", "text": ["Particle Size"]}, " up to this specified scale.  Note that enabling this parameter can create non-uniform radius particles."], "extent": [2688, 2857]}], "container": true, "attrs": {"id": "radiusmaxscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Spheres"], "extent": [2857, 2870], "body": [{"type": "para", "indent": 4, "text": ["At least this many spheres must be generated.  Note that three particles are required to get plausible rotations in a simulation."], "extent": [2891, 3026]}], "container": true, "attrs": {"id": "spheresmin"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Spheres"], "extent": [3026, 3039], "body": [{"type": "para", "indent": 4, "text": ["No more than this number of spheres are generated."], "extent": [3060, 3120]}], "container": true, "attrs": {"id": "spheresmax"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Point Count"], "extent": [3120, 3133], "body": [{"type": "para", "indent": 4, "text": ["Maximum number of interior points to consider for the sphere placement."], "extent": [3151, 3232]}], "container": true, "attrs": {"id": "scatter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Overlapping"], "extent": [3232, 3245], "body": [{"type": "para", "indent": 4, "text": ["When enabled, spheres will be allowed to overlap/intersect."], "extent": [3267, 3332]}], "container": true, "attrs": {"id": "Overlapping"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Physical Attributes"], "extent": [3332, 3358], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Mass"], "extent": [3358, 3365], "body": [{"type": "para", "indent": 4, "text": ["The method used for computing particle mass. ", {"type": "ui", "text": ["Set Uniform"]}, " will set all particles to the specified mass. ", {"type": "ui", "text": ["Calculate Uniform"]}, " will compute the particle mass based on the ", {"type": "ui", "text": ["Density"]}, " parameter."], "extent": [3382, 3583]}], "container": true, "attrs": {"id": "domass"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Density"], "extent": [3583, 3592], "body": [{"type": "para", "indent": 4, "text": ["The density of the material used for computing particle mass when ", {"type": "ui", "text": ["Mass"]}, " is set to ", {"type": "ui", "text": ["Calculate Uniform"]}, "."], "extent": [3610, 3723]}], "container": true, "attrs": {"id": "density"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Phase"], "extent": [3723, 3730], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Type"]}, " is set to ", {"type": "ui", "text": ["Fluid"]}, ", identifies the phase of the fluid.  Fluids set to different phases will solve for viscosity and surface tension separately, giving the appearance of separate fluids."], "extent": [3746, 3952]}], "container": true, "attrs": {"id": "phase"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Viscosity"], "extent": [3952, 3963], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["viscosity"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Viscosity"]}, " parameter on the Vellum Solver."], "extent": [3983, 4107]}], "container": true, "attrs": {"id": "viscosity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Surface Tension"], "extent": [4107, 4124], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["surfacetension"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Surface Tension"]}, " parameter on the Vellum Solver."], "extent": [4149, 4283]}], "container": true, "attrs": {"id": "surfacetension"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Friction"], "extent": [4283, 4293], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["friction"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Friction"]}, " parameter on the Vellum Solver."], "extent": [4312, 4433]}], "container": true, "attrs": {"id": "friction"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["DynamicFriction"], "extent": [4433, 4450], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["dynamicfriction"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Dynamic Friction"]}, " parameter on the Vellum Solver."], "extent": [4476, 4612]}], "container": true, "attrs": {"id": "dynamicfriction"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attraction Weight"], "extent": [4612, 4631], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["attractionweight"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Attraction Weight"]}, " parameter on the Vellum Solver."], "extent": [4658, 4796]}], "container": true, "attrs": {"id": "attractionweight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Replusion Weight"], "extent": [4796, 4814], "body": [{"type": "para", "indent": 4, "text": ["Sets the ", {"type": "code", "text": ["replusionweight"]}, " point attribute, which acts as a multiplier on the ", {"type": "ui", "text": ["Replusion Weight"]}, " parameter on the Vellum Solver."], "extent": [4840, 4976]}], "container": true, "attrs": {"id": "replusionweight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Define Pieces"], "extent": [4976, 4991], "body": [{"type": "para", "indent": 4, "text": ["Split the object into disjoint pieces when generating particles."], "extent": [5011, 5081]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["From Attribute"], "extent": [5081, 5101], "body": [{"type": "para", "indent": 8, "text": ["This integer or string attribute\u2019s unique values are used to define each piece."], "extent": [5101, 5190]}], "container": true}, {"type": "dt", "indent": 4, "text": ["From Connectivity"], "extent": [5190, 5213], "body": [{"type": "para", "indent": 8, "text": ["Connectivity of the input geometry is used to define the pieces."], "extent": [5213, 5287]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "piecemode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Transfer Piece Attribute"], "extent": [5287, 5313], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Define Pieces"]}, " is enabled, output the source piece attribute to each generated particle."], "extent": [5338, 5440]}], "container": true, "attrs": {"id": "addpieceattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Display as Spheres"], "extent": [5440, 5460], "body": [{"type": "para", "indent": 4, "text": ["Adds a detail attribute so the grains will display as lit spheres in the viewport."], "extent": [5483, 5571]}], "container": true, "attrs": {"id": "spherepoints"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Add Sprite Material"], "extent": [5571, 5592], "body": [{"type": "para", "indent": 4, "text": ["Adds a sprite material so the grains will display as spheres in the viewport."], "extent": [5613, 5696]}], "container": true, "attrs": {"id": "showsprite"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Show All Points"], "extent": [5696, 5713], "body": [{"type": "para", "indent": 4, "text": ["Points that are attached to primitives do not draw their sprites by\n    default. This will cause them to still draw the sprite, useful\n    if combining two constraint types within the same point."], "extent": [5737, 5938]}], "container": true, "attrs": {"id": "showallpoints"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [5938, 5947], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/grainsource", "type": "link", "text": "", "fullpath": "/nodes/sop/grainsource.html"}], "extent": [5947, 5976]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumdrape", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumdrape.html"}], "extent": [5976, 6005]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumconstraints", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumconstraints.html"}], "extent": [6005, 6040]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumsolver", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumsolver.html"}], "extent": [6040, 6070]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumio", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumio.html"}], "extent": [6070, 6097]}], "container": true}], "text": "Related"}], "title": ["Vellum Configure Grain"], "summary": ["Configures geometry for Vellum Grain constraints."], "included": ["/nodes/sop/grainsource"]}