{"type": "root", "attrs": {"icon": "SHELF/flat_tank", "tags": "oceans"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Ocean Flat Tank"], "extent": [38, 58]}, {"type": "summary", "indent": 0, "text": ["Creates a FLIP fluid simulation from an underlying ocean surface."], "extent": [58, 132]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [132, 147], "body": [{"type": "para", "indent": 0, "text": ["This tool creates a FLIP tank simulation with particles initialized from an ocean surface with velocities. A ", {"type": "em", "text": ["boundary layer"]}, " of particles suppresses reflections at the edge of the tank, contributes ocean velocities back to the simulation, and maintains the water volume level to match the ocean. This ", {"type": "em", "text": ["boundary layer"]}, " also applies ocean velocities at the ", {"type": "em", "text": ["closed boundaries"]}, " to allow in/out-flow of the FLIP simulation."], "extent": [147, 570]}, {"type": "para", "indent": 0, "text": ["The Ocean Flat Tank can be a static tank or can follow a moving object through the ocean."], "extent": [570, 661]}, {"type": "para", "indent": 0, "text": ["The ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " node allows you to shape the initial frame of your simulated ocean, and ", {"scheme": "Node", "value": "/nodes/sop/oceansource", "type": "link", "text": ["Ocean Source"], "fullpath": "/nodes/sop/oceansource.html"}, " controls the outputs. "], "extent": [661, 837]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [837, 842], "body": [{"type": "para", "indent": 4, "text": ["For more information, see the ", {"scheme": null, "value": "/shelf/ocean_differences", "type": "link", "text": ["differences between ocean tank types"], "fullpath": "/shelf/ocean_differences.html"}, " help page."], "extent": [842, 952]}], "container": true}], "container": true, "role": "item_group"}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [952, 958], "body": [{"type": "para", "indent": 4, "text": ["Several of the ocean tanks use the ", {"type": "ui", "text": ["Narrow Band"]}, " feature in the ", {"scheme": "Node", "value": "/nodes/dop/flipsolver", "type": "link", "text": ["FLIP Solver"], "fullpath": "/nodes/dop/flipsolver.html"}, " by default. If the traditional full tank is desired, it can be changed back by selecting ", {"type": "ui", "text": ["Particle Field"]}, " in the ", {"scheme": "Node", "value": "/nodes/dop/flipobject", "type": "link", "text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject.html"}, "."], "extent": [8690, 8950]}, {"type": "para", "indent": 4, "text": [{"scheme": "Image", "value": "/news/16_5/images/narrow_band_flip.jpg", "type": "img", "text": ""}], "extent": [8950, 9001]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Using Ocean Flat Tank"], "extent": [999, 1027], "body": [{"type": "ord_group", "body": [{"blevel": 2, "type": "ord", "indent": 0, "text": ["Click the ", {"scheme": "Icon", "value": "SHELF/flat_tank", "type": "link", "text": "", "fullpath": "/shelf/SHELF/flat_tank.html"}, " ", {"type": "ui", "text": ["Ocean Flat Tank"]}, " tool on the ", {"type": "ui", "text": ["Oceans"]}, " tab to create a tank.  "], "extent": [1027, 1131]}, {"blevel": 2, "type": "ord", "indent": 0, "text": ["Select an animated object to follow and press ", {"keys": ["Enter"], "type": "keys", "text": null}, " to confirm your selection. If no object is selected, you will be prompted to place a static tank."], "extent": [1131, 1289]}], "container": true}, {"level": 3, "id": "howto", "container": true, "type": "h", "indent": 0, "text": ["Changing the look of your ocean"], "extent": [16, 62], "body": [{"type": "task_group", "body": [{"ext": null, "type": "task", "indent": 8, "text": [" Set the height of the wave"], "role": "item", "extent": [62, 106], "body": [{"type": "para", "indent": 16, "text": ["Navigate to the ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " node and adjust the ", {"type": "ui", "text": ["Wave Scale"]}, " parameter on the ", {"type": "ui", "text": ["Wave Amplitude"]}, " tab."], "extent": [106, 263]}, {"type": "para", "indent": 16, "text": ["This value is multiplied by the ", {"type": "ui", "text": ["Speed"]}, " parameter on the ", {"type": "ui", "text": ["Wind"]}, " tab."], "extent": [263, 369]}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [369, 391], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_height_low.jpg", "type": "img", "text": ""}], "extent": [391, 453]}], "container": true}, {"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [453, 475], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_height_high.jpg", "type": "img", "text": ""}], "extent": [475, 555]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"ext": null, "type": "task", "indent": 8, "text": [" Set the direction of the waves"], "role": "item", "extent": [555, 602], "body": [{"type": "para", "indent": 16, "text": ["Navigate to the ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " node and adjust the ", {"type": "ui", "text": ["Directional Bias"]}, " parameter on the ", {"type": "ui", "text": ["Wind"]}, " tab."], "extent": [602, 755]}, {"type": "para", "indent": 16, "text": ["This controls how many frequencies are moving in the same direction as the wind. Increasing this value will cause more frequencies to travel in the same direction, which is useful for creating shoreline effects."], "extent": [755, 1000]}, {"type": "para", "indent": 16, "text": ["You can also try increasing the ", {"type": "ui", "text": ["Directional Movement"]}, " parameter. This will dampen the waves moving in the opposite direction of the wind, leaving only the ones moving in the same direction."], "extent": [1000, 1226]}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [1226, 1248], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_direction1.jpg", "type": "img", "text": ""}], "extent": [1248, 1310]}], "container": true}, {"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [1310, 1332], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_direction.jpg", "type": "img", "text": ""}], "extent": [1332, 1402]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"ext": null, "type": "task", "indent": 8, "text": [" Control the height of the peak"], "role": "item", "extent": [1402, 1449], "body": [{"type": "para", "indent": 16, "text": ["Navigate to the ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " node and adjust the ", {"type": "ui", "text": ["Chop"]}, " parameter on the ", {"type": "ui", "text": ["Wind"]}, " tab."], "extent": [1449, 1598]}, {"type": "para", "indent": 16, "text": ["Increasing this parameter creates sharp peaks on waves. However, if this value is too high waves, may invert on themselves."], "extent": [1598, 1755]}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [1755, 1777], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_peak_low.jpg", "type": "img", "text": ""}], "extent": [1777, 1837]}], "container": true}, {"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [1837, 1859], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_peak_high.jpg", "type": "img", "text": ""}], "extent": [1859, 1937]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"ext": null, "type": "task", "indent": 8, "text": [" Add more detail to your ocean"], "role": "item", "extent": [1937, 1983], "body": [{"type": "para", "indent": 16, "text": ["Increase the ", {"type": "ui", "text": ["Resolution Exponent"]}, " parameter on the ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " node."], "extent": [1983, 2116]}, {"type": "note_group", "body": [{"type": "note", "indent": 16, "role": "item", "extent": [2116, 2138], "body": [{"type": "para", "indent": 24, "text": ["The ", {"type": "ui", "text": ["Resolution Exponent"]}, " parameter will not only determine the quality of your ocean, but also the size of the texture maps that you will eventually write out."], "extent": [2138, 2342]}], "container": true}], "container": true, "role": "item_group"}, {"type": "col_group", "body": [{"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [2342, 2365], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_regular.jpg", "type": "img", "text": ""}, " "], "extent": [2365, 2425]}], "container": true}, {"ext": null, "type": "col", "indent": 16, "role": "item", "extent": [2425, 2448], "body": [{"type": "para", "indent": 20, "text": [{"scheme": "Image", "value": "/images/shelf/wave_detailed.jpg", "type": "img", "text": ""}], "extent": [2448, 2525]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"ext": null, "type": "task", "indent": 8, "text": [" Create a large ocean"], "role": "item", "extent": [2525, 2562], "body": [{"type": "para", "indent": 12, "text": ["Use the ", {"scheme": null, "value": "/shelf/largeocean", "type": "link", "text": ["Large Ocean"], "fullpath": "/shelf/largeocean.html"}, " shelf tool."], "extent": [2562, 2635]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 3, "id": "understand", "container": true, "type": "h", "indent": 0, "text": ["Understanding the network of nodes"], "extent": [2635, 2689], "body": [{"type": "para", "indent": 8, "text": ["There are three important layers to focus on when creating your ocean. First create the ocean, next add whitewater, and finally add specularity for the whitewater. "], "extent": [2689, 2872]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [2872, 2885], "body": [{"type": "para", "indent": 16, "text": ["Disable all whitewater nodes at the OBJ level while you work on your ocean, then disable the ocean nodes while you work on your whitewater."], "extent": [2885, 3050]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 8, "text": ["The first set of nodes control the ocean itself."], "extent": [3050, 3116]}, {"type": "para", "indent": 8, "text": [{"scheme": "Image", "value": "/images/shelf/wavetank_nodes_ocean.jpg", "type": "img", "text": ""}], "extent": [3116, 3180]}, {"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["fluidtank_initial"]}, " controls the first frame of your simulation. This is where you can shape the initial frame of your tank with ", {"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}, " and control the outputs with ", {"scheme": "Node", "value": "/nodes/sop/oceansource", "type": "link", "text": ["Ocean Source"], "fullpath": "/nodes/sop/oceansource.html"}, ". This includes the size of your tank, the depth of the water etc."], "extent": [3180, 3499]}, {"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["AutoDopNetwork"]}, " controls the simulation of your tank. This is where you will find the ", {"scheme": "Node", "value": "/nodes/dop/flipobject", "type": "link", "text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject.html"}, " and ", {"scheme": "Node", "value": "/nodes/dop/flipsolver", "type": "link", "text": ["FLIP Solver"], "fullpath": "/nodes/dop/flipsolver.html"}, ".  The FLIP simulation will contain ", {"scheme": "Node", "value": "/nodes/dop/volumesource", "type": "link", "text": ["Volume Source"], "fullpath": "/nodes/dop/volumesource.html"}, " DOPs to sink and source the boundary layer particles, and a ", {"scheme": "Node", "value": "/nodes/dop/gasguidingvolume", "type": "link", "text": ["Gas Guiding Volume DOP"], "fullpath": "/nodes/dop/gasguidingvolume.html"}, " to add ocean velocities to the simulation. Note, the ", {"scheme": null, "value": "/shelf/beachtank", "type": "link", "text": ["Beach Tank"], "fullpath": "/shelf/beachtank.html"}, " shelf tool uses ", {"scheme": "Node", "value": "/nodes/dop/popadvectbyvolumes", "type": "link", "text": ["POP Advect By Volumes"], "fullpath": "/nodes/dop/popadvectbyvolumes.html"}, " to inject ocean velocities."], "extent": [3499, 4040]}, {"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["fluidtank_fluid"]}, " is the result of #1 and #2 combined, and is where the results are rendered. After the simulation is done, this node collects the fluid particles, sets up a material, creates some nodes for surfacing to finish the effect."], "extent": [4040, 4298]}, {"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["fluidtank_interior"]}, " is also used for rendering, and for creating the volumetric effect that one of the shaders applies to the interior of the fluid. It controls the volume beneath the surface, such as how cloudy or murky the water will appear."], "extent": [4298, 4562]}], "container": true}, {"type": "para", "indent": 8, "text": ["The next set of nodes are to control the whitewater. "], "extent": [4562, 4633]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [4633, 4647], "body": [{"type": "para", "indent": 12, "text": ["To add whitewater to your simulation, use the ", {"scheme": "Icon", "value": "SHELF/whitewater", "type": "link", "text": "", "fullpath": "/shelf/SHELF/whitewater.html"}, {"scheme": "Tool", "value": "whitewater", "type": "link", "text": ["Whitewater"], "fullpath": "/shelf/whitewater.html"}, " tool on the ", {"type": "ui", "text": ["Oceans"]}, " shelf."], "extent": [4647, 4796]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 8, "text": [{"scheme": "Image", "value": "/images/shelf/wavetank_nodes_whitewater.jpg", "type": "img", "text": ""}], "extent": [4796, 4865]}, {"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["whitewater_source"]}, " is where the spray and foam is coming from."], "extent": [4865, 4948]}, {"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["whitewater_sim"]}, " is where the whitewater simulated. This is where you can modify the animation."], "extent": [4948, 5063]}, {"blevel": 10, "type": "ord", "indent": 8, "text": [{"type": "code", "text": ["import_whitewater"]}, " is the result of #1 and #2 combined."], "extent": [5063, 5139]}], "container": true}, {"type": "para", "indent": 8, "text": ["For more information see ", {"scheme": null, "value": "/fluid/whitewater", "type": "link", "text": ["How to animate a wave tank with whitewater"], "fullpath": "/fluid/whitewater.html"}, "."], "extent": [5139, 5245]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [5245, 5259], "body": [{"type": "para", "indent": 12, "text": ["If you build a completely procedural ocean (using the the ", {"scheme": null, "value": "/shelf/largeocean", "type": "link", "text": ["Large Ocean"], "fullpath": "/shelf/largeocean.html"}, " or ", {"scheme": null, "value": "/shelf/smallocean", "type": "link", "text": ["Small Ocean"], "fullpath": "/shelf/smallocean.html"}, " shelf tools for example), the ", {"scheme": "Node", "value": "/nodes/sop/oceanfoam", "type": "link", "text": ["Ocean Foam SOP"], "fullpath": "/nodes/sop/oceanfoam.html"}, " is used."], "extent": [5259, 5472]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 3, "id": "extended", "container": true, "type": "h", "indent": 0, "text": ["Understanding the extended ocean surface nodes"], "extent": [6394, 6458], "body": [{"type": "para", "indent": 8, "text": ["The ", {"scheme": null, "value": "/shelf/guidedoceanlayer", "type": "link", "text": ["Guided Ocean Layer"], "fullpath": "/shelf/guidedoceanlayer.html"}, " and ", {"scheme": null, "value": "/shelf/oceanflattank", "type": "link", "text": ["Ocean Flat Tank"], "fullpath": "/shelf/oceanflattank.html"}, " tools also create a network for rendering an ", {"type": "q", "text": ["extended"]}, " fluid surface that can stretch to the horizon and be rendered with ocean displacement to provide a seamless integration between a FLIP simulation and the surrounding source ocean."], "extent": [6458, 6804]}, {"type": "ord_group", "body": [{"blevel": 10, "type": "ord", "indent": 8, "text": ["The ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, " node (called ", {"type": "code", "text": ["particlefluidsurface1"]}, ") creates the extended FLIP mesh.  The settings on the ", {"type": "ui", "text": ["Flattening"]}, " tab of this node will flatten the fluid simulation near the edges of the simulation area, and extrude the edges of the polygonal mesh outwards to form an extended flat surface.  This flat area surrounding the simulation is then rendered with ocean displacement."], "extent": [6804, 7242]}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["The two ", {"scheme": "Node", "value": "/nodes/sop/particlefluidmask", "type": "link", "text": ["Particle Fluid Mask"], "fullpath": "/nodes/sop/particlefluidmask.html"}, " nodes (called ", {"type": "code", "text": ["particlefluidmask1"]}, " and ", {"type": "code", "text": ["hifrequency_mask"]}, ") will create masks on the input ocean spectra that limit the render-time ocean displacement to specified areas of the simulation, usually where there is little velocity, vorticity, or splash height in the fluid.  These nodes also blend in ocean displacement around the edges of the simulation bounding box to match the flattening applied while surfacing.  The ", {"type": "code", "text": ["hifrequency_mask"]}, " node additionally filters the incoming ocean spectra to remove all but the highest-frequency waves, usually so these can be applied to the simulated FLIP mesh and allow it to better integrate with the surrounding ocean."], "extent": [7242, 7967]}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["The ", {"type": "code", "text": ["surface_preview"]}, " node is a fast preview of the FLIP simulation that then samples the created mask to allow visualization of the ocean contribution using a ", {"scheme": null, "value": "/basics/visualizers", "type": "link", "text": ["viewport visualizer"], "fullpath": "/basics/visualizers.html"}, " on the ", {"type": "code", "text": ["mask"]}, " attribute.  The ", {"type": "code", "text": ["oceanevaluate1"]}, " node applies ocean displacements to that preview based on the calculated masks."], "extent": [7967, 8307]}, {"blevel": 10, "type": "ord", "indent": 8, "text": ["The ", {"type": "code", "text": ["split_spectra_masks"]}, " node will separate out the static ocean spectra from the time-dependent masks created by the masking nodes.  They are cached to two different sets of files to take advantage of the ", {"scheme": null, "value": "/gallery/shop/vopmaterial/oceansurface", "type": "link", "text": ["Ocean Surface"], "fullpath": "/gallery/shop/vopmaterial/oceansurface.html"}, " material\u2019s ability to have separate spectra and mask inputs."], "extent": [8307, 8641]}], "container": true}]}, {"level": 3, "id": "tips", "container": true, "type": "h", "indent": 0, "text": ["Tips for improving the look of your water"], "extent": [5472, 5527], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["The defaults for the tank will create a low res simulation, which makes it easy to animate. However, to create a nice looking render, you will need to change some of the defaults. For example, you will need to increase the number of particles in your scene. Decreasing the ", {"type": "ui", "text": ["Particle Separation"]}, " parameter to about ", {"type": "code", "text": ["0.03"]}, " will create a simulation with approximately 30 million particles."], "extent": [5527, 5936]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Add an environment light to your scene. Water reflects and refracts a lot of the environment around it, so having an environment map in your scene will significantly improve the look."], "extent": [5936, 6147], "body": [{"type": "tip_group", "body": [{"type": "tip", "indent": 16, "role": "item", "extent": [6147, 6168], "body": [{"type": "para", "indent": 24, "text": ["In your ", {"type": "ui", "text": ["Environment Map"]}, " parameter, navigate to the ", {"type": "code", "text": ["HFS/houdini/pic/"]}, " folder and choose the sky file ", {"type": "code", "text": ["DOSCH_SKIESV2_${F2}SN_lowres.rat"]}, "."], "extent": [6168, 6334]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 16, "text": [{"scheme": "Image", "value": "/images/shelf/wavetank_render.jpg", "type": "img", "text": ""}], "extent": [6334, 6394]}], "container": true}], "container": true}]}]}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [1432, 1441], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": ["Ocean Spectrum"], "fullpath": "/nodes/sop/oceanspectrum.html"}], "extent": [1441, 1487]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/oceansource", "type": "link", "text": ["Ocean Source"], "fullpath": "/nodes/sop/oceansource.html"}], "extent": [1487, 1529]}], "container": true}], "text": "Related"}], "title": ["Ocean Flat Tank"], "summary": ["Creates a FLIP fluid simulation from an underlying ocean surface."], "included": ["/shelf/common_ocean"]}